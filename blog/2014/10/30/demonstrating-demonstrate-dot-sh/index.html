
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Demonstrating demonstrate.sh - Zephyrizing</title>
  <meta name="author" content="Geoff Shannon">

  
  <meta name="description" content="Edit 2014/12/30: I ended up rewriting demonstrate in several
different languages, but the implementation that I like the
best is in python. So, in &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.zephyrizing.net/blog/2014/10/30/demonstrating-demonstrate-dot-sh">
  <link rel="icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Zephyrizing" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>

<body   >
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43671921-1', 'auto');
  ga('send', 'pageview');
</script>

  <header role="banner"><hgroup>
  <h1><a href="/">Zephyrizing</a></h1>
  
    <h2>Thoughts on cast-iron seasoning, programming and everything&#8230;</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.zephyrizing.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/presentations">Presentations</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  

  <header>
    
      <h1 class="entry-title">Demonstrating demonstrate.sh</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-30T15:33:34-05:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:33 pm</span></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://www.zephyrizing.net">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p><em>Edit 2014/12/30: I ended up rewriting demonstrate in <a href="https://github.com/RadicalZephyr/demonstrate.sh">several</a>
<a href="https://github.com/RadicalZephyr/demonstrate">different</a> languages, but the implementation that I like the
best is in <a href="https://github.com/RadicalZephyr/demonstrate.py">python</a>.</em></p>

<p>So, in the course of trying to prepare a presentation for this
Thursday (today!), I ended up creating a program called
<code>demonstrate.sh</code>. Basically, it lets you write a script, meant for an
interpreter (like bash, python, irb, coffee etc.) and then execute it
on demand.</p>

<!--more-->


<p>What do I mean by &ldquo;on demand&rdquo;? Well, basically it invokes the
interpreter and then reads the script file one line at a time. Then it
prints out a fake prompt based on the interpreter you specified, and
then it prints out the line of input it&rsquo;s processing.  When you hit
enter, the script sends that line of input to the interpreter and it
then prints its output to the screen. Oh, there&rsquo;s one little
caveat. When <code>demonstrate.sh</code> prints the line of output, it prints it
character by character with a small randomized delay. So it looks a
bit like you&rsquo;re actually typing out the command.</p>

<p>That&rsquo;s it! It&rsquo;s a simple script, but it allows you to create and then
run in a repeatable way a sequence of commands that you want to
<em>demonstrate</em>.</p>

<p>There are some improvements I&rsquo;d like to add. The ability to
recursively run demonstrate scripts inside of a demonstrate script
would be awesome. Currently because I&rsquo;m doing everything in the
simplest possible way, and the script is run in the background running
demonstrate inside of a demonstrate script doesn&rsquo;t work very well. I&rsquo;m
actually not entirely sure why it doesn&rsquo;t work, but the results are
demonstrably not what I want.</p>

<p>It would also be nice to make it so that you can insert arbitrary
commands to the interpreter, instead of only being able to run the
commands in the script. This is a particularly key feature since if
you just start another interpreter to run ad-hoc commands, you don&rsquo;t
have the same environment. This isn&rsquo;t important if your script doesn&rsquo;t
contain any side-effectful things, but I think that a lot of scripts
will tend to.</p>

<p>Finally, it would be really nice if the <code>demonstrate.sh</code> didn&rsquo;t need
to fake the prompts for the interpreters. In an ideal world, those
prompts would be transparently printed directly to the screen. I&rsquo;m
sure there&rsquo;s a way to do it, but it probably isn&rsquo;t possible/easy in
<code>bash</code>.</p>

<p>When I talked to <a href="https://github.com/doy">Jesse</a> about this, he asked the critical question.
Why not just record the output? My answer was essentially because I
wanted to eventually be able to run arbitrary commands in addition to
the script commands. This is sort of a weak answer, since it depends
on a feature I haven&rsquo;t yet implemented!</p>

<p>But there&rsquo;s another answer, that I discovered today when I was playing
with the classic Unix utility <code>script</code> that does exactly what Jesse
was talking about. The difference between recording an interaction
with <code>script</code> and writing a demonstrate script is this. Recording with
<code>script</code> is <em>still live coding</em>. This is especially true if you want
to use the timing feature to play it back at the same speed that it
happened at. In contrast, writing a <code>demonstrate</code> script is the same
as writing any regular script for the interpreter you&rsquo;re
targeting. You are totally offline, and you can write and edit the
script directly, and then run it with demonstrate to make sure it does
exactly what you want.</p>

<p>From what I&rsquo;ve been told about the early days of programming, the
difference between recording an interaction with <code>script</code> and writing
a <code>demonstrate</code> script is approximately the same as the difference
between writing programs on punch cards and writing programs in a text
editor on a computer. If you mess up while punching the card, you have
to start over from the beginning (barring awesome hacks
<a href="https://twitter.com/francesc/status/521602168022118400">like this</a>).</p>

<p>Yup, that&rsquo;s it. If you&rsquo;re interested, check it out
<a href="https://github.com/RadicalZephyr/demonstrate.sh">on Github</a>. Pull requests welcome :)</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Geoff Shannon</span></span>

      




<time class='entry-date' datetime='2014-10-30T15:33:34-05:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:33 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/bash/'>bash</a>, <a class='category' href='/blog/categories/live-coding/'>live-coding</a>, <a class='category' href='/blog/categories/python/'>python</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://www.zephyrizing.net/blog/2014/10/30/demonstrating-demonstrate-dot-sh/" data-via="RadicalZephyr" data-counturl="http://www.zephyrizing.net/blog/2014/10/30/demonstrating-demonstrate-dot-sh/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/10/27/playing-with-org-mode/" title="Previous Post: Playing with Org-mode">&laquo; Playing with Org-mode</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/11/19/getting-started-with-llvm-on-os-x/" title="Next Post: Getting Started with LLVM on OS&nbsp;X">Getting Started with LLVM on OS&nbsp;X &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/04/16/on-editors-and-their-benefits/">On Editors and Their Benefits</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/14/learning-tdd/">Learning TDD</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/04/shaving-the-clojurescript-yaks/">Shaving the Clojurescript Yak(s)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/02/two-days-in/">Two Days In</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/30/sane-static-site-setups/">Sane Static Site Setups</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/RadicalZephyr">@RadicalZephyr</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'RadicalZephyr',
            count: 7,
            skip_forks: true,
            to_skip: ["radicalzephyr.github.io","home","prelude",".emacs.d","emacs","synapse-admin","old-site"],
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Geoff Shannon -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'zephyrizing';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.zephyrizing.net/blog/2014/10/30/demonstrating-demonstrate-dot-sh/';
        var disqus_url = 'http://www.zephyrizing.net/blog/2014/10/30/demonstrating-demonstrate-dot-sh/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>
<noscript>Please enable JavaScript to view
  the <a href="http://disqus.com/?ref_noscript">comments powered by
    Disqus.</a></noscript>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
