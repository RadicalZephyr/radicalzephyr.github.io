<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Zephyrizing]]></title>
  <link href="http://www.zephyrizing.net/atom.xml" rel="self"/>
  <link href="http://www.zephyrizing.net/"/>
  <updated>2015-05-21T11:08:50-05:00</updated>
  <id>http://www.zephyrizing.net/</id>
  <author>
    <name><![CDATA[Geoff Shannon]]></name>
    <email><![CDATA[geoffpshannon@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Domain Driven Design and Clojure]]></title>
    <link href="http://www.zephyrizing.net/blog/2015/05/21/domain-driven-design-and-clojure/"/>
    <updated>2015-05-21T10:41:29-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2015/05/21/domain-driven-design-and-clojure</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been reading an excellent book recently: <a href="https://en.wikipedia.org/wiki/Domain-driven_design"><em>Domain Driven Design</em></a>
by Eric Evans. I just finished the section on Entities and Value
Objects, and it&rsquo;s caused me to start thinking about Clojure and the
&ldquo;sane state management model&rdquo; that language advocates/enforces.</p>

<!--more-->


<p>The Clojure state model bears some strong similarities to what Evans
talks about when discussing the needs and uses for Entities and Value
Objects. Entities he says should be used to represent things where
their continuity of identity is more important than their current
value. Value Objects are the opposite, the important part of a Value
Object is the data it holds or represents, to the extent that Value
Objects with the same value are totally interchangeable.</p>

<p>He goes on to talk about the benefits that immutability and safe
arbitrary sharing that this interchangeability can give you.
Specifically, the relative looseness of the constraints on Value
Objects gives a system designer more freedom to implement Value
Objects in a way that has extra benefits, such as increased
performance or memory efficiency.</p>

<p>I&rsquo;m just going to pull some quotes directly from
<a href="http://clojure.org/state">the page on clojure.org about state</a>.</p>

<p>First, some words about identity:</p>

<blockquote><p>While some programs are merely large functions, e.g. compilers or
theorem provers, many others are not - they are more like working
models, and as such need to support what I&rsquo;ll refer to in this
discussion as identity. By identity I mean a stable logical entity
associated with a series of different values over time. Models need
identity for the same reasons humans need identity - to represent
the world. How could it work if identities like &lsquo;today&rsquo; or &lsquo;America&rsquo;
had to represent a single constant value for all time?</p></blockquote>

<p>And now, values:</p>

<blockquote><p>So, for this discussion, an identity is an entity that has a state,
which is its value at a point in time. And a value is something that
doesn&rsquo;t change. 42 doesn&rsquo;t change. June 29th 2008 doesn&rsquo;t
change. Points don&rsquo;t move, dates don&rsquo;t change, no matter what some
bad class libraries may cause you to believe. Even aggregates are
values. The set of my favorite foods doesn&rsquo;t change, i.e. if I
prefer different foods in the future, that will be a different set.</p></blockquote>

<p>Clearly Rich Hickey was thinking along the same lines as Eric
Evans. In fact, I would say that Clojure is a programming language
that is built on a firm conceptual model of the domain of
programming. I think this is one of the things that makes Clojure such
a joy to program in. Especially once you&rsquo;re familiar with the
language, the standard idioms and the general layout of it&rsquo;s
libraries. Everything is highly conceptually consistent. There have
been very few points where I learned something new about Clojure and
thought &ldquo;Well that doesn&rsquo;t really make sense&hellip;&rdquo; More often when I
learn something new it fits smoothly into the mental model that I
already have about how the language works.</p>

<p>I guess this Domain Driven Design stuff might really work&hellip;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Learning Rack]]></title>
    <link href="http://www.zephyrizing.net/blog/2015/05/19/learning-rack/"/>
    <updated>2015-05-19T23:18:14-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2015/05/19/learning-rack</id>
    <content type="html"><![CDATA[<p>For the past two weeks or so I&rsquo;ve been grappling with trying to build
a simple HTTP front-end for my ruby Tic-Tac-Toe program. There have
been some non-technical hurdles with scheduling and other projects
demanding my time, but I&rsquo;ve also spent a fair amount of time simply
struggling to put the pieces together with how the Rack libraries
work.</p>

<!--more-->


<p>Rack as a concept is exceptionally simple. Inspired by <a href="https://www.python.org/dev/peps/pep-0333/">PEP 333</a>
which specified the Python Web Server Gateway Interface or WSGI, Rack
has come to be the de-facto way that Ruby applications interface with
web servers. Beyond the <a href="http://rack.github.io/">basic concept</a>, Rack provides a set of
helper libraries. These include many useful middleware and convenience
classes for things like static file serving, sessions, and request
parsing and response generation. However, the documentation for the
classes included in Rack is pretty dismal.</p>

<p>For the most part it is all auto-generated documentation, but many of
the classes have only a vague description of what they do, with no
indication of how they&rsquo;re meant to be used. Conspicuously absent or
good examples of configuration of middleware, especially in the
special DSL that is made available in <a href="https://github.com/rack/rack/wiki/%28tutorial%29-rackup-howto">rackup</a> files.</p>

<p>Given the number of different web frameworks that are built on top of
Rack, it&rsquo;s sort of shocking to me that the documentation is in this
sort of state. Though I guess it&rsquo;s consistent with my general
experience of Ruby libraries as a whole.</p>

<p>I&rsquo;ve really worked in Ruby since I started my apprenticeship at 8th
Light, but from what I&rsquo;ve seen, many Ruby libraries have awkward gaps
in their documentation. For instance, Guard is an amazing and vital
piece of a smooth Ruby TDD toolchain. But it&rsquo;s documentation is
incredibly cryptic about how to properly setup a Guardfile. There are
more paragraphs about how to debug problems in your Guardfile than
what the format is!</p>

<p>Now documentation is hard. But over the last several years, it&rsquo;s been
increasingly clear to me that <a href="https://jacobian.org/writing/great-documentation/">good documentation</a> is one of
the most valuable assets that a software product can have, especially
an open-source one.</p>

<p>So then why is writing good documentation still so elusively
difficult? I know I struggle with it immensely. The majority of
<a href="https://github.com/RadicalZephyr?tab=repositories">my projects</a> have little to no documentation, with the notable
exception of <a href="https://github.com/RadicalZephyr/hermit">Hermit</a>.</p>

<p>I think there are a few reasons. First off, writing in general is
hard. It takes effort, and the will to keep re-writing and trying new
things to end up with a nicely polished piece of writing that reads
well, and communicates the author&rsquo;s intent clearly and succinctly.</p>

<p>Another reason is that it&rsquo;s much easier to polish a piece of writing
with good critical feedback from someone else. The complicating factor
for code documentation is that you need to find the right audience to
give you feedback. Often this means someone who is totally unfamiliar
with your exact software, but if it&rsquo;s code documentation it probably
also can&rsquo;t be your friend who only uses their computer for writing
Word documents and checking their social media.</p>

<p>But I think the final reason is that we don&rsquo;t do it enough. Again,
like all other writing, the best way to get better at it, is simply by
writing lots and lots of documentation. Also, critically reading the
documentation that you read, and reflecting on what is helpful, and
what isn&rsquo;t.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Chestnut - Annotated]]></title>
    <link href="http://www.zephyrizing.net/blog/2015/05/10/chestnut-annotated/"/>
    <updated>2015-05-10T13:34:16-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2015/05/10/chestnut-annotated</id>
    <content type="html"><![CDATA[<h4>A Note about version numbers</h4>

<p>At the time of this writing, there were several newer versions of many
of the dependencies used in Chestnut. In particular, the ClojureScript
core team had fairly recently released a new version with
<a href="https://github.com/clojure/clojurescript/wiki/Running-REPLs">vastly simplified REPL setup requirements</a> which
triggered changes to many of the related ClojureScript tooling
libraries (Piggieback, and Weasel especially). So PLEASE! Use the
latest version of Chestnut, or if you&rsquo;re setting up your own project
then look up the latest versions on <a href="http://clojars.org/">Clojars</a></p>

<h2>On to the Annotating!</h2>

<p>As I wrote <a href="http://www.zephyrizing.net/blog/2015/04/04/shaving-the-clojurescript-yaks/">recently</a>, I recently dove head first into doing web
development with Clojure and Clojurescript. Along the way I learned a
whole heck of a lot about how to actually set up a <a href="http://leiningen.org/">Leiningen</a>
project to support a nice workflow for such a project. However, most
of my new-found knowledge has already been put together into a very
nice package called <a href="https://github.com/plexus/chestnut">Chestnut</a>. However, at first glance
(and second and third glance really) Chestnut projects are complex and
intimidating.</p>

<p>This post is an annotated walkthrough of the configuration that a new
Chestnut comes with. The best way to follow along would be to start
off by running <code>lein new chestnut tour</code> in shell and then exploring
the files as I talk about them.</p>

<!--more-->


<p>Let&rsquo;s start by looking at the base directory.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Directories
</span><span class='line'>- resources
</span><span class='line'>- src
</span><span class='line'>- env
</span><span class='line'>
</span><span class='line'># Files
</span><span class='line'>- LICENSE
</span><span class='line'>- README.md
</span><span class='line'>- code_of_conduct.md
</span><span class='line'>- project.clj
</span><span class='line'>- Procfile
</span><span class='line'>- system.properties</span></code></pre></td></tr></table></div></figure>


<p>If you&rsquo;re familiar with Clojure development at all, this should look
very familiar to you. But there a few unusual things: the <code>Procfile</code>
and <code>system.properties</code> files, and the <code>env</code> folder.  The <code>Procfile</code>
is a file for letting <a href="https://www.heroku.com/">Heroku</a> know how to run your app, and the
contents of it are explained well in the
<a href="">Heroku guide to getting started with Clojure</a>.</p>

<p><a href="https://devcenter.heroku.com/articles/getting-started-with-clojure#define-a-procfile">https://devcenter.heroku.com/articles/getting-started-with-clojure#define-a-procfile</a></p>

<p>If we use the awesome [tree][tree] program to visualize some of these
directories we can see some interesting stuff. First, <code>src</code> looks
pretty standard for Clojure, with the addition of a second tree for
cljs files.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>src
</span><span class='line'>├── clj
</span><span class='line'>│   └── tour
</span><span class='line'>│       └── server.clj
</span><span class='line'>└── cljs
</span><span class='line'>    └── tour
</span><span class='line'>        └── core.cljs</span></code></pre></td></tr></table></div></figure>


<p>The same is true of the <code>test</code> folder. But what&rsquo;s really interesting
is what is in that new <code>env</code> folder.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>env
</span><span class='line'>├── dev
</span><span class='line'>│   ├── clj
</span><span class='line'>│   │   └── tour
</span><span class='line'>│   │       └── dev.clj
</span><span class='line'>│   └── cljs
</span><span class='line'>│       └── tour
</span><span class='line'>│           └── main.cljs
</span><span class='line'>├── prod
</span><span class='line'>│   ├── clj
</span><span class='line'>│   │   └── tour
</span><span class='line'>│   │       └── dev.clj
</span><span class='line'>│   └── cljs
</span><span class='line'>│       └── tour
</span><span class='line'>│           └── main.cljs
</span><span class='line'>└── test
</span><span class='line'>    ├── js
</span><span class='line'>    │   ├── polyfill.js
</span><span class='line'>    │   └── unit-test.js
</span><span class='line'>    └── unit-test.html</span></code></pre></td></tr></table></div></figure>


<p>What we see is that there are three top-level directories underneath
<code>env</code>, and below each of these we see what looks like normal Clojure
and Clojurescript source trees. Veeery, interesting.</p>

<p>Now let&rsquo;s jump and take a look at the <code>project.clj</code>. This is where the
heart of the action is. The first is boring normal project meta-data,
and we&rsquo;re going to skip it. The next section is interesting though.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'>  <span class="ss">:source-paths</span> <span class="p">[</span><span class="s">&quot;src/clj&quot;</span><span class="p">]</span>
</span><span class='line'>  <span class="ss">:repl-options</span> <span class="p">{</span><span class="ss">:timeout</span> <span class="mi">200000</span><span class="p">}</span> <span class="c1">;; Defaults to 30000 (30 seconds)</span>
</span><span class='line'>
</span><span class='line'>  <span class="ss">:test-paths</span> <span class="p">[</span><span class="s">&quot;spec/clj&quot;</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <code>:repl-options</code> is straightforward. It just increases the timeout
when launching a REPL. Presumably this is because Chestnut REPL&rsquo;s are
so filled with awesome that they take longer to load ;) The <code>*-paths</code>
options are simple too.  They just override the default place that
Leiningen looks for Clojure source and test files by default.</p>

<blockquote><p>N.B. The version of Chestnut I generated this with actually has a
bug, since it generated &ldquo;spec/clj&rdquo; as the test path, but no &ldquo;spec&rdquo;
folder.</p></blockquote>

<p>Next come the dependencies and plugins needed by this project.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'>  <span class="ss">:dependencies</span> <span class="p">[[</span><span class="nv">org.clojure/clojure</span> <span class="s">&quot;1.6.0&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">org.clojure/clojurescript</span> <span class="s">&quot;0.0-2511&quot;</span> <span class="ss">:scope</span> <span class="s">&quot;provided&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">ring</span> <span class="s">&quot;1.3.2&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">ring/ring-defaults</span> <span class="s">&quot;0.1.3&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">compojure</span> <span class="s">&quot;1.3.1&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">enlive</span> <span class="s">&quot;1.1.5&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">om</span> <span class="s">&quot;0.8.0-rc1&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">environ</span> <span class="s">&quot;1.0.0&quot;</span><span class="p">]]</span>
</span><span class='line'>
</span><span class='line'>  <span class="ss">:plugins</span> <span class="p">[[</span><span class="nv">lein-cljsbuild</span> <span class="s">&quot;1.0.3&quot;</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">lein-environ</span> <span class="s">&quot;1.0.0&quot;</span><span class="p">]]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Clojure and Clojurescript are obviously necessary, and when you&rsquo;re
using Clojurescript with Leiningen, you probably want the
[lein-cljsbuild][cljsbuild] plugin for compiling your
Clojurescript. <a href="https://github.com/ring-clojure/ring#ring">Ring</a> is the standard Clojure web application&rsquo;s
library. <a href="https://github.com/ring-clojure/ring-defaults#ring-defaults">Ring-defaults</a> is a library for providing standard
configurations of <a href="https://github.com/ring-clojure/ring/wiki/Concepts#middleware">Ring middleware</a>.  <a href="https://github.com/weavejester/compojure#compojure">Compojure</a>
is a routing library built on top of Ring.</p>

<p><sub>
I&rsquo;m not quite sure why the Clojurescript dependency is marked as
<code>provided</code>&hellip;
</sub></p>

<p><a href="https://github.com/cgrand/enlive#enlive-">Enlive</a> is a &ldquo;a selector-based (à la CSS) templating library
for Clojure.&rdquo; Very cool stuff, and wildly useful for many other HTML
processing/producing/consuming tasks than just templating.
Unfortunately very under-documented. <a href="https://github.com/omcljs/om#om">Om</a> is the only
Clojurescript specific dependency in the list, but it&rsquo;s a pretty cool
one. It&rsquo;s a Clojurescript interface to Facebook&rsquo;s React.js library.</p>

<p>Finally we have the <a href="https://github.com/weavejester/environ#environ">Environ</a> library, and it&rsquo;s associated
<code>lein-environ</code> plugin. As their README says:</p>

<blockquote><p>Environ is a Clojure library for managing environment settings from
a number of different sources.</p></blockquote>

<p>However, it is also the basis for a lot of the really neat things that
Chestnut does.</p>

<p>Next up, we have some more basic configuration stuff.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'>  <span class="ss">:min-lein-version</span> <span class="s">&quot;2.5.0&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="ss">:uberjar-name</span> <span class="s">&quot;tour.jar&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>These two settings are specifically to help with deployment to Heroku
which looks for the <code>:min-lein-version</code> key to determine what version
of lein to build your app with. Chestnut also changes the uberjar name
so that the Procfile can specify a specific filename. Normally, the
uberjar name is derived from the project name and the current
version. However, this makes it a moving target.  Every time you bump
your version number you would have to update the Procfile to stay in
sync. This way, the uberjar always has one name and the Procfile never
needs to change.</p>

<p>Finally, we have the basic cljs build configuration:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'>  <span class="ss">:cljsbuild</span> <span class="p">{</span><span class="ss">:builds</span> <span class="p">{</span><span class="ss">:app</span> <span class="p">{</span><span class="ss">:source-paths</span> <span class="p">[</span><span class="s">&quot;src/cljs&quot;</span><span class="p">]</span>
</span><span class='line'>                             <span class="ss">:compiler</span> <span class="p">{</span><span class="ss">:output-to</span>     <span class="s">&quot;resources/public/js/app.js&quot;</span>
</span><span class='line'>                                        <span class="ss">:output-dir</span>    <span class="s">&quot;resources/public/js/out&quot;</span>
</span><span class='line'>                                        <span class="ss">:source-map</span>    <span class="s">&quot;resources/public/js/out.js.map&quot;</span>
</span><span class='line'>                                        <span class="ss">:preamble</span>      <span class="p">[</span><span class="s">&quot;react/react.min.js&quot;</span><span class="p">]</span>
</span><span class='line'>                                        <span class="ss">:optimizations</span> <span class="ss">:none</span>
</span><span class='line'>                                        <span class="ss">:pretty-print</span>  <span class="nv">true</span><span class="p">}}}}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is remarkably similar to the configuration from the
<a href="https://github.com/emezeske/lein-cljsbuild/blob/1.0.5/example-projects/none/project.clj">lein-cljsbuild none example project</a>, and a standard
setup to enable source-maps.</p>

<h3>Profiles</h3>

<p>So far, most of what we&rsquo;ve seen is fairly standard
clojure/clojurescript configuration stuff. But one of the things that
makes Chestnut awesome is that it makes really good use of the
Leiningen profiles feature. In particular, it uses profiles to
concisely specify different clojurescript compilation settings and add
dependencies that are only needed for development. If this is the
first time you&rsquo;ve heard about Leiningen profiles, you should probably
go <a href="https://github.com/technomancy/leiningen/blob/master/doc/PROFILES.md#profiles">read about it</a>. The basic summary is this though:</p>

<blockquote><p>You can place any arbitrary key/value pairs supported by defproject
into a given profile and they will be merged into the project map
when that profile is activated.</p></blockquote>

<p>Let&rsquo;s start with the extra <code>:dev</code> setups. It starts off nice and easy
just adding more clojure source and test paths and some extra
development-only dependencies.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'>  <span class="ss">:profiles</span> <span class="p">{</span><span class="ss">:dev</span> <span class="p">{</span><span class="ss">:source-paths</span> <span class="p">[</span><span class="s">&quot;env/dev/clj&quot;</span><span class="p">]</span>
</span><span class='line'>                   <span class="ss">:test-paths</span> <span class="p">[</span><span class="s">&quot;test/clj&quot;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>                   <span class="ss">:dependencies</span> <span class="p">[[</span><span class="nv">figwheel</span> <span class="s">&quot;0.2.1-SNAPSHOT&quot;</span><span class="p">]</span>
</span><span class='line'>                                  <span class="p">[</span><span class="nv">figwheel-sidecar</span> <span class="s">&quot;0.2.1-SNAPSHOT&quot;</span><span class="p">]</span>
</span><span class='line'>                                  <span class="p">[</span><span class="nv">com.cemerick/piggieback</span> <span class="s">&quot;0.1.3&quot;</span><span class="p">]</span>
</span><span class='line'>                                  <span class="p">[</span><span class="nv">weasel</span> <span class="s">&quot;0.4.2&quot;</span><span class="p">]]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Notice that there is a similar entry under the <code>:uberjar</code> profile for
<code>:source-paths</code> but that the <code>:test-paths</code> are omitted (since the
uberjar is typically for distributing production code).</p>

<p><a href="https://github.com/bhauman/lein-figwheel#lein-figwheel">Figwheel</a> is a very cool project that &ldquo;pushes ClojureScript code
changes to the client.&rdquo; This enables a very smooth Clojurescript
workflow. It&rsquo;s so seamless in fact that in some ways it makes
Clojurescript programming <em>more enjoyable</em> than working with Clojure!</p>

<p><a href="https://github.com/cemerick/piggieback#piggieback-">Piggieback</a> provides support for running a ClojureScript REPL
on top of an nREPL session. Chas goes into the reasons of why this is
a desirable thing in the README, so go check it out if you&rsquo;re interested.</p>

<p>Finally, <a href="https://github.com/tomjakubowski/weasel#weasel">Weasel</a> allows your ClojureScript REPL to use
WebSockets to communicate with your chosen execution environment.
Again, their README has good information about why this might be a
thing you want.</p>

<p>The next two sections are pretty much just setup for Piggieback and
Figwheel:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'>               <span class="ss">:repl-options</span> <span class="p">{</span><span class="ss">:init-ns</span> <span class="nv">tour.server</span>
</span><span class='line'>                              <span class="ss">:nrepl-middleware</span> <span class="p">[</span><span class="nv">cemerick.piggieback/wrap-cljs-repl</span><span class="p">]}</span>
</span><span class='line'>
</span><span class='line'>               <span class="ss">:plugins</span> <span class="p">[[</span><span class="nv">lein-figwheel</span> <span class="s">&quot;0.2.1-SNAPSHOT&quot;</span><span class="p">]]</span>
</span><span class='line'>
</span><span class='line'>               <span class="ss">:figwheel</span> <span class="p">{</span><span class="ss">:http-server-root</span> <span class="s">&quot;public&quot;</span>
</span><span class='line'>                          <span class="ss">:server-port</span> <span class="mi">3449</span>
</span><span class='line'>                          <span class="ss">:css-dirs</span> <span class="p">[</span><span class="s">&quot;resources/public/css&quot;</span><span class="p">]}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then both the dev and uberjar profiles contain an <code>:env</code> map
specifying either that <code>:is-dev</code> is <code>true</code> or <code>false</code>. These
configurations hook into the Environ library and allow you to specify
the value of environment variables directly in the project.clj
file. This particular usage should be pretty straightforward; it&rsquo;s
basically a simple switch that allows us to tell in our code whether
or not this is a dev build/run or not.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'>               <span class="ss">:env</span> <span class="p">{</span><span class="ss">:is-dev</span> <span class="nv">true</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The only thing remaining in the dev profile now is the cljsbuild test
configuration. Though once again, notice that there is the small
addition of the <code>env/dev/cljs</code> path as a source for our previosly
configured <code>app</code> ClojureScript build.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'>               <span class="ss">:cljsbuild</span> <span class="p">{</span><span class="ss">:test-commands</span> <span class="p">{</span> <span class="s">&quot;test&quot;</span> <span class="p">[</span><span class="s">&quot;phantomjs&quot;</span> <span class="s">&quot;env/test/js/unit-test.js&quot;</span> <span class="s">&quot;env/test/unit-test.html&quot;</span><span class="p">]</span> <span class="p">}</span>
</span><span class='line'>                           <span class="ss">:builds</span> <span class="p">{</span><span class="ss">:app</span> <span class="p">{</span><span class="ss">:source-paths</span> <span class="p">[</span><span class="s">&quot;env/dev/cljs&quot;</span><span class="p">]}</span>
</span><span class='line'>                                    <span class="ss">:test</span> <span class="p">{</span><span class="ss">:source-paths</span> <span class="p">[</span><span class="s">&quot;src/cljs&quot;</span> <span class="s">&quot;test/cljs&quot;</span><span class="p">]</span>
</span><span class='line'>                                           <span class="ss">:compiler</span> <span class="p">{</span><span class="ss">:output-to</span>     <span class="s">&quot;resources/public/js/app_test.js&quot;</span>
</span><span class='line'>                                                      <span class="ss">:output-dir</span>    <span class="s">&quot;resources/public/js/test&quot;</span>
</span><span class='line'>                                                      <span class="ss">:source-map</span>    <span class="s">&quot;resources/public/js/test.js.map&quot;</span>
</span><span class='line'>                                                      <span class="ss">:preamble</span>      <span class="p">[</span><span class="s">&quot;react/react.min.js&quot;</span><span class="p">]</span>
</span><span class='line'>                                                      <span class="ss">:optimizations</span> <span class="ss">:whitespace</span>
</span><span class='line'>                                                      <span class="ss">:pretty-print</span>  <span class="nv">false</span><span class="p">}}}}}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Compared to the <code>:dev</code> profile, the <code>:uberjar</code> is quite simple:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'>         <span class="ss">:uberjar</span> <span class="p">{</span><span class="ss">:source-paths</span> <span class="p">[</span><span class="s">&quot;env/prod/clj&quot;</span><span class="p">]</span>
</span><span class='line'>                   <span class="ss">:hooks</span> <span class="p">[</span><span class="nv">leiningen.cljsbuild</span><span class="p">]</span>
</span><span class='line'>                   <span class="ss">:env</span> <span class="p">{</span><span class="ss">:production</span> <span class="nv">true</span><span class="p">}</span>
</span><span class='line'>                   <span class="ss">:omit-source</span> <span class="nv">true</span>
</span><span class='line'>                   <span class="ss">:aot</span> <span class="ss">:all</span>
</span><span class='line'>                   <span class="ss">:cljsbuild</span> <span class="p">{</span><span class="ss">:builds</span> <span class="p">{</span><span class="ss">:app</span>
</span><span class='line'>                                        <span class="p">{</span><span class="ss">:source-paths</span> <span class="p">[</span><span class="s">&quot;env/prod/cljs&quot;</span><span class="p">]</span>
</span><span class='line'>                                         <span class="ss">:compiler</span>
</span><span class='line'>                                         <span class="p">{</span><span class="ss">:optimizations</span> <span class="ss">:advanced</span>
</span><span class='line'>                                          <span class="ss">:pretty-print</span> <span class="nv">false</span><span class="p">}}}}}})</span>
</span></code></pre></td></tr></table></div></figure>


<p>The main difference is the addition of three pieces of configuration
that make this a true production build. The <code>:hooks</code> option causes
leiningen to run the <code>leiningen.cljsbuild/activate</code> function to let it
<a href="https://github.com/technomancy/leiningen/blob/master/doc/PLUGINS.md#hooks">hook into the defualt Leiningen tasks</a>.</p>

<p>Then <code>:omit-source</code> simply directs leiningen not to include the
clojure source files in the resulting uberjar, and <code>:aot :all</code> causes
the Clojure compiler to <a href="http://clojure.org/compilation">Ahead-of-time compile</a> all your clojure
code. The idea behind both these configs is to make your final uberjar
as lean and performant as possible, at the expense of some (probably
not needed) flexibility.</p>

<p>So that&rsquo;s it for Chestnut&rsquo;s <code>project.clj</code>. It looks intimidating at
first, but in the end it is quite approachable when you break it down
into it&rsquo;s component pieces.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Testing and the Structures of Learning Environments]]></title>
    <link href="http://www.zephyrizing.net/blog/2015/05/06/testing-and-the-structures-of-learning-environments/"/>
    <updated>2015-05-06T09:22:53-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2015/05/06/testing-and-the-structures-of-learning-environments</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been fortunate this last year in getting to spend time in several
radically different learning environments in a relatively short span
of time. These experiences have gotten me thinking about the relative
pros and cons, also about how I respond to the amount of structure the
environment offers.</p>

<!--more-->


<h3>The University</h3>

<p>Okay, let&rsquo;s start off with the most structured of all, the
university. &ldquo;formal education&rdquo; is certainly the most structured of all
the environments I&rsquo;ve been in recently. Apart from the lower-levels of
the same system, I&rsquo;m having a hard time of thinking of a more
structured type of learning. I&rsquo;ve written before quite extensively
about specific problems I have with the established school system, so
I&rsquo;ll just leave it at that. However, university courses are highly
structured. They are actually required to by the nature of the
system. Even Fairhaven College, a place which essentially strives for
less structure only achieves that, less structure.</p>

<p>An excellent symbol (and indeed, a representation) of that structure
is the course syllabus. Contained in that one document are supposed to
be all the expectations and requirements for &ldquo;doing well&rdquo; in the
class. I noticed something towards the end of my college career. These
documents started getting more formulaic. In fact, they seem to be
approaching the type of jargon-ified meanings as &ldquo;lawyer-ese.&rdquo; For
instance, my university had a policy that no assignments could be
given to students during &ldquo;dead week&rdquo; - the week before finals -
<em>unless</em> the teacher had mentioned that it was possible in the
syllabus.</p>

<p>Because of this, many professors simply had a clause in their &ldquo;stock&rdquo;
syllabus that mentioned that there might be assignments due during
dead week, just to reserve the option. First of all, I have a problem
with a document that requires so much boilerplate that there can be a
&ldquo;stock&rdquo; version of it. Second, the system of rules and requirements
that caused teachers to always include a certain statement in the
syllabus regardless of their plans for the class, made the whole
system into a game, pitting students against each other, and often
also into opposition with their professors.</p>

<p>I resisted playing this game for a long time (most of my life
actually). After taking two years off from school when my mother fell
ill, I came back with a conviction that this game was a necessary evil
that I needed to play, and play well. So I did. I got excellent grades
in my last several quarters at Western in all of my classes, despite
taking heavy credit loads of all difficult classes. But I didn&rsquo;t learn
as much.</p>

<p>My normal method of doing school appears somewhat lackadaisical
compared to the studious diligence of many &ldquo;good&rdquo; students. But part
of the reason for this is that I tend to follow my interests, and go
well beyond what is being asked of me by the teacher. A classic
example was a paper I needed to write for a history class in high
school. I needed to do research on some historical topic, but on the
way I stumbled upon some fascinating information about dolphins. I
spent most of my evening reading and learning much about dolphins, and
not researching for the paper. My high school pre-Calculus teacher
summarized my attitude towards school by bestowing an award on me at
the end of the year: &ldquo;Highest Learning to Grade ratio.&rdquo;</p>

<h3>The Recurse Center</h3>

<p>At the opposite end of the structure spectrum we have the Recurse
Center. It is often difficult to explain to people exactly why I chose
to go to the Recurse Center last fall. I usually fall back on
paraphrasing the tag line from their website:</p>

<blockquote><p>The Recurse Center is a free, self-directed, educational retreat for
people who want to get better at programming, whether they&rsquo;ve been
coding for three decades or three months.</p></blockquote>

<p>The key part of that statement for me is the &ldquo;self-directed&rdquo;
portion. The vast majority of what I learned during my CS degree came
from entirely self-directed exploration so it seemed like a natural
fit.</p>

<p>But they are serious when they say self-directed. The structure of
their environment is at a very bare minimum. About as bare as you can
get I think and still build a sense of community around a shared
experience. The structure and workings of the Recurse Center have been
written about by many of the students as well as the people who run
it. But for comparison&rsquo;s sake, I want to mention the few structural
elements that make up the Recurse Center.</p>

<p>First, they spend a half day at the beginning of the batch with a
welcome meet-and-greet breakfast. This is followed by talks by the
founders and facilitators to &ldquo;set the tone&rdquo; and people&rsquo;s expectations
for the batch. These mostly consist of talking about what they want
the Recurse Center to be, and the lightweight social rules that they
follow to help achieve that. After that, there are a few logistical
matters like keycards and access to the chat client, but then you are
thrown head-first into being at the Recurse Center: i.e. sitting in
room with about 60 other people, and learning about programming.</p>

<p>There are a few more things, like the Monday night talks by the
current resident or other interesting person, or the daily checkins
with other RC&#8217;ers. But other than that pretty much everything is up to
the participants of the batch. If people want to organize a daily
reading group you can do that. Or you can find someone interested in
pairing on a project with you. Or you can go to a short
presentation/talk someone has decided to give.</p>

<p>If this sounds vague and confusing it&rsquo;s because of the lack of
structure. It sounds like a platitude, but spending three months at
the Recurse Center really can be whatever you want it to be. A lot of
people take some time to adjust to this looseness, and there are
facilitators whose job is precisely that, to facilitate people in
their self-directed learning. Whether that means brain-storming about
projects to work on, or giving code review, or pairing on a
particularly difficult problem their whole job is to be available to
help RC&#8217;ers make the most of their time their. As a bonus they get to
spend their days doing their own self-directed learning.</p>

<p>The structure - or lack thereof - of the Recurse Center was inspired
at least in part by the unschooling movement as talked about by Grace
Llewellyn. I&rsquo;ve <a href="http://www.zephyrizing.net/blog/2014/05/06/s-and-e-part-three:-the-teenage-liberation-handbook/">written before</a> about how I fell in love
with the idea of unschooling. But my time at the Recurse Center was
the first time I actually got to fully and intentionally practice
it. Three months was not long enough.</p>

<p>Despite the brevity of the experience, it did me a world of good. My
last year at college playing their game to the hilt sort of killed
something in me. I stopped enjoying programming, and I stopped seeking
out learning on my own as much. Killed is a rather strong word but
that&rsquo;s how it felt. Maybe it would be more appropriate to say that it
simply wore me out. I had no energy, no <a href="http://www.zephyrizing.net/blog/2014/05/01/s-and-e-part-two:-gumption/">gumption</a> left to put into
anything. At the Recurse Center though, I built massive amounts of
gumption. So much so that I haven&rsquo;t seriously found myself lacking it
since. If for only that reason, the Recurse Center was the perfect
antidote to my time at university. And I rediscovered my joy in
programming.</p>

<h3>8th Light</h3>

<p>Now I&rsquo;m an apprentice at 8th Light. I sought out 8th Light primarily
because of their apprenticeship program, and the remarkable similarity
it bore to <a href="http://www.zephyrizing.net/blog/2014/06/07/s-and-e-part-seven:-onward/">my own idealized conception</a> of how to teach
someone how to program.</p>

<p>It is sort of a fascinating and fortuitous coincidence that the amount
of structure here is in between that found at the Recurse Center and
in universities. Whether it is actually &ldquo;just right&rdquo; remains to be
seen. So far the balance between guidance and self-directed
exploration has been fairly ideal. Having weekly check-in&rsquo;s with my
mentors puts a firm bound on how long I might drift without
purpose. Though I haven&rsquo;t found that to be a problem here, it was
definitely something I needed to be mindful of during my time at the
Recurse Center. I also find it helpful to have a direction set for me,
with concrete and achievable tasks to mark the route.</p>

<p>One interesting thought I&rsquo;ve had recently is an analogy between the
structure of these various learning environments and software testing.
I think that the Recurse Center is much like the undisciplined hacking
on a pet project. There may be tests, but they are impromptu and
somewhat haphazard. More projected onto the structure of the code
after completion than designed into it from the beginning. You can get
a lot done in this fashion, but it&rsquo;s also easy to get lost in the
weeds (though this is largely the point as far as many RC&#8217;ers are
concerned).</p>

<p>A university degree program is then more like poorly executed TDD. The
tests are written first - mostly. But they are written with a mind to
<em>how</em> the task will be accomplished and are tightly, almost
inextricably, coupled to the implementation. They define a rigid but
currently stable and verified system. But woe betide the person who
tries to change anything, because much of the code and all of the
tests will break.</p>

<p>8th Light then is TDD done well. The tests are written first and they
specify the behavior of the system, not the implementation. The
desired goal is achieved through (rapid) iteration and feedback.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Iteration Two: Refactoring and Minimax]]></title>
    <link href="http://www.zephyrizing.net/blog/2015/04/29/iteration-two-refactoring-and-minimax/"/>
    <updated>2015-04-29T09:50:55-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2015/04/29/iteration-two-refactoring-and-minimax</id>
    <content type="html"><![CDATA[<p>I&rsquo;m just about finished with my second iteration as an apprentice at
8th Light. Where my first iteration centered a lot around reading and
learning how TDD and Ruby work, this week I focused more on coding. I
spent most of my time just implementing the several stories of my
iteration: some minor (but important!) output tweaks, implementing a
play again loop, and adding two AI&rsquo;s to the game. I also did quite a
bit of refactoring and general code cleanup.</p>

<!--more-->


<p>I spent several hours figuring out the mechanics of doing an extract
class refactoring, and then realizing that I had extracted the class
the wrong way and so the &ldquo;container&rdquo; class was the one being held by
it&rsquo;s containee.  It turned out to be very awkward to try to invert
this relationship so I backed out the change and extracted the other
class so that the container/containee relationship was correct. I
consulted Martin Fowler&rsquo;s <em>Refactoring</em> book heavily here. It&rsquo;s really
neat how the mechanical steps he describes are actually an incredibly
useful guide.</p>

<p>I noticed an interesting thing while I was refactoring. I was changing
the code so much that I started losing track of what was actually
going on. At some point, my brain just sort of gave up on trying to
hold the whole application in my head. This was an interesting
experience because usually I can hold more complexity in my head than
this Tic Tac Toe game currently has. I think this is part of the trend
I noticed that in general, when doing TDD I feel less need to hold a
lot of the complexity in my mind at once.</p>

<p>The slightly scary flip-side of that was that because I was doing
extract class refactorings and moving methods and such, I also ended
up moving tests around and modifying the tests a lot to keep them
working. Mucking around with them seriously decreased my confidence in
them, and thus in my confidence in the system as a whole. Clearly I
need to think more about how the test modification process goes along
with refactoring.</p>

<p>Another piece of functionality that took me surprisingly long to
implement was the play again functionality. The interesting part of
that process was that I wrote tests, and then wrote an implementation
that I thought was correct. The tests failed in a confusing manner and
so I assumed that the tests were incorrect. After poking around for
quite a while, firing up the debugger (<a href="http://pryrepl.org/">Pry</a> and <a href="https://github.com/deivid-rodriguez/pry-byebug">byebug</a> are
awesome!) I eventually discovered that the test was correct, and it
was even failing exactly correctly. I had simply forgotten to take
into account that once a game has been completed, one can&rsquo;t just start
playing it again from the beginning. So I had to write a reset method.</p>

<p>On Tuesday I spent most of the day test driving my way to a perfect
AI. This was an interesting experience since it was the first time
I&rsquo;ve had a really clear idea of where I wanted to go with the code
while doing TDD. For the most part I&rsquo;ve been trying to stick to the
letter of the acronym and let the tests lead me to the code
organization they want.</p>

<p>But the <a href="https://en.wikipedia.org/wiki/Minimax">minimax</a> algorithm is well known and an established way to do
the game state-space search that is required for a perfect Tic-Tac-Toe
AI. So how does one test drive that? Apparently I am most definitely
not alone in asking this question as both my mentors were expecting
it, and my fellow apprentice working on Tic-Tac-Toe (Ari) also spent
time last week puzzling over it.</p>

<p>I worried about it briefly at the start of the day, but then I quickly
adopted the outlook that I&rsquo;ve found to be most successful with TDD;
don&rsquo;t think too much about the future. Instead, I focused on the
fundamentals. What&rsquo;s the simplest case an AI needs to deal with. I
turned to the Wikipedia page on Tic-Tac-Toe and it&rsquo;s bullet list of
how to be a perfect player. The most important rule is that an AI
should win immediately when it can. If that&rsquo;s not possible it should
block an opponent from winning.</p>

<p>These two situations are very easy to detect. It only takes a slight
modification to the code pattern used for detecting if someone has
already won, and no future board states need to be taken into
account. This approach got me moving forwards, which is often the
hardest part.</p>

<p>Once I had some momentum I kept going by then considering simple fork
creation, the next most important move type. After pondering how this
might work, I hit upon a simple solution. A fork is just a move that
results in a board where you have two possible ways to win! This was
attractive to me for several reasons. First, it was a (relatively
small) step towards searching the state-space of the game. By looking
one move ahead I felt I was moving in the direction of minimax. And it
was simple enough that it felt doable in a single TDD step.</p>

<p>This worked shockingly well. Not only did my very simple fork
look-ahead detect most forks that it could create, somehow it actually
was able to produce the correct fork-blocking behavior in the first
four cases that I came up with.</p>

<p>I was suspicious though, and so I crafted some devious fork tests that
were designed to expose the flaw in my simple algorithm. Eventually I
did that and it became clear that something more powerful was
needed. At this point, thinking about the simplest way to do things
produced no clear results. I was already doing a minimal look-ahead
and the analysis was insufficient. It seemed that the next step would
have to be going to a minimax algorithm. Here&rsquo;s basically what my
simple algorithm was at this point:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</span><span class='line'>    <span class="n">get_wins</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">indexed_attack_sets</span><span class="p">)</span><span class="o">.</span><span class="n">count</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">find_forks</span><span class="p">(</span><span class="n">board</span><span class="p">)</span>
</span><span class='line'>    <span class="n">scores</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">empty_spaces</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">index</span><span class="o">|</span>
</span><span class='line'>      <span class="n">node</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">speculative_move</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
</span><span class='line'>      <span class="o">[</span><span class="n">index</span><span class="p">,</span> <span class="n">score</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="o">]</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">scores</span><span class="o">.</span><span class="n">max_by</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="p">,</span> <span class="n">s</span><span class="o">|</span> <span class="n">s</span> <span class="p">}</span><span class="o">.</span><span class="n">first</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="n">board</span><span class="p">)</span>
</span><span class='line'>    <span class="n">attacks</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">indexed_attack_sets</span>
</span><span class='line'>    <span class="n">win</span>   <span class="o">=</span> <span class="n">get_wins</span><span class="p">(</span><span class="n">attacks</span><span class="p">)</span><span class="o">.</span><span class="n">first</span>
</span><span class='line'>    <span class="n">block</span> <span class="o">=</span> <span class="n">get_blocks</span><span class="p">(</span><span class="n">attacks</span><span class="p">)</span><span class="o">.</span><span class="n">first</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">win</span> <span class="ow">or</span> <span class="n">block</span> <span class="ow">or</span> <span class="n">find_forks</span><span class="p">(</span><span class="n">board</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>I tried to do get to minimax in several ways. First off, I actually
ended up using the <a href="https://en.wikipedia.org/wiki/Negamax">negamax</a> algorithm because it&rsquo;s simpler to code
because it takes advantage of the zero-sum property of
Tic-Tac-Toe. Initially, I tried to replace my whole algorithm with
negamax right off the bat. This did not work out well. Things got
complicated and many tests were failing. So I backed out and treated
negamax as a small refactoring. Specifically I treated it as a
refactoring of the <code>find_forks</code> function. This worked quite well, and
suddenly all of the forks tests were passing. I then incrementally
expanded it until negamax was the only thing being used for deciding
which moves to make.</p>

<h2>Clojure TDD</h2>

<p>I also spent some time pairing with both Emmanuel and Kristen on some
Clojure katas, the bowling game and coin changer respectively. This
was really fascinating for a couple of reasons. I consider myself
reasonably competent with Clojure. But I am almost totally unfamiliar
with trying to do TDD in Clojure.</p>

<p>The pairing that I did with both my fellow apprentices was in the
Ping-Pong style (mostly), where one of us wrote a test and the other
tried to make it pass. What was fascinating to me was that the
incremental development approach that this enforces pushed me towards
writing very non-idiomatic, highly stateful Clojure code.</p>

<p>After attempting the coin changer with Kristen, I was starting to
doubt my Clojure-chops and so I tried to TDD it out on my own. I ended
up arriving at a more satisfactory solution that used a stream model
of discrete state transformations. So a cleaner stateful solution.</p>

<p>I ended up talking about this with Emmanuel after our pairing session,
and he showed me a blog post and a screencast about doing the bowling
kata in Clojure. Both people ended up with similar solutions, which
basically involved the insight that a frame in bowling is only two
rolls when no strikes or spares are involved. In retrospect, this
seems sort of obvious, since a frame can&rsquo;t be scored until all of it&rsquo;s
rolls have occurred. But combining this with actually duplicating some
of the numbers from the stream of pin-counts is what leads to an
elegant Clojure solution.</p>

<p>Besides this key realization, I think I was also missing a critical
tool in my Clojure toolbox: custom lazy sequences. Both solutions
Emmanuel had found on the web ended up constructing a function that
produced a custom lazy sequence. This was necessary because of the
need to repeat certain elements from the stream.</p>

<p>But what I&rsquo;m realizing now is that I think it&rsquo;s difficult to test
drive recursive solutions. But maybe I&rsquo;m just doing it wrong. Often
when I write recursive functions I don&rsquo;t bother to write just the base
case first. I typically will just jump straight in and write both
parts at once. But now that I think about it, testing the base case of
a recursive algorithm would be really natural in TDD. You just have to
start at the simplest case.</p>

<p>Another thought that occurred to me about why TDD in Clojure is
harder. In Ruby or Java I have read about different design patterns
and there are established refactorings for manipulating class-based OO
code. So when I&rsquo;m doing TDD in those languages I know the patterns of
it. Not patterns in the design patterns sense, but the flows of code
configurations you might say. Specifically, I&rsquo;m familiar with the
intermediate stages and I can imagine them.</p>

<p>But the way I write functional code is somewhat different. Most of the
time, I experiment with a small piece of code in the REPL, until I&rsquo;ve
produced the result I want, then I wrap it up into a function. This
process can proceed top-down where I conceive of the top-level
function first and then create the necessary pieces to make that
happen; or it can go bottom-up where I think about little pieces of
functionality in the domain I&rsquo;m considering, and then start composing
those pieces to make more complex things.</p>

<p>In both of these styles of development, there isn&rsquo;t always working
code at all times though. In particular, the interesting sort of
high level behaviors often don&rsquo;t work until the whole thing comes
together at the end.</p>

<p>So I think I need at least two things before I can do TDD in Clojure
more effectively. I need to learn the patterns of Clojure code better,
and get more familiar with how it can be molded and changed from
simple and ill-factored to cleaner and well-factored. And second, I
need to adjust to the paradigm shift of thinking about code tests
first in a functional context.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[On Editors and Their Benefits]]></title>
    <link href="http://www.zephyrizing.net/blog/2015/04/16/on-editors-and-their-benefits/"/>
    <updated>2015-04-16T00:58:26-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2015/04/16/on-editors-and-their-benefits</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been using Emacs for about as long as I&rsquo;ve been programming. So
that makes it nearly eight years now. I like to think that I&rsquo;ve gotten
reasonably competent with it, and somewhat more importantly, I have
customized my emacs to fit my mind like a glove.</p>

<p>I also touch type, but I use the Dvorak keyboard layout. These two
things combine to make it so that I can write programs at a speed
close to how fast I can conceive them. This is important, not because
it means I can code faster than other people, but because it means I
can get the thoughts out of my head fast enough that they don&rsquo;t slip
away.</p>

<p>This was brought into sharp relief for me a few days ago when I did
some pairing with my mentor Zach using his computer. You see, Zach
uses the standard QWERTY layout, and he also uses Vim.</p>

<!--more-->


<p>It seems that the accepted wisdom about pair programming is that it
works best when two people share the same computer, and swap control
of the keyboard back and forth. Some sources even recommend having two
sets of keyboard/mouse to lower the barrier to switching even further.
In the spirit of being open to trying new things I acquiesced to
Zach&rsquo;s implicit expectation that I would use his computer with QWERTY
and Vim.</p>

<p>It&rsquo;s been a long time since I&rsquo;ve seriously attempted to use
QWERTY. When I first taught myself to touch-type in Dvorak I tried to
maintain some proficiency with QWERTY since it is ubiquitous. But I
soon discovered that it was hard to keep both locations for keys in
muscle memory at the same time. And that&rsquo;s really where efficient
touch typing requires that knowledge to reside. When you have to
consult your memory for the location of key, you&rsquo;ve already lost a lot
of your speed.</p>

<p>Luckily for me, I could keep on typing QWERTY as I always had; that
is, by looking at the keyboard constantly and lifting my fingers high
enough off the keyboard that I could see the letters.</p>

<p>Muscle memory is important to my usage of Emacs too, and it builds
heavily on my Dvorak muscle memory. Emacs has a (deserved) reputation
for having a somewhat absurd number of key bindings. Trying to
remember them directly would be a monumental task. Instead, the most
commonly used key bindings migrate quickly from the realm of conscious
thought to muscle memory. I didn&rsquo;t even notice this happening until I
started trying to teach a friend of mine to use Emacs. Some of the
commands that I use, I know only by their location on the keyboard.
Given that I type in Dvorak and the keys are labeled in QWERTY this
means that the actual character I&rsquo;m pressing is pretty opaque.</p>

<hr />

<p>When is proficiency or familiarity with a tool more important than
other considerations?</p>

<p>First let&rsquo;s look a bit at what those other considerations might
be. The first one that comes to mind is that using the same tools as
the team you&rsquo;re working on can be pretty important. Or maybe there is
another tool that has much more powerful or focused facilities for the
task/language/domain. Or to reverse that, possibly your tool of choice
simply lacks something that a lot of other tools support. Finally, I
think a really important consideration is whether you are holding on
to your tool(s) of choice out of habit and the comfort they provide.
Let&rsquo;s look at some examples of each of these.</p>

<p>A few years ago I was hired as an intern at Sage Bionetworks, a small
bio-tech start-up in Seattle. They happen to be an all Java shop,
and the standard editing environment there is Eclipse. At the time, I
was much less familiar with Emacs, I had never even opened Eclipse and
I didn&rsquo;t know any Java.</p>

<p>I spent my first few days getting through the administrative details
of starting a new job. But pretty quickly I got to the point where I
needed to setup my new computer for doing development on the Sage web
platform. They had a wiki, with several different pages on the
bootstrapping process for the various different aspects of the
process. A significant portion of it was focused on getting your
Eclipse installation setup correctly, with all the right plugins and
such.</p>

<p>Being totally in love with Emacs at that time, I determined that I was
going to figure out how to setup Emacs as a kick-ass Java editing
environment. My mentor was grudgingly amenable to this plan of
action. I struggled with that problem for a few days, until my mentor
came back and strongly suggested that I use Eclipse. His rationale was
essentially that this was the tool that the whole team had
standardized on. Since no one else really used the command line tools
to build or test the product I would be largely on my own in getting
things to work.</p>

<p>I gave in, and learned to use Eclipse. I made it bearable by
installing a plugin that simulated Emacs key bindings. I learned there
were some nice things about Eclipse - the automatic versioning, the
Java refactoring tools. But I also found it to generally be a vastly
inferior tool. While Eclipse has an extensive ecosystem of plugins and
add-ons, installing them is a nightmare of clicking through GUI menus
and needing to restart possibly several times. It is also highly
customizable, with good support for key maps and visual
modifications. However, neither your personally installed add-ins nor
your configurations can be saved in a reasonable way, and there is (as
far as I know) no way to automate the setup process. So every time you
move to a new development machine, you need to go through the same
process. Or, more likely, go through a very <em>similar</em> process, and
end up with a subtly different dev environment.</p>

<p>But I did get the benefit of being able to get the advice of the other
devs on the team when something wasn&rsquo;t working with my build. This
turned out to be critical since the process of getting a working (and
repeatable) build of their software was a highly non-trivial one.</p>

<p>When I was working with Zach last week and ended up using Vim with
QWERTY, he said something to me that reminded of my mentor&rsquo;s words at
Sage. He said that a lot of people at 8th Light use Vim, and that if I
want to do a lot of pairing with people it will probably be to my
benefit to learn how to use Vim at least a little bit.</p>

<p>This makes more sense in an environment where pairing is actively
practiced, but the general idea behind it is basically the prospect of
being able to sit down at someone else&rsquo;s computer and use it for
development at a reasonable level. I&rsquo;m not sure that I agree with this
philosophy though.</p>

<p>One place where being able to use any given computer is key is as a
sysadmin. My college&rsquo;s CS department started participating in a
national competition during my second year, the Collegiate Cyber
Defense Competition or CCDC. The competition itself basically places
several teams of students in the role of a new system administration
team for some large corporation. The system is potentially in disarray
after a poorly documented transition from a previous team and the
students task is to secure the systems while maintaining a given level
of availability for one or more different services (such as email,
databases, servers, etc.).</p>

<p>I was very interested in participating in the club that was preparing
for the competition because they were learning both defensive and
offensive computer security skills. But I found it difficult to work
in the context of system&rsquo;s administration because I couldn&rsquo;t have my
environment setup just how I wanted it. Particularly during the
competition itself, there would be no time to try and install Emacs
(which is both large in footprint and memory usage and requires a ton
of dependencies), or switch the terminal at the computer I was using
to Dvorak. Thus I found that two choices I had made years before had
effectively precluded my participation in the CCDC.</p>

<p>Interestingly, my choice to learn the Dvorak layout is actually what
pushed me into learning Emacs. I had just gotten to the point of
actual touch-typing with Dvorak when I decided it was time to switch
from using PythonWin to a &ldquo;real programmer&rsquo;s editor.&rdquo; Based on what I
had been reading on the internet, that choice seemed clear: it had to
be Vim.</p>

<p>But I was stalled almost immediately. Vim uses the letters &lsquo;h&rsquo;, &lsquo;j&rsquo;,
&lsquo;k&rsquo;, and &lsquo;l&rsquo; for text navigation, so you don&rsquo;t need to move your hand
to the arrow keys.  This is convenient for usage under QWERTY, all
four keys are on the home row and are easily accessible - without
stretching - to your right hand. But on Dvorak they are all over the
keyboard, and there is no mnemonic for telling which key does
what.</p>

<p>I struggled with Vim for a few days, trying to learn how I could remap
the movement keys to the same location under Dvorak as they are in
QWERTY. But I was unable to find a solution and the prospect of the
cascading key remappings was enough to drive me to look at Emacs.  By
contrast with Vim, most of the keys in Emacs have some kind of
mnemonic association. Moving forward a character is <code>ctrl f</code> and back
is <code>ctrl b</code>. Down one line is <code>ctrl n</code> and up is <code>ctrl p</code> for next and
previous. Not only that, but part of the very philosophy of Emacs is
easy customization, up to and including remapping every key on your
keyboard to do something different. More importantly, that philosophy
of customization is embedded in the Emacs community.</p>

<p>The seemingly simple choice of learning to type in Dvorak turned out
to be a key decision in my life as a programmer. It cut off certain
possibilities like learning to use Vim, and presents certain
challenges for pair programming, particularly in the quick
back-and-forth style where two people use the same computer. I have
also found that using Emacs appears to be the less common of the two,
and this is also limiting and isolating to some degree.</p>

<p>Here&rsquo;s the thing though, I <em>like</em> using Emacs; and typing in Dvorak
feels good to my fingers. So I&rsquo;m a little bit stuck. I want to be
agreeable and able to collaborate and pair program with others
easily. But I also really like the tools that I use. They fit me. So
what do I do?</p>

<p>One possibility is to use more tools to overcome some of my
difficulties with pairing. Specifically, using a lightweight version
control system (like git) and a free code hosting site (like, say,
Github) you can arrange a style of pairing where two people work on
the same code, but each using their own device and tools and
setup. Pairing is the same during the actual coding process with
whatever Driver/Navigator or other dynamic you want to use. The
difference comes when you swap. Instead of simply sliding the keyboard
across to your partner, you commit, and push to your central
repository. Your partner then pulls down the latest code and starts
working on their machine. This is certainly a bit more work than just
handing off the keyboard, so it may not be suitable to very rapid
hand-offs. But I haven&rsquo;t found it to be overly onerous so far.</p>

<p>Another solution would be for me to maintain some skill at QWERTY and
Vim specifically for facilitating pairing. While more work for me
personally, it has the benefit of not requiring a new pairing
workflow. But this idea worries me a bit.</p>

<p>The human brain is <a href="https://en.wikipedia.org/wiki/Neuroplasticity">amazingly flexible</a>. My favorite
personal example of this is related to video games and how we control
them. Every first-person style game has at least one key setting in
the control options: whether the way you look upwards is by moving the
mouse or tilting the control stick upwards (usually known as &ldquo;default&rdquo;
or &ldquo;normal&rdquo;), or whether this mapping is &ldquo;inverted&rdquo; i.e. tilting up
looks down and tilting down looks up. My best friend and I have played
a lot of Halo together in our day. For a long time one of our favorite
pastimes was playing through Halo 2 levels on Legendary difficulty,
often with skulls active. Here&rsquo;s the thing though: he plays default,
and I play inverted.</p>

<p>Under most circumstances this doesn&rsquo;t matter. If we&rsquo;re playing
cooperatively it doesn&rsquo;t matter because we both have our own
controller and thus our own setting. It only becomes an issue when we
are handing a controller back and forth. But boy is it a problem
then. Invariably we both forget to switch back at the hand-off and
there ensues a brief period of confusion and panic when the game
character doesn&rsquo;t respond as our brain is wired to think it
should. What&rsquo;s really fascinating though is how quickly my brain
starts to retrain itself.</p>

<p>I&rsquo;ve been playing games on inverted for years, possibly decades at
this point. As such you would think that my brain is very much
hardwired to expect that when I tilt the stick up, the view will move
down. And this is true. But sometimes, for one reason or another I&rsquo;ll
end up playing for a short time on the default setting. What happens
is remarkable and incredibly frustrating. If I focus on trying to
remember that up means up and down means down, I can usually get to a
level that is usable - at least when I pay full attention. But as soon
as something intense happens like a bad guy jumping out from behind a
bush, my reflexes revert to inverted settings. Even more interestingly
though, when I inevitably switch my control scheme back to inverted I
am unable to fully shed the tendency towards trying to play with
default look controls.</p>

<p>Back to keyboard layouts and editors. In short, I&rsquo;m concerned that an
attempt to learn how to use QWERTY again and to memorize Vim keyboard
shortcuts will seriously undermine my ability to use Emacs effectively.</p>

<p>On the other hand, maybe this is just what I need. I&rsquo;m also currently
trying to learn how to do Test Driven Development (TDD) and I&rsquo;m
finding that a lot of the thought-habits I have around programming are
actually detrimental to doing TDD. Maybe breaking out of my
comfortable Emacs environment and using a new keyboard layout will
help me get into a totally new frame of mind and let me TDD more
effectively.</p>

<p>I think there is another reason to embrace the idea of learning a new
set of tools at this time though. A large part of the reason that I
wanted to do this apprenticeship with 8th Light was to learn. Learning
from others always requires some humility; at the very least you have
to be able to admit that there are things that you do not know. This
is difficult for me. But possibly, intentionally cultivating
<a href="https://en.wikipedia.org/wiki/Shoshin">Shoshin</a> or &ldquo;beginner&rsquo;s mind&rdquo; regarding my most basic level
of programming - how I edit my source code - will help me do it at all
levels.</p>

<blockquote><p>In the beginner&rsquo;s mind there are many possibilities, in the expert&rsquo;s
mind there are few. - Shunryu Suzuki</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Learning TDD]]></title>
    <link href="http://www.zephyrizing.net/blog/2015/04/14/learning-tdd/"/>
    <updated>2015-04-14T14:37:34-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2015/04/14/learning-tdd</id>
    <content type="html"><![CDATA[<p>This is my first week at 8th Light and I&rsquo;ve been working on writing an
object-oriented Tic Tac Toe program.  This would be no big deal for
typically, even though I&rsquo;m doing it in a language I&rsquo;m unfamiliar with.</p>

<p>Except! I&rsquo;m trying to very rigorously drive the development with
tests.</p>

<!--more-->


<p>This is a fairly new experience for me. I mean, sure, when I first
read about TDD a while ago, I got really interested and excited about
it. I played with it a little bit, and tried to do some small stuff in
it. But I quickly got overwhelmed with the difficulty of &ldquo;How do you
even get started?&rdquo;</p>

<p>Monday, I made very minimal progress. I felt stuck not really sure
where to begin, and what to do. I ended up by basically writing tests
for a simple Board data class where I could make marks, and then see
that the marks were actually set. This felt highly unimpressive as the
output of my first day.</p>

<p>Tuesday and Wednesday I made some more progress. The thing that helped
for most was certainly reaching out for guidance from my mentors. I
had a good conversation with Brian. Despite it&rsquo;s somewhat brief and
vague nature it actually was very helpful. And I did some pairing with
Zach that really helped on the Ruby comfortability front. Just seeing
how someone who knows how to use Ruby approaches things made me feel
more confident and grounded in the language.</p>

<p>I also did quite a bit of Googling and reading about Ruby concepts and
paradigms. There wasn&rsquo;t anything really specific that I was looking
for, I was just trying to absorb some of the context of the community
by seeing what is talked about and the sorts of code snippets that are
out there. To an outside observer this probably seemed mostly like
procrastinating. To be fair, I sort of judged it that way myself.</p>

<p>The thing is though, in all my professional software development work,
I&rsquo;ve noticed that whenever I end up procrastinating and sort of
&ldquo;working around&rdquo; a difficulty I&rsquo;m having a peculiar thing happens. If
I try to force myself to face it head on and work at it, nothing
really good comes out of it. Often I just end up feeling stuck and
then I&rsquo;m really unproductive, just staring at the keyboard.</p>

<p>But I find if I just relax into the procrastination, and try to stay
working on related things, that eventually everything sort of gels in
my mind, and then when I come back to the &ldquo;hard&rdquo; thing I&rsquo;m usually
able to make some useful headway.</p>

<p>Today was that day for TDD in Ruby; I felt like everything sort of
came together. I came into work determined not to &ldquo;procrastinate&rdquo; like
I did for much of yesterday. I started off by starting to test drive a
Console or display class. But I quickly realized that this would just
be a thin wrapper on top of the IO class that already exists in Ruby!
So I went back to implementing my game class, and used mocks to
replace an instance of an IO class.</p>

<p>From there I got into a very nice flow. Even the tricky nature of
testing the main game loop didn&rsquo;t seem overly difficult in my mind. By
the end of the day I had gotten to the point where I couldn&rsquo;t really
think of any more functionality that would be needed to play an actual
game at the command line.</p>

<p>When I wired up the class to finally actually test it from end to end
and try to play a game, there were some unexpected problems. But the
basic logical structure of the game was pretty much entirely
correct. And I knew it would be, because of the tests that I wrote.</p>

<p>Very cool.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Shaving the Clojurescript Yak(s)]]></title>
    <link href="http://www.zephyrizing.net/blog/2015/04/04/shaving-the-clojurescript-yaks/"/>
    <updated>2015-04-04T13:08:18-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2015/04/04/shaving-the-clojurescript-yaks</id>
    <content type="html"><![CDATA[<p>About a week ago I got fed up with a <a href="http://mangafox.me/">terrible website</a> that
had comics on it I wanted to read.  So I decided to write a little web
app to make the reading experience more pleasant. Since I&rsquo;m an avid
<a href="http://clojure.org/">Clojurian</a>, I&rsquo;ve been interested in checking out
<a href="http://clojure.org/clojurescript">Clojurescript</a> for doing web development, and in particular
exploring the wonderful new world of React.js wrappers available in
Clojurescript. This is the story of how I learned to setup a
Clojurescript project.</p>

<!--more-->


<p>Since I&rsquo;ve been interested in Clojurescript for a while, and even
toyed with it a few times, I came into this project with at least a
fair idea of what was out there. I knew about Om, and new basically
how the Clojurescript compilation process worked. I also am vaguely
comfortable with setting up a basic Clojure web app using <a href="https://github.com/ring-clojure/ring">Ring</a>
and <a href="https://github.com/weavejester/compojure">Compojure</a>.</p>

<p>I was also aware that there had been significant advances in the
Clojurescript workflow in the past few years. Most importantly I knew
about an apparently awesome Leiningen project template for
Clojure/Clojurescript web apps called <a href="https://github.com/plexus/chestnut">Chestnut</a>. However,
the times that I had tried to get up and running with Chestnut
previously I was totally overwhelmed by the amount of unfamiliar
code/configuration that it produced. Quite frankly, it seemed
excessive, and quickly led to me giving up on whatever
project-of-the-moment had inspired me.</p>

<p>So! This time, I determined to not start with Chestnut, and instead
build up slowly from the basic Lein app template that I was already
familiar with. And so commenced roughly five full days of mostly
yak-shaving. I&rsquo;m not going to try and recount it all here; just the
highlights will be more than enough.</p>

<h2>How I Shaved My Yak</h2>

<p>I started with off with a very vanilla <code>lein new app
comic-reader</code>. From there, I copied the basic dependencies for a
jetty/ring/compojure web app from my <a href="https://github.com/RadicalZephyr/url-shortener">url-shortener</a>
project. I made some basic routes to make sure everything was working
correctly.</p>

<p>Next came adding Clojurescript into the project. This meant setuping
the <code>project.clj</code> to point to where the <code>*.cljs</code> files would live, and
then configuring the Clojurescript compiler.  Basic Clojurescript
compilation with <a href="https://github.com/emezeske/lein-cljsbuild">lein-cljsbuild</a> is not totally trivial to
configure, especially since there are now many different options to
the Clojurescript compiler and many resources on the web have
older/outdated configuration examples, and typically no explanation
whatsoever of why they have it configured they way they do. But
overall it wasn&rsquo;t too tough. It helped significantly that I could
again copy setups I had previously found to work.</p>

<p>At this point, I was sick of shaving Yaks for a moment so I went and
learned how to use <a href="https://github.com/cgrand/enlive">Enlive</a> for doing
<a href="https://github.com/swannodette/enlive-tutorial#an-introduction-to-enlive">web scraping</a>! Then, feeling refreshed, I went back to the
Yak.</p>

<p>I knew that I wanted the awesome <a href="https://github.com/bhauman/lein-figwheel">Figwheel</a> plugin for an awesome
(mostly) reload-less Clojurescript experience. Again, Figwheel comes
with a Lein template that I didn&rsquo;t use directly. Instead, I made an
extra copy and then used it as a reference for when my configuration
based on reading the documentation didn&rsquo;t work.</p>

<p>Next step was adding in Om, and making a basic page setup
there. Again, nothing incredibly hard. I mostly just followed the
tutorial and everything came together fairly quickly. Only maybe an
hour of struggling and cursing at my computer. Then, I decided that I
wanted to build a single-page application (SPA). So I started looking
at libraries like <a href="https://github.com/gf3/secretary">Secretary</a> and
<a href="https://github.com/r0man/sablono">Sablono</a>. Eventually, after reading several blog posts and
pages of documentation, I decided that I actually wanted to use
<a href="https://github.com/reagent-project/reagent">Reagent</a> instead of Om. Luckily I hadn&rsquo;t written much actual
code before I came to that decision.</p>

<p>After playing with Reagent for a while, I started having difficulty
with thinking about how to use it as the basis for a SPA, especially
with in-browser routing happening, and changing the history token so
that different app states would be bookmark-able. (N.B. I&rsquo;ve minimized
the explanation of this considerably. I spent a good chunk of time
wrestling with getting history integration working with Reagent before
realizing that Reagent&rsquo;s flow didn&rsquo;t make any damn sense to me.)</p>

<p>Back to the Google! After quite a lot of searching, sleeping, reading,
and searching again I found <a href="https://github.com/Day8/re-frame">re-frame</a> and it&rsquo;s epic
manifesto. After reading the whole damn thing (and all of the
&ldquo;read-this-first&rdquo; links), I decided that I would switch from vanilla
Reagent to re-frame. Again, thank goodness I hadn&rsquo;t really written any
significant code that was tightly coupled to reagent.</p>

<p>At this point, most everything worked pretty nicely, but there was
some significant ugliness about. I had my Figwheel configuration
inline in the same file as my main site code, and the clojurescript
configurations for production and dev were getting quite messy. After
incrementally gaining experience with most of the gaggle of
technologies that Chestnut uses, I felt prepared to tackle their
template again. So I started using it as a reference to enhance my own
configuration.</p>

<p>In particular, I started doing this when I wanted to deploy my app to
Heroku. It turns out that there are a whole raft of things that where
wrong with my configuration from Heroku&rsquo;s point of view. But after
about two hours of compare/edit/deploy cycles, I finally managed to
deploy my app to Heroku.</p>

<h2>Wrapping Up</h2>

<p>To sum it all up, while this was in some ways a very frustrating
exercise (especially at times during the process!), overall it was
also a really excellent learning experience. Too often I try and
approach too many new things all at once. This often leads quickly to
getting overwhelmed by all the new-ness, and then often giving
up. It&rsquo;s not a great pattern.</p>

<p>The longer that I practice programming, the more firmly I come to
believe that incremental, evolutions of projects and knowledge are
fundamentally more approachable, sustainable and, quite simply, more
fun!</p>

<p>Now I&rsquo;m feeling sort of pumped to do an &ldquo;Annotated Chestnut&rdquo;
walkthrough of what all the various configurations in Chestnut are
doing, and why they are useful and cool.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Two Days In]]></title>
    <link href="http://www.zephyrizing.net/blog/2015/04/02/two-days-in/"/>
    <updated>2015-04-02T23:34:05-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2015/04/02/two-days-in</id>
    <content type="html"><![CDATA[<p>It&rsquo;s only been two days and already a lot has happened, so it seemed
like time for an update.  Oh, BTW since I haven&rsquo;t mentioned it on my
blog before, I just moved to Chicago to work at <a href="http://8thlight.com/">8th Light</a>.</p>

<p>I arrived in Chicago on Tuesday afternoon/evening and had an
uneventful time finding my Airbnb in Edgewater on the north side of
Chicago.  I spent the evening searching house listings on Craigslist
and Zillow, and sending emails trying to schedule viewings for the
next few days.</p>

<!--more-->


<p>Wednesday, and today I spent looking at different units.  Wednesday
was mostly sort of disappointing, especially in the kitchen
department.  But there was one unit that had a good location, and very
nice amenities and layout; except for the kitchen was long and narrow
and sort of awkward looking.</p>

<p>Today started out looking like more of the same, until my 3rd and 4th
viewings.  The 3rd place I looked at was right across the street from
the best one from Wednesday, except it was two bedrooms, and a much
more reasonable kitchen for only slightly more money.  This seemed
like a clear win, and I very excitedly applied for it immediately
after I left.</p>

<p>I kept my final appointment of the day mostly out of politeness and
curiosity.  I really had no expectations for it, since the pictures in
the Craigslist ad had been sort of iffy.  But walking into the space I
was pretty blown away.</p>

<p>This is what I wrote about it after seeing it (admittedly, several
hours after seeing it). The TL;DR is that it&rsquo;s really quite awesome.</p>

<blockquote><p>Beautiful high ceilings with gorgeous detail work.  Several built-in
pieces of furniture including a floor to ceiling hutch in the dining
room/kitchen with a glass paneled portion and a lower area with
several full-width drawers.  There is also a built-in dresser in the
bedroom closet (which is large and walk-in, and has shelves REALLY
high).</p>

<p>The living room area is large and has great windows and light, with an
alcove-ish area perfect for a desk/work area.  It’s on the third floor
of a house where each level is a unit (called a “three-flat”).</p>

<p>The owner lives in the ground floor, another couple in the middle.
there is an attic above me with some possibility of storing some stuff
there.  Two entrances, front and back.  Front has an interior
staircase with a landing at the top, perfect for shoe/coat storage.</p>

<p>The bedroom is a very nice size (not too big, not too small) and it
has fewer windows so it’s not incredibly bright.  Yet still has a
reasonable amount of light so it’s not cave-like.</p>

<p>The biggest downside is the kitchen which has some awkwardness to the
layout (counter space is separated from the range by the fridge, and
the sink is on a different wall altogether.  But the sink is awesome
old pewter with a built-in dish drying area (slanted and grooved and
with a lip).  No dishwasher.  But plenty of room for a dining room
table, and there is room next to the range to put an extra
tall-cutting board or general end-table.  And the cabinets in the
kitchen have interior shelves (not on top of the cabinet!) that go to
the limit of what I can reach.</p>

<p>The bathroom is also quite small, with a claw foot tub/shower (which
probably needs a special/double shower curtain setup.  But it is
gorgeous with some really amazing Turkish tiles in the walls.</p></blockquote>

<p>So that&rsquo;s pretty exciting. I guess I&rsquo;ve found my new place to live.
Now what do I do until I start at 8th Light in two weeks?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sane Static Site Setups]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/12/30/sane-static-site-setups/"/>
    <updated>2014-12-30T14:44:37-06:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/12/30/sane-static-site-setups</id>
    <content type="html"><![CDATA[<p>During the last week of Hacker School I helped <a href="http://lmontopo.github.io/">Leta</a> sort out
some issues she had with her blog setup and restore everything to
sanity. It was a lot of fun and the setup is pretty straightforward so
I thought I&rsquo;d do a short write-up on what we did and why.</p>

<p>To be clear, this blog post is about solving the particular problem of
how to organize a statically generated site/blog. The particulars I&rsquo;m
going to discuss are for when you host the site on <a href="https://pages.github.com/">Github Pages</a>
but you need to generate the site locally because you&rsquo;re not using
vanilla <a href="http://jekyllrb.com/">Jekyll</a> or not using Jekyll at all.</p>

<!--more-->


<p>This isn&rsquo;t a tutorial about how to set up and use any particular
static site generator.  There are <a href="http://jekyllrb.com/">quite</a> <a href="http://docs.getpelican.com/en/3.5.0/">a</a> <a href="http://wintersmith.io/">few</a> <a href="https://github.com/greghendershott/frog">out</a>
<a href="https://github.com/taylorchu/baker">there</a>, and <a href="https://github.com/hugoduncan/cl-blog-generator">they</a> <a href="https://staticsitegenerators.net/">all</a> seem to be quite good. So pick one and
get your site setup.  You should be comfortable generating the content
of your site before worrying about what I&rsquo;m describing in this post.</p>

<p>One of the best and worst things about using a static site generator (SSG)
is that the source for the site is fundamentally a separate thing from
the actual files that compose the site itself. The good news is that
the generated files are, well, generated. Given the source for a
site you can always regenerate the presentation files.</p>

<p>So clearly we want to keep the source for our site under version
control. If you&rsquo;re using Github Pages then git is a natural
choice. But Github Pages also requires that the generated content of
your site be in a git repository. This leads to an un-intuitive setup.
Because the source and published files don&rsquo;t actually share a common
history, it seems like they need to be stored in separate git
repositories.  However, there is a fundamental relationship between
the files that dictates that organizationally they should always be
found together.</p>

<p>Luckily for us, git is flexible enough to allow us to achieve both
these seemingly conflicting goals. Since the usual workflow for a git
repository simply involves <code>git init</code> and then edit, <code>add</code>,
<code>commit</code> cycles, it&rsquo;s less well known that a git repository can
actually contain multiple independent &ldquo;head&rdquo; commits. Don&rsquo;t worry if
that doesn&rsquo;t totally make sense. The important thing is that we can
store two separate revision histories in the same git repository.</p>

<p>So, you have the source for a static site, and you&rsquo;ve maybe written
some dummy (or real!) content for it and generated the site at least
once. Now, we want to make sure that we have a setup that will help us
preserve all of your hard work on making an awesome website.</p>

<p>The first thing we need to do is to make sure we have git repositories
in both the source and output directories by running <code>git init</code> in
both of them separately. Since most SSG&rsquo;s by default use a structure
where the output folder is a subdirectory of the source folder, make
sure that you have an entry in your gitignore file so that the output
isn&rsquo;t committed into the source repository. At this point we should
have two git repo&rsquo;s, one that <em>only</em> has the site source content
(including any files need by your SSG) and one that <em>only</em> has the
generated version of your site.</p>

<p>Now for the magic trick of combining the repositories. Let&rsquo;s say we
have this folder structure:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- website/
</span><span class='line'> - .git/  # Git folder for source files
</span><span class='line'> - ...    # Lots of awesome content files
</span><span class='line'> - output/
</span><span class='line'>  - .git/ # Git folder for output files
</span><span class='line'>  - ...   # The actual generated content files</span></code></pre></td></tr></table></div></figure>


<p>At a shell prompt in the directory <code>website</code>, you can run:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git remote add output output/
</span><span class='line'>git push output master:source</span></code></pre></td></tr></table></div></figure>


<p>Basically, what we&rsquo;re doing is setting one repository as a remote of
the other, and then pushing the content to new branch there.  Now the
<code>output</code> repository contains both the source and output files in
separate git branches. Pushing all the branches of this to a hosting
site means you have a complete backup of your site.</p>

<p>Now, the process of updating your site is a little more complicated
than the general Github Pages workflow of edit, commit and push since
you need to generate the site yourself.</p>

<p>First, edit your site&rsquo;s content files.  Commit as necessary for your
peace of mind. Once you&rsquo;re satisfied with how the content looks
(you&rsquo;ve been previewing and generating the site right?), it&rsquo;s time to
commit the new content to the output branch, and then push it to your
hosting location.</p>

<p>That&rsquo;s basically it. It&rsquo;s a simple structure, but it&rsquo;s not totally
straightforward of how to get it set up, and it&rsquo;s also a bit more work
to maintain. Of course there are some interesting tools out there to
help with this process. <a href="http://octopress.org/">Octopress 2.0</a> tries to setup this
structure automatically for you, and provides a Rakefile for helping
to automate a lot of the normal tasks like site generation, previewing
and even deployment. <a href="http://docs.getpelican.com/en/3.5.0/">Pelican</a> offers to generate a Makefile and/or
a fabfile for doing the same sorts of things. Pelican also makes use
of the really neat <a href="https://github.com/davisp/ghp-import">GHP-Import</a> project to simplify the deploying
process.</p>

<p>Now go forth and blog!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Getting Started With LLVM and OCaml on OS&nbsp;X]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/12/14/getting-started-with-llvm-and-ocaml-on-os-x/"/>
    <updated>2014-12-14T00:15:16-06:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/12/14/getting-started-with-llvm-and-ocaml-on-os-x</id>
    <content type="html"><![CDATA[<p>I <a href="http://www.zephyrizing.net/blog/2014/11/19/getting-started-with-llvm-on-os-x/">wrote recently</a> about my (second) experience trying to
get started using LLVM on my Macbook. Shortly after that, I became
interested in combining my interest in LLVM with my interest OCaml. As
it turns out, this was a much easier task than I anticipated.</p>

<!--more-->


<p>Since my whole experiment with Vagrant was so successful for using
the C++ LLVM libraries, I immediately started doing the same thing for
my OCaml experiments. I created a <code>Vagrantfile</code> and started trying to
write a bash script to correctly provision an Ubuntu instance with the
requirements for the OCaml LLVM bindings.</p>

<p>I was stalled fairly quickly by the fact that the version of
[OPAM][opam] in the Ubuntu apt repositories is somewhat old.  Old
enough that it doesn&rsquo;t want to talk to the official OPAM servers for
package updates. So I futzed and fiddled a bit, and looked around for
alternate ways to install OCaml.</p>

<p>Eventually I got it figured out, and started trying to install the
OCaml bindings for LLVM. It didn&rsquo;t go well. The compilation of the
llvm opam package errored almost immediately. But while I was looking
through the error messages, I noticed something interesting. The
errors were related to nonexistent paths, and the paths that the
package was expecting all started with <code>/usr/local/Cellar</code>. For the
non brew-savvy, this is the default location that <a href="http://brew.sh/">Homebrew</a>
uses for all it&rsquo;s installations.</p>

<p>I knew that homebrew had an LLVM package because of my C++
meanderings. The error messages from OPAM on Ubuntu made me think that
the OCaml LLVM package was actually expecting to be run on a Mac, or
at least to work with a <code>brew install</code>ed LLVM.</p>

<p>So I gave it a shot. I cleaned out and re-installed my LLVM installation
with <code>brew rm llvm &amp;&amp; brew install llvm</code>. And then I simply ran <code>opam
install llvm</code>. As far as I remember (it was a couple weeks ago now ;),
everything went off without a hitch.</p>

<p><How was I able to validate the installation? Looked at Kaleidoscope
tutorial?></p>

<p>Finally, I wanted to be able to use the top-level to explore the LLVM
API, but that didn&rsquo;t appear to work right away. After some googling, I
found an answer on Stack Overflow (of course!) that said I had to
compile a custom version of utop with the LLVM libraries linked in.</p>

<p>I did that <describe it!! got to refigure out how I did that though>,
and then was able to get the wonderful utop completion stuff to work
with the totally unfamiliar LLVM bindings in OCaml.</p>

<p>Of course, then I needed to implement a <a href="https://github.com/RadicalZephyr/postfix-ocaml">language to actually compile
with LLVM</a>. And of course I still haven&rsquo;t actually done
anything with LLVM&hellip;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Getting Started With LLVM on OS&nbsp;X]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/11/19/getting-started-with-llvm-on-os-x/"/>
    <updated>2014-11-19T02:31:00-06:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/11/19/getting-started-with-llvm-on-os-x</id>
    <content type="html"><![CDATA[<p>A few weeks ago, I decided that one of the things I wanted to tackle
during my time at Hacker School was getting familiar with the LLVM
project. To that end, myself and several other Hacker Schoolers formed
an informal group to work through the official
<a href="http://llvm.org/releases/3.5.0/docs/tutorial/index.html">LLVM Kaleidoscope</a> tutorial. We made reasonable progress at
first, but as soon as we actually had to start dealing with the LLVM
tools, I started encountering problems.</p>

<p>Long story short, I ended up getting frustrated with the state of the
documentation surrounding LLVM and moving on to working on other less
upsetting projects. This last weekend though I ended up getting back
into it. I tried two different approaches.</p>

<!--more-->


<p>First, I decided to use a Vagrant supported VM to do my LLVM
setups. This was for two reasons: the fact that I do my development on
a Mac running OS X seems to be problematic when trying to install LLVM
in a global manner. This is because <em>some</em> of the LLVM tools (like
Clang) make up the default build environment on OS X. But the toolset is
insufficient if you actually want to build languages with LLVM, and
the presence of these libraries makes it&hellip; complicated to try and
install a more complete version. As Homebrew says when you try to
install LLVM via <code>brew install llvm</code>:</p>

<blockquote><p>Mac OS X already provides this software and installing another
version in parallel can cause all kinds of trouble.</p></blockquote>

<p>This is essentially the problem that I ran into a couple weeks ago
that caused me to give up on working with LLVM. This time however, I
had the insight that I wasn&rsquo;t solely limited to the physical machine
that I had an the one operating system I have the space to install on
it. By using <a href="https://www.vagrantup.com/">Vagrant</a> I could pretty trivially have a working Ubuntu
environment to use as my development platform for working with LLVM.</p>

<p>So that&rsquo;s what <a href="https://github.com/RadicalZephyr/postfix-llvm">I did</a>. The most interesting thing about
that repository is how I ended up provisioning my Vagrant
VM. To quote briefly from the <a href="https://en.wikipedia.org/wiki/Provisioning#Server_provisioning">Wikipedia Article</a>:</p>

<blockquote><p>&hellip; provisioning is a set of actions to prepare a server with
appropriate systems, data and software, and make it ready&hellip;</p></blockquote>

<p>The provisioning is done via shell scripts (that&rsquo;s not the interesting
part!), but instead of using <code>apt-get</code> to install all the software
that I required I mostly had to build them from scratch. But let&rsquo;s go
through the story end to end.</p>

<p>First off, I did try to install all the software via <code>apt-get</code>. There
was some confusion for me about which version of LLVM to install. From
the reading I&rsquo;d done on the [LLVM site] previously I thought that
since 3.5 has been officially released it would be considered the
stable version. However, when you install LLVM 3.5 via <code>apt</code> (with
<code>sudo apt-get install llvm-3.5</code>) the binaries don&rsquo;t seem to end up
getting installed on a path location. Or rather, they are on path, but
the names are all suffixed with <code>-3.5</code>.</p>

<p>This wasn&rsquo;t really what I wanted, so I also tried installing the 3.4
packages which it turns out are also the default set of packages
installed if you <code>apt-get install llvm</code>. This got the right names for
the tools onto my path, so step one check. So much easier to install
than with Homebrew! Well, to install and make sure that it was available
to me anyhow.</p>

<p>Then, since I was going to be doing <code>C++</code> development, I wanted to use
<a href="http://www.cmake.org/">CMake</a> as my build generator. If you&rsquo;ve never used CMake but you do
<code>C/C++</code> development I&rsquo;d highly recommend checking it out. It allows
you to specify your build process at a very high level.  As a bonus,
it can then generate the files to process that build with <a href="http://www.gnu.org/software/make/">several</a>
<a href="https://eclipse.org/">different</a> <a href="http://msdn.microsoft.com/en-us/vstudio/aa718325.aspx">kinds</a> of actual <a href="http://www.cmake.org/cmake/help/v3.0/manual/cmake-generators.7.html#id4">build systems</a>. It&rsquo;s way more
convenient than writing your own <code>Makefiles</code> and much more modern than
the whole <a href="https://www.gnu.org/software/autoconf/">autoconf</a> system (which I can&rsquo;t say much about, I&rsquo;ve never
learned it).</p>

<p>Anyhow, CMake has another handy benefit. It has a system for
<a href="http://www.cmake.org/Wiki/CMake:How_To_Find_Libraries">finding your dependencies</a>. Not like over the internet like
<a href="http://stackoverflow.com/questions/1541771/using-maven-for-c-c-projects">some build systems</a>, but still it&rsquo;s better than the basic
situation in C. Since CMake has actually been around for a while there
are many standard open source projects that provide the mechanics for
finding their libraries with CMake, including - handily enough - the
LLVM project.</p>

<p>One requirement of this system is that a &ldquo;module file&rdquo; be somewhere on
the CMake <code>modules-path</code>. For packages that support it, this should
happen when the package is installed and the locations of the critical
library and header files are actually known. Only problem is that the
CMake packages available in the Ubuntu repositories don&rsquo;t actually do
this. Turns out there was a <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=735592">bug report</a> early in 2014 describing the
issue. Then a long back and forth with the package maintainer (I
think) and many cases of &ldquo;Hey, it should be fixed now!&rdquo;, followed by a
response of &ldquo;No, it actually still doesn&rsquo;t work&hellip;&rdquo;</p>

<p>Then I found the LLVM <code>apt</code> <a href="http://llvm.org/apt/">nightly builds page</a> which
possibly answers why LLVM 3.4 is still the default package on Ubuntu,
since the LLVM project considers 3.4 to be &ldquo;stable&rdquo; and 3.5 is the
&ldquo;qualification branch.&rdquo; This <code>apt</code> repository seemed like a good bet
for finding an LLVM package that would properly install the necessary
CMake files, but alas, I had no such luck.</p>

<p>So instead I built LLVM from scratch. This is both easier and harder
than it sounds. Building LLVM from source is a very automated process,
and the parts that aren&rsquo;t automatic by default (like downloading,
checking file signatures and unpacking archives) are highly
automatable. The painful part is that VM&rsquo;s are always slower than a
natively installed OS. And my poor Macbook Air takes about 45 minutes
to do a full LLVM build under the native OS X. So basically once I got
everything setup I let the LLVM build run and stopped thinking about
it except to check on it every few hours.</p>

<p>I had quite a few build failures mostly related to what seem
like out of memory errors in GCC. Sometimes just restarting the
compilation helped, but I also restarted Vagrant VM and gave it a full
2GB of memory which helped a lot.</p>

<p>Once the install finished though CMake was able to find it
immediately. As pointed out earlier, the code is up on Github. I was
surprised to discover that there is no Vagrant VM that exists for
doing LLVM development, so that&rsquo;s going to go on my list of
projects. Ideally, that <strong>won&rsquo;t</strong> involve building LLVM from source in
the provisioning stage, because of the computational issues with
VM&rsquo;s. It might be an interesting excuse to learn how to build .deb
packages and make a PPA with a CMake that properly installs the
<code>FindLLVM.cmake</code> files&hellip;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Demonstrating demonstrate.sh]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/10/30/demonstrating-demonstrate-dot-sh/"/>
    <updated>2014-10-30T15:33:34-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/10/30/demonstrating-demonstrate-dot-sh</id>
    <content type="html"><![CDATA[<p><em>Edit 2014/12/30: I ended up rewriting demonstrate in <a href="https://github.com/RadicalZephyr/demonstrate.sh">several</a>
<a href="https://github.com/RadicalZephyr/demonstrate">different</a> languages, but the implementation that I like the
best is in <a href="https://github.com/RadicalZephyr/demonstrate.py">python</a>.</em></p>

<p>So, in the course of trying to prepare a presentation for this
Thursday (today!), I ended up creating a program called
<code>demonstrate.sh</code>. Basically, it lets you write a script, meant for an
interpreter (like bash, python, irb, coffee etc.) and then execute it
on demand.</p>

<!--more-->


<p>What do I mean by &ldquo;on demand&rdquo;? Well, basically it invokes the
interpreter and then reads the script file one line at a time. Then it
prints out a fake prompt based on the interpreter you specified, and
then it prints out the line of input it&rsquo;s processing.  When you hit
enter, the script sends that line of input to the interpreter and it
then prints its output to the screen. Oh, there&rsquo;s one little
caveat. When <code>demonstrate.sh</code> prints the line of output, it prints it
character by character with a small randomized delay. So it looks a
bit like you&rsquo;re actually typing out the command.</p>

<p>That&rsquo;s it! It&rsquo;s a simple script, but it allows you to create and then
run in a repeatable way a sequence of commands that you want to
<em>demonstrate</em>.</p>

<p>There are some improvements I&rsquo;d like to add. The ability to
recursively run demonstrate scripts inside of a demonstrate script
would be awesome. Currently because I&rsquo;m doing everything in the
simplest possible way, and the script is run in the background running
demonstrate inside of a demonstrate script doesn&rsquo;t work very well. I&rsquo;m
actually not entirely sure why it doesn&rsquo;t work, but the results are
demonstrably not what I want.</p>

<p>It would also be nice to make it so that you can insert arbitrary
commands to the interpreter, instead of only being able to run the
commands in the script. This is a particularly key feature since if
you just start another interpreter to run ad-hoc commands, you don&rsquo;t
have the same environment. This isn&rsquo;t important if your script doesn&rsquo;t
contain any side-effectful things, but I think that a lot of scripts
will tend to.</p>

<p>Finally, it would be really nice if the <code>demonstrate.sh</code> didn&rsquo;t need
to fake the prompts for the interpreters. In an ideal world, those
prompts would be transparently printed directly to the screen. I&rsquo;m
sure there&rsquo;s a way to do it, but it probably isn&rsquo;t possible/easy in
<code>bash</code>.</p>

<p>When I talked to <a href="https://github.com/doy">Jesse</a> about this, he asked the critical question.
Why not just record the output? My answer was essentially because I
wanted to eventually be able to run arbitrary commands in addition to
the script commands. This is sort of a weak answer, since it depends
on a feature I haven&rsquo;t yet implemented!</p>

<p>But there&rsquo;s another answer, that I discovered today when I was playing
with the classic Unix utility <code>script</code> that does exactly what Jesse
was talking about. The difference between recording an interaction
with <code>script</code> and writing a demonstrate script is this. Recording with
<code>script</code> is <em>still live coding</em>. This is especially true if you want
to use the timing feature to play it back at the same speed that it
happened at. In contrast, writing a <code>demonstrate</code> script is the same
as writing any regular script for the interpreter you&rsquo;re
targeting. You are totally offline, and you can write and edit the
script directly, and then run it with demonstrate to make sure it does
exactly what you want.</p>

<p>From what I&rsquo;ve been told about the early days of programming, the
difference between recording an interaction with <code>script</code> and writing
a <code>demonstrate</code> script is approximately the same as the difference
between writing programs on punch cards and writing programs in a text
editor on a computer. If you mess up while punching the card, you have
to start over from the beginning (barring awesome hacks
<a href="https://twitter.com/francesc/status/521602168022118400">like this</a>).</p>

<p>Yup, that&rsquo;s it. If you&rsquo;re interested, check it out
<a href="https://github.com/RadicalZephyr/demonstrate.sh">on Github</a>. Pull requests welcome :)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Playing With Org-mode]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/10/27/playing-with-org-mode/"/>
    <updated>2014-10-27T17:30:05-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/10/27/playing-with-org-mode</id>
    <content type="html"><![CDATA[<p>So, as a way to procrastinate on actually starting to write/practice
my lightning talk for Thursday, I decided that I absolutely wanted to
make a slide show using the <a href="https://github.com/relevance/org-html-slideshow">org-html-slideshow</a>, a pretty neat piece
of Clojurescript written by those smart guys at
<del>Relevance</del> Cognitect.</p>

<p>Basically, it lets you take an outline/document written in <a href="http://orgmode.org/">Org-mode</a>
(another really cool piece of software!) and put some small
annotations in it to delimit your &ldquo;slides&rdquo; and then you have a
document that can be viewed as either a slideshow, or a web page. It&rsquo;s
harder to explain in words than it is to observe, so here&rsquo;s the
<a href="http://www.zephyrizing.net/demos/example.html">example page</a> from their github repo, and the
<a href="http://www.zephyrizing.net/demos/example.org">org-mode document</a> that produced that page.</p>

<!--more-->


<p>Now that is pretty neat. However, the workflow needed to create one of
these is sort of a pain. From the documentation on the project page,
you&rsquo;re expected to create a one-off web site that has the contents of
this production folder available and then manually generate the
html document from the org-mode source. Ick.</p>

<p>My blog is made with <a href="http://jekyllrb.com/">Jekyll</a>, which is a static site generator. None
of my posts are actually written in html, instead I write them in
<a href="http://daringfireball.net/projects/markdown/syntax">Markdown</a>, and then Jekyll handling converts the markdown into
html. When it does this I can also cause it to be inserted into a page
template (i.e. layout). The upshot is, I can create a static site but
not have to duplicate all of the code to have a common set of header
info, navigation toolbar, nifty sidebar etc. Because only the unique
things are specified in each document, and the general boilerplate is
automatically included for me by Jekyll.</p>

<p>So if I&rsquo;m generating html from markdown automatically with Jekyll it
feels sort of wrong to be generating html manually with an interactive
emacs command and then committing this generated html into my git
repo. It would be so much nicer if I could just get Jekyll to invoke
emacs as the translator for turning <code>.org</code> files into <code>.html</code> files.</p>

<p>Well, pursuing that line of thought today I worked with
<a href="https://github.com/wallyqs">Waldemar Quevedo</a>. He showed me his incredible org-based workflow for
everything (he also gave an awesome lightning talk on it the first
week of Hacker School!). While it looks really cool, it&rsquo;s sort
heavy-weight for what I want to do. Frankly, I&rsquo;m really comfortable
writing markdown, so I&rsquo;ll probably continue to write most of my posts
in it. But org-html-slideshow is exciting enough that I&rsquo;d be willing
to write my presentations in Org-mode so I can utilize it.</p>

<p>I won&rsquo;t attempt to explain Wally&rsquo;s setup, but he&rsquo;s got some
<a href="https://github.com/wallyqs/org-ruby">pretty</a> <a href="https://github.com/eggcaker/jekyll-org">cool</a> <a href="https://github.com/punchagan/org-hyde">stuff</a> going on. In essence
though, he uses a ruby gem to parse the org syntax and transform it
into markdown. As of this writing though, it doesn&rsquo;t support the tags
feature that org-html-slideshow depends on for it&rsquo;s functionality.</p>

<p>While showing Wally the slideshow thing got him excited to try and
integrate it into his workflow, I started poking around and looking at
how to integrate it into my site. The solution I decided on was to
make <code>.org</code> files a generic member of the Jekyll source files. This
means that they&rsquo;ll still use a YAML frontmatter to mark that they need
to be transformed. This means that I need some way to transform a body
of org text into just the html content that it represents. Normally
when you generate an html page from org-mode, you get a complete html
page, <code>html</code>, <code>body</code> tags and all. What I needed was a way to invoke
the org->html transformation using the Elisp code in org-mode from
Jekyll.</p>

<p>With Wally&rsquo;s help, I was able to get this far towards that goal. This
is the elisp that will continuously read from the minibuffer until an
error occurs, and then transform that text using the org->html backend,
and finally print out the generated html.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="k">progn</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="k">progn</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">condition-case</span> <span class="no">nil</span>
</span><span class='line'>        <span class="p">(</span><span class="nv">while</span> <span class="no">t</span>
</span><span class='line'>          <span class="p">(</span><span class="nv">insert</span> <span class="p">(</span><span class="nv">read-string</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="s">&quot;\n&quot;</span><span class="p">))</span>
</span><span class='line'>      <span class="p">(</span><span class="nb">error</span> <span class="no">nil</span><span class="p">))</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">set-buffer</span>
</span><span class='line'>     <span class="p">(</span><span class="nv">org-export-to-buffer</span> <span class="ss">&#39;html</span> <span class="s">&quot;*Org HTML Export*&quot;</span>
</span><span class='line'>       <span class="no">nil</span> <span class="no">nil</span> <span class="no">nil</span> <span class="no">t</span> <span class="no">nil</span>
</span><span class='line'>       <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="no">t</span><span class="p">)))</span>
</span><span class='line'>       <span class="p">(</span><span class="nv">message</span> <span class="s">&quot;%s&quot;</span> <span class="p">(</span><span class="nv">buffer-string</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>And this is how you invoke the transformation of a file from org to
html. The <code>$emacs</code> is because I use <a href="http://emacsformacosx.com/">Emacs for Mac OSX</a> which means
that my emacs executable is buried inside of a mac <code>.app</code> file/folder
thing. Pipe a file into this script and if it&rsquo;s valid org syntax,
you&rsquo;ll get the corresponding html.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>tail -n+4 hello.org <span class="p">|</span> <span class="nv">$emacs</span> --batch --eval <span class="s2">&quot;(progn (require &#39;org) (progn (condition-case nil (while t (insert (read-string \&quot;\&quot;) \&quot;\\n\&quot;)) (error nil)) (set-buffer (org-export-to-buffer &#39;html \&quot;*Org HTML Export*\&quot; nil nil nil t nil (lambda () t))) (message \&quot;%s\&quot; (buffer-string))))&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now the only thing that&rsquo;s left is to write a Jekyll plugin to do this
invocation to produce the final output. <del>This is what I came up with
as a first attempt. Of course, it doesn&rsquo;t actually work for me,
because of the dumb location of my emacs executable&hellip; Oh well, that&rsquo;s
for tomorrow.</del></p>

<p><strong>Edit 10/28</strong>: So I spent the first half of today fixing this up.
Turned out to be more involved than I suspected. I had to evolve the
emacs lisp command enough that I actually made a separate git repo for
it. I fixed the problem of locating a proper emacs binary by deferring
to an appropriately named environment variable. I originally
implemented this shortcut by letting the user specify the location of
emacs in their <code>_config.yml</code>. But then I realized, this is not a
configuration that happens per-site, it&rsquo;s per machine so the site
config file is totally inappropriate. It&rsquo;s kind of annoying though
since if I forget to specify this environment variable then my site
generation won&rsquo;t work&hellip;</p>

<p>Anyhow, it works and as proof I made a version of the example
presentation that is <a href="http://www.zephyrizing.net/demos/example-plugin.html">generated by my plugin</a>, not by
hand. You don&rsquo;t have to take my word for it, but you will have to look
at the <a href="zephyrizing">git repository for this site</a>.</p>

<p>And here is the final code for my org-mode plugin generator:</p>

<figure class='code'><figcaption><span>&#8220;Org Converter&#8221;  (org_converter.rb)</span> <a href='//../plugins/org_converter.rb'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># A generator that uses a emacs invoked in batch mode to process</span>
</span><span class='line'><span class="c1"># org-mode files into html</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;open3&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">class</span> <span class="nc">OrgModeConverter</span> <span class="o">&lt;</span> <span class="no">Converter</span>
</span><span class='line'>    <span class="n">safe</span> <span class="kp">false</span>
</span><span class='line'>    <span class="n">priority</span> <span class="ss">:low</span>
</span><span class='line'>
</span><span class='line'>    <span class="vc">@@emacs_org_html_cmd</span> <span class="o">=</span> <span class="s2">&quot;(progn (require (quote org)) (setq font-lock-mode t) (setq org-html-head-include-default-style nil) (setq org-html-head-include-scripts nil) (condition-case nil (while t (insert (read-string </span><span class="se">\&quot;\&quot;</span><span class="s2">) </span><span class="se">\&quot;\n\&quot;</span><span class="s2">)) (error nil)) (set-buffer (org-export-to-buffer (quote html) </span><span class="se">\&quot;</span><span class="s2">*Org HTML Export*</span><span class="se">\&quot;</span><span class="s2"> nil nil nil t nil (lambda nil t))) (send-string-to-terminal (buffer-string) nil))&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
</span><span class='line'>      <span class="n">ext</span> <span class="o">=~</span> <span class="sr">/^\.org$/i</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">output_ext</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
</span><span class='line'>      <span class="s2">&quot;.html&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>      <span class="n">emacs_path</span> <span class="o">=</span> <span class="k">if</span> <span class="no">ENV</span><span class="o">.</span><span class="n">has_key?</span><span class="p">(</span><span class="s2">&quot;EMACS&quot;</span><span class="p">)</span>
</span><span class='line'>                     <span class="no">ENV</span><span class="o">[</span><span class="s2">&quot;EMACS&quot;</span><span class="o">]</span>
</span><span class='line'>                   <span class="k">else</span>
</span><span class='line'>                     <span class="sb">`which emacs`</span>
</span><span class='line'>                   <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="n">emacs_path</span><span class="o">.</span><span class="n">empty?</span>
</span><span class='line'>        <span class="nb">puts</span> <span class="s2">&quot;Could not find an emacs executable.&quot;</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>        <span class="n">out</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="no">Open3</span><span class="o">.</span><span class="n">capture2</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">emacs_path</span><span class="si">}</span><span class="s2"> --batch --eval &quot;</span> <span class="o">+</span>
</span><span class='line'>                                     <span class="s2">&quot;</span><span class="si">#{</span><span class="vc">@@emacs_org_html_cmd</span><span class="o">.</span><span class="n">inspect</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span class='line'>                                     <span class="ss">:stdin_data</span><span class="o">=&gt;</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>        <span class="n">out</span> <span class="k">unless</span> <span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[On the Importance of Distinguishing Between Stable and Development Documentation]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/10/26/on-the-importance-of-distinguishing-between-stable-and-development-documentation/"/>
    <updated>2014-10-26T22:10:04-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/10/26/on-the-importance-of-distinguishing-between-stable-and-development-documentation</id>
    <content type="html"><![CDATA[<p>A few weeks ago I wrote about <a href="http://www.zephyrizing.net/blog/2014/10/07/dot-dot-dot-and-this-is-why-master-should-be-stable/">Why Master Should Be Stable</a>. I
spent most of that post explaining what had actually happened to me,
but not really talking about the fundamental underlying difficulty.
Well, now that I&rsquo;ve encountered this issue again in a different
context, maybe it&rsquo;s time to dive in a bit and examine what I call the
Doc&rsquo;s Mismatch problem, and how it can be avoided.</p>

<!--more-->


<p>As the title hints, this issue is really more about being able to
match the documentation of a project to a particular version. The
problem with Flaskr was that when you went searching for the
documentation, you most easily found the documentation for the
currently in development branch. This isn&rsquo;t a problem when no major
changes have been made, but when there are major changes this becomes
an issue.</p>

<p>Part of the reason that I&rsquo;m writing this blog post is because last
week, while I was going through the <a href="http://llvm.org">LLVM</a> project&rsquo;s <a href="http://llvm.org/docs/tutorial/index.html">tutorial</a> I ran
into the exact same issue! But I didn&rsquo;t spot that this version
mismatch was the issue until after I had found another workaround.</p>

<p>Not to belabor the point, but basically the LLVM tutorial linked above
is actually the version of the tutorial written for the upcoming 3.6
release. Since there are several breaking changes to the API occurring
in this release, when you have installed LLVM 3.5 the tutorial appears
to be rather broken.</p>

<p>This problem is sort of ironic as the majority of open source software
out there (most definitely including all of my projects :) have
little-to-no documentation, or what there is, is hopelessly
out-of-date. In contrast, the issue that I had with both Flaskr and
LLVM was actually a case of the most easily available documentation
being TOO up-to-date.</p>

<h3>How can we do better?</h3>

<p>Let&rsquo;s contrast these experiences with a project that gets it right:
<a href="https://www.djangoproject.com/">Django</a>. First off, I just want to praise the Django project for
their excellent documentation in general. There is a lot of it, and it
is fairly well-written and clear. There is also a good mixture of the
<a href="http://jacobian.org/writing/great-documentation/what-to-write/">three types of documentation</a> that every project
needs.<code>&lt;/praise&gt;</code></p>

<p>Okay, now lets look at how Django avoids the Docs Mismatch
problem. First, look at the URL for the main
<a href="https://docs.djangoproject.com/en/1.7/">Django Documentation page</a>:
<code>https://docs.djangoproject.com/en/1.7/</code>.  Notice that <code>1.7</code> at the
end? That indicates what version of Django these docs are for. At the
time of this writing, 1.7 is the latest <strong>stable</strong> release of
Django. So, right away Django is doing well. By default the link on
the Django homepage takes you to this page.  And you can bet, that
when the next stable release of Django comes out, that homepage will
be updated to point at the 1.8 version.</p>

<p>However, there is still more that Django is getting fundamentally
right here. By embedding the version of the documentation in the URL,
they can host multiple different versions of the documentation. And
they do! This means that if you&rsquo;re forced to use an older version of
Django for whatever reason (legacy project, no install privileges
etc.) you can still go online to the Django website and find the
documentation for the version you&rsquo;re using. To make this even easier,
their documentation pages all have a permanent float in the bottom
right hand corner that shows the current version of the docs that
you&rsquo;re looking at, and has links to other recent versions of the
documentation.  How cool is that!</p>

<p>If you look at the links in that little floated element, you&rsquo;ll notice
a non-numbered version is available <code>dev</code>. This is the documentation
for the [current development head][djangodevdoc]. More importantly,
notice that this is the equivalent of the documentation that was
easiest for me to find when dealing with both LLVM and Flaskr. But
with Django I had to specifically go looking for it. Why? Because most
people don&rsquo;t want to read the docs for the development head.  And if
they do, they know it!</p>

<p>Django gets one more thing really right here. When you go to the dev
docs page, they automatically add a float at the top of the screen, in
an eye-catching color that effectively says: &ldquo;These are the dev
docs. Are you sure you want to be reading them? They&rsquo;re probably
different.&rdquo;</p>

<p>This last feature is really the key to avoiding the Docs Mismatch
problem. The development docs are fairly rarely what people want to be
reading when they first pick up a new project. So they shouldn&rsquo;t be
the easiest (or only!) documentation to find for your project.</p>

<h3>How do we fix it?</h3>

<p>The ideal situation is for your documentation to be structured like
Django&rsquo;s: multiple versions available, notifications when viewing the
dev version. The good news is that this is much easier to achieve
thany you might expect. <a href="https://readthedocs.org/">Read The Docs</a> makes it trivial to have this
kind of setup for your open source project. In fact, Django actually
uses Read The Docs for their own documentation. I highly recommend
checking out their page and seeing just how easy it is to set up for
your own projects. Of course, once you have this awesome system the
only issue is actually writing all the awesome documentation to
populate it&hellip;</p>

<h3>Other issues</h3>

<p>A primary problem with the Docs Mismatch issue is that the people who
notice it are typically people just wanting to use the project, not
the people developing it. This is especially problematic because these
people are also the most easily discouraged from using a project.</p>

<p>Another problem is that often - especially in older projects - fixing
the Docs Mismatch issue will require either access to a server, or
changes in a release deployment process or something similar. None of
these things are possible for a beginner in a project to do. This
means that the people the most motivated to fix the issue, are the
least able to do anything about it.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Adventures With Clojure Macros]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/10/14/adventures-with-clojure-macros/"/>
    <updated>2014-10-14T18:20:56-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/10/14/adventures-with-clojure-macros</id>
    <content type="html"><![CDATA[<p>So, this is the second day of my second week of <a href="https://www.hackerschool.com/">Hacker School</a>. I&rsquo;m
finally starting to feel like I&rsquo;m getting into the
groove.</p>

<p>So I tackled <a href="http://mitpress.mit.edu/books/design-concepts-programming-languages">DCPL</a> in Clojure once again. I found two sort of scary
things. One, although my code was in a git repo, it wasn&rsquo;t pushed to
Github. Two, there was a big hairy macro that had apparently replaced
the core of my postfix program, but it wasn&rsquo;t checked in!!! Bad past
Geoff. Very bad, no good software practices&hellip;</p>

<!--more-->


<p>Anyhow, so I cleaned things up, and pushed up to Github (it&rsquo;s
<a href="https://github.com/RadicalZephyr/postfix-clj">here</a> FYI), and then I started playing with that macro
again. Turns out it pretty much worked. After a bit of mucking around
I managed to get it going. This quick success buoyed my spirits and I
thought, why don&rsquo;t I write another&hellip; replacing repetitive code is
awesome etc.</p>

<p>Then there I wrote some tests, and it turns out that it didn&rsquo;t
actually work. Repeat for the better part of two hours with testing
getting slowly better and my implementation getting slowly more
correct. But, there were lots of little successes throughout, so I
didn&rsquo;t get discouraged, and the thrill of surmounting the difficulties
I encountered gave me a warm glow when I overcame them (macro writing
is hard! I know, because <a href="http://www.paulgraham.com/avg.html">Paul Graham told me so</a> ;).</p>

<p>Anyhow, my success at writing this one macro made me want to write
another.  And I immediately saw an opportunity!  All of the binary
math operations for postfix are going to have the exact same form,
even with the last macro I wrote. etc. etc. about that macro, goes
pretty smooth.</p>

<p>Anyhow, so that went alright and now there are a bunch of tests I want
to write, just to validate that my macro is producing reasonable code
and continues to do so.</p>

<p>But&hellip; these tests are going to be SOOOO similar!!!  Are you thinking
what I&rsquo;m thinking? Awww, yeah! Time for another macro.</p>

<p>So I start writing a macro to generate some simple tests for me.</p>

<p>All the tests have this general form:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="nf">deftest</span> <span class="nv">subcommand-test</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">testing</span> <span class="s">&quot;Sub command&quot;</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">sub-cmd</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'>           <span class="p">[</span><span class="mi">-1</span><span class="p">]))</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">sub-cmd</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'>           <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span><span class="p">]))</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="nf">thrown-with-msg?</span> <span class="nv">clojure.lang.ExceptionInfo</span>
</span><span class='line'>                          <span class="o">#</span><span class="s">&quot;sub: not enough values on the stack&quot;</span>
</span><span class='line'>                          <span class="p">(</span><span class="nf">sub-cmd</span> <span class="p">[</span><span class="mi">1</span><span class="p">])))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>So I start my macro working on that basic outline. Over the course of
another hour or so, I tweak and work it up to be this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defmacro </span><span class="nv">defbinary-op-test</span> <span class="p">[</span><span class="nv">cmd-name</span> <span class="nv">op</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">cmd-name</span> <span class="p">(</span><span class="nb">name </span><span class="nv">cmd-name</span><span class="p">)</span>
</span><span class='line'>        <span class="nv">fn-name</span>  <span class="p">(</span><span class="nb">symbol </span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span> <span class="s">&quot;-cmd&quot;</span><span class="p">))</span>
</span><span class='line'>        <span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>        <span class="nv">op-result</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="p">(</span><span class="nb">reverse </span><span class="nv">test-args</span><span class="p">)))]</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">prn </span><span class="s">&quot;test-args:&quot;</span> <span class="nv">test-args</span> <span class="s">&quot;\nop result:&quot;</span> <span class="nv">op-result</span><span class="p">)</span>
</span><span class='line'>    <span class="o">`</span><span class="p">(</span><span class="nf">testing</span> <span class="o">~</span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span> <span class="s">&quot; command&quot;</span><span class="p">)</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;=</span> <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="o">~</span><span class="nv">test-args</span><span class="p">)</span>
</span><span class='line'>              <span class="o">~</span><span class="nv">op-result</span><span class="p">))</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;=</span> <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="o">~</span><span class="p">(</span><span class="nb">into </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="nv">test-args</span><span class="p">))</span>
</span><span class='line'>              <span class="o">~</span><span class="p">(</span><span class="nb">into </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="nv">op-result</span><span class="p">)))</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;thrown-with-msg?</span> <span class="nv">clojure.lang.ExceptionInfo</span>
</span><span class='line'>                               <span class="p">(</span><span class="nb">re-pattern </span><span class="o">~</span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span>
</span><span class='line'>                                                 <span class="s">&quot;: not enough values on the stack&quot;</span><span class="p">))</span>
</span><span class='line'>                               <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="p">[</span><span class="mi">1</span><span class="p">]))))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Okay, it looks like a monster.  But it&rsquo;s pretty straightforward.
Since my binary ops are actually implemented by the core functions
they represent I&rsquo;m not concerned with the correctness or with testing
that they work per se. I&rsquo;m more concerned with the vectors going in
and coming out.  So I figure, I&rsquo;ll use the same numbers for all of
them, and have the macro generate the result of actually applying the
given binary operator to the data I&rsquo;ve hardcoded.</p>

<p>That&rsquo;s whats going inside the <code>let</code> with <code>test-args</code> and <code>op-result</code>.</p>

<p>There are a couple of other tricky things I found out. For instance,
the <code>is</code> testing macro is looking for exactly the symbol <code>=</code> not for
<code>clojure.core/=</code> or for <code>postfix.core-test/thrown-with-msg?</code>. I know,
because those are the things <code>defbinary-op-test</code> produced before I put
in the unquoted-quote <code>~'</code> to stop the automatic namespace resolution,
as described in the <a href="http://www.manning.com/fogus2/">Joy of Clojure</a>.</p>

<p>But then, after I debugged all of these little problems, I discovered
that, though my tests were being generated syntactically correctly,
they were failing!</p>

<p>Now, given the way that I constructed the macro, this didn&rsquo;t seem
possible.  I mean, I&rsquo;m literally testing that my command, which uses
the given operator, produces the same thing as that operator.</p>

<p>So I dig in to make sure my macro is doing the right stuff, and pull
out <code>(clojure.pprint/pprint (macroexpand-1 '(defbinary-op-test add
+)))</code></p>

<p>which produces this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="nf">clojure.test/testing</span>
</span><span class='line'> <span class="s">&quot;add command&quot;</span>
</span><span class='line'> <span class="p">(</span><span class="nf">clojure.test/is</span> <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">add-cmd</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span> <span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
</span><span class='line'> <span class="p">(</span><span class="nf">clojure.test/is</span> <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">add-cmd</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">3</span> <span class="mi">1</span><span class="p">])</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">3</span><span class="p">]))</span>
</span><span class='line'> <span class="p">(</span><span class="nf">clojure.test/is</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">thrown-with-msg?</span>
</span><span class='line'>   <span class="nv">clojure.lang.ExceptionInfo</span>
</span><span class='line'>   <span class="p">(</span><span class="nf">clojure.core/re-pattern</span> <span class="s">&quot;add: not enough values on the stack&quot;</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nf">add-cmd</span> <span class="p">[</span><span class="mi">1</span><span class="p">]))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Okay, okay everything looks good&hellip; Wait a second&hellip; Did the macro
produce the result that 3 + 1 is 3?  Okay, let&rsquo;s take a closer look at
that macro again. Specifically, the two relevant portions of the let:</p>

<pre><code>test-args [3 1]
op-result (vector (apply op (reverse test-args)))]
</code></pre>

<p>and the part where <code>op-result</code> is used:</p>

<pre><code>(is (~'= (~fn-name ~test-args)
       ~op-result))
</code></pre>

<p>Okay, everthing looks pretty kosher, but to be sure, let&rsquo;s try it out
in the repl, with the appropriate values filled in.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">op</span> <span class="nv">+</span>
</span><span class='line'>      <span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]]</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="p">(</span><span class="nb">reverse </span><span class="nv">test-args</span><span class="p">))))</span>
</span><span class='line'><span class="c1">;; =&gt; [4]</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s correct.  But that macroexpand clearly shows a <code>[3]</code> where that
<code>[4]</code> should be.</p>

<p>Okay, maybe I didn&rsquo;t reproduce something correctly in the REPL.  Let&rsquo;s
put some print statements in the macro before the expansion</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defmacro </span><span class="nv">defbinary-op-test</span> <span class="p">[</span><span class="nv">cmd-name</span> <span class="nv">op</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">cmd-name</span> <span class="p">(</span><span class="nb">name </span><span class="nv">cmd-name</span><span class="p">)</span>
</span><span class='line'>        <span class="nv">fn-name</span>  <span class="p">(</span><span class="nb">symbol </span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span> <span class="s">&quot;-cmd&quot;</span><span class="p">))</span>
</span><span class='line'>        <span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>        <span class="nv">op-result</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="p">(</span><span class="nb">reverse </span><span class="nv">test-args</span><span class="p">)))]</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">prn </span><span class="s">&quot;test-args:&quot;</span> <span class="nv">test-args</span> <span class="s">&quot;op result:&quot;</span> <span class="nv">op-result</span><span class="p">)</span>
</span><span class='line'>    <span class="o">`</span><span class="p">(</span><span class="nf">testing</span> <span class="o">~</span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span> <span class="s">&quot; command&quot;</span><span class="p">)</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;=</span> <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="o">~</span><span class="nv">test-args</span><span class="p">)</span>
</span><span class='line'>              <span class="o">~</span><span class="nv">op-result</span><span class="p">))</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;=</span> <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="o">~</span><span class="p">(</span><span class="nb">into </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="nv">test-args</span><span class="p">))</span>
</span><span class='line'>              <span class="o">~</span><span class="p">(</span><span class="nb">into </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="nv">op-result</span><span class="p">)))</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;thrown-with-msg?</span> <span class="nv">clojure.lang.ExceptionInfo</span>
</span><span class='line'>                               <span class="p">(</span><span class="nb">re-pattern </span><span class="o">~</span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span>
</span><span class='line'>                                                 <span class="s">&quot;: not enough values on the stack&quot;</span><span class="p">))</span>
</span><span class='line'>                               <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="p">[</span><span class="mi">1</span><span class="p">]))))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>When I reload the namespace I get this:</p>

<pre><code>:reloading (postfix.core postfix.core-test)
"test-args:" [3 1] "op result:" [3]
"test-args:" [3 1] "op result:" [3]
"test-args:" [3 1] "op result:" [3]
"test-args:" [3 1] "op result:" [3]
</code></pre>

<p>Okay, that&rsquo;s clearly what&rsquo;s happening but it&rsquo;s still really strange
that the <code>[3]</code> is showing up at all. So how about a
<a href="https://en.wikipedia.org/wiki/Minimal_Working_Example">minimal working example</a> (or rather, not-working in this case)?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defmacro </span><span class="nv">deftestaddproblem</span> <span class="p">[</span><span class="nv">op</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>        <span class="nv">op-result</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="p">(</span><span class="nb">reverse </span><span class="nv">test-args</span><span class="p">)))]</span>
</span><span class='line'>    <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">test-args</span> <span class="o">~</span><span class="nv">op-result</span><span class="p">]))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then macroexpanding it:</p>

<pre><code>(clojure.pprint/pprint (macroexpand-1 '(deftestaddproblem +)))
[[3 1] [3]]
</code></pre>

<p>Just for sanity, lets make sure it&rsquo;s the right version of <code>+</code>:</p>

<pre><code>(clojure.pprint/pprint (macroexpand-1 '(deftestaddproblem clojure.core/+)))
[[3 1] [3]]
</code></pre>

<p>What is going on!?!?!?!?! Okay, back to the REPL. This time, a raw
REPL from <code>lein repl</code> in my home directory.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest</span> <span class="p">[</span><span class="nv">op</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">op-result</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="p">(</span><span class="nb">reverse </span><span class="nv">test-args</span><span class="p">)))]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>     <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">test-args</span> <span class="o">~</span><span class="nv">op-result</span><span class="p">]))</span>
</span><span class='line'><span class="o">#</span><span class="ss">&#39;user/dotest</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest</span> <span class="nv">+</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest</span> <span class="nv">-</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest</span> <span class="nv">*</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest</span> <span class="nv">/</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;;; And without using the macro preprocessing</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply + </span><span class="p">(</span><span class="nb">reverse </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])))</span>
</span><span class='line'><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply - </span><span class="p">(</span><span class="nb">reverse </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])))</span>
</span><span class='line'><span class="p">[</span><span class="mi">-2</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply * </span><span class="p">(</span><span class="nb">reverse </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])))</span>
</span><span class='line'><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply / </span><span class="p">(</span><span class="nb">reverse </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])))</span>
</span><span class='line'><span class="p">[</span><span class="mi">1</span><span class="nv">/3</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; Removing more complexity...</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest2</span> <span class="p">[</span><span class="nv">op</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">op-result</span> <span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="nv">test-args</span><span class="p">)]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>    <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">test-args</span> <span class="o">~</span><span class="nv">op-result</span><span class="p">]))</span>
</span><span class='line'><span class="o">#</span><span class="ss">&#39;user/dotest2</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest2</span> <span class="nv">+</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest2</span> <span class="nv">-</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest2</span> <span class="nv">*</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest2</span> <span class="nv">/</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; And again outside of the macro</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply + </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'><span class="mi">4</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply - </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'><span class="mi">2</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply * </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'><span class="mi">3</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply / </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'><span class="mi">3</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; More experiments</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest3</span> <span class="p">[]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">+-res</span> <span class="p">(</span><span class="nb">apply + </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">--res</span> <span class="p">(</span><span class="nb">apply - </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">*-res</span> <span class="p">(</span><span class="nb">apply * </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">div-res</span> <span class="p">(</span><span class="nb">apply / </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>    <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">+-res</span> <span class="o">~</span><span class="nv">--res</span> <span class="o">~</span><span class="nv">*-res</span> <span class="o">~</span><span class="nv">div-res</span><span class="p">]))</span>
</span><span class='line'><span class="mi">3</span><span class="o">#</span><span class="ss">&#39;user/dotest3</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest3</span><span class="p">)</span>
</span><span class='line'><span class="p">[</span><span class="mi">4</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; And another</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest4</span> <span class="p">[]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">+-res</span> <span class="p">(</span><span class="nb">apply + </span><span class="nv">args</span><span class="p">)</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">--res</span> <span class="p">(</span><span class="nb">apply - </span><span class="nv">args</span><span class="p">)</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">*-res</span> <span class="p">(</span><span class="nb">apply * </span><span class="nv">args</span><span class="p">)</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">div-res</span> <span class="p">(</span><span class="nb">apply / </span><span class="nv">args</span><span class="p">)]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>    <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">+-res</span> <span class="o">~</span><span class="nv">--res</span> <span class="o">~</span><span class="nv">*-res</span> <span class="o">~</span><span class="nv">div-res</span><span class="p">]))</span>
</span><span class='line'><span class="o">#</span><span class="ss">&#39;user/dotest4</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest4</span><span class="p">)</span>
</span><span class='line'><span class="p">[</span><span class="mi">4</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; This might be important...</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest5</span> <span class="p">[</span><span class="nv">op</span> <span class="nv">args</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">res</span> <span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="nv">args</span><span class="p">)]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>    <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">op</span> <span class="o">~</span><span class="nv">args</span> <span class="o">~</span><span class="nv">res</span><span class="p">]))</span>
</span><span class='line'><span class="o">#</span><span class="ss">&#39;user/dotest5</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest5</span> <span class="nb">+ </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'><span class="nv">ArityException</span> <span class="nv">Wrong</span> <span class="nv">number</span> <span class="nv">of</span> <span class="nv">args</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="nv">passed</span> <span class="nv">to</span><span class="err">:</span> <span class="nv">Symbol</span>  <span class="nv">clojure.lang.Compiler.macroexpand1</span> <span class="p">(</span><span class="nf">Compiler.java</span><span class="ss">:6557</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; Or not... may just be a problem</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest5</span> <span class="p">[</span><span class="nv">op</span> <span class="nv">args</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">res</span> <span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="nv">args</span><span class="p">)]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>  <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">args</span> <span class="o">~</span><span class="nv">res</span><span class="p">]))</span>
</span><span class='line'><span class="o">#</span><span class="ss">&#39;user/dotest5</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest5</span> <span class="nb">+ </span><span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'><span class="p">[[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">]</span> <span class="mi">2</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; For sanity checking purposes, since apply can only be used with</span>
</span><span class='line'><span class="c1">;; functions</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">fn?</span> <span class="nv">+</span><span class="p">)</span>
</span><span class='line'><span class="nv">true</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">fn?</span> <span class="nv">-</span><span class="p">)</span>
</span><span class='line'><span class="nv">true</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">fn?</span> <span class="nv">*</span><span class="p">)</span>
</span><span class='line'><span class="nv">true</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">fn?</span> <span class="nv">/</span><span class="p">)</span>
</span><span class='line'><span class="nv">true</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; And as Kevin Lynagh helpfully pointed out to me, macros don&#39;t</span>
</span><span class='line'><span class="c1">;; evaluate their arguments...  Time to re-read the section on macros</span>
</span><span class='line'><span class="c1">;; in Joy of Clojure</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply </span><span class="ss">&#39;+</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'><span class="mi">2</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply </span><span class="p">(</span><span class="nb">eval </span><span class="ss">&#39;+</span><span class="p">)</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'><span class="mi">3</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hacker School: Week 1 Review]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/10/11/hacker-school-week-1-review/"/>
    <updated>2014-10-11T03:48:52-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/10/11/hacker-school-week-1-review</id>
    <content type="html"><![CDATA[<p>So, I can&rsquo;t sleep, and it&rsquo;s the end of my first week at
<a href="https://www.hackerschool.com/">Hacker School</a>, so I thought I&rsquo;d do some reflecting on what I did,
why I&rsquo;m here and similar topics.</p>

<!--more-->


<h2>Week Review</h2>

<h3>Monday</h3>

<p>This week has been a blur in some ways and incredibly long in others.
I started out on Monday with an interesting but ultimately abortive
attempt to pair with Alyssa Carter on her observational type system
implementation in Idris. Given that I know pretty much nothing about
either type theory or Idris, this outcome was probably somewhat
inevitable.  In retrospect, while it was interesting to get some
exposure to the ideas and concepts that she talked about, I probably
should have admitted more freely when things she was saying were going
over my head. This is something that I&rsquo;ve always struggled with, and I
think that Hacker School is a great place to try and tackle getting
over it.</p>

<p>The rest of Monday I spent flailing. And not really with any code;
mostly with just getting familiarized with Zulip and the HS (physical)
environment, and turning off most notifications in Zulip.  I
discovered an interesting thing about myself that I hadn&rsquo;t been fully
aware of previously: when there are constant notifications happening
(like when you&rsquo;re highly subscribed to Zulip and desktop notifications
are turned on), I get really stressed out on a subconscious level.</p>

<p>It&rsquo;s sort of similar to how I start to feel inexplicably rushed when
my bladder is getting full, but before I actually notice the urge to
pee.</p>

<p>Anyhow, during my flailing I also poked a bit at my
<a href="https://github.com/RadicalZephyr/snake-puzzle-solver">snake-puzzle-solver</a> project, and discovered that I&rsquo;d left it in a
sort of broken-ish state.</p>

<h3>Tuesday</h3>

<p>On Tuesday I felt much calmer. I&rsquo;m having a hard time remembering now
what exactly I worked on. I believe it was working through
<em><a href="https://realworldocaml.org/">Real World OCaml</a></em> though.  I didn&rsquo;t get very far, but I also spent
a bit of time <a href="http://www.zephyrizing.net/blog/2014/10/07/dot-dot-dot-and-this-is-why-master-should-be-stable/">helping Sammy out</a>, and fixing up this
blog with Octopress.</p>

<h3>Wednesday</h3>

<p>Through some poor decision-making Tuesday evening (i.e. eating two
slices of pizza, and also drinking a not inconsiderable amount) I was
either very gluten-sick or very, very hungover on Wednesday. No good,
very bad feels were had all day. At the time I was fairly convinced
that it was the pizza. In retrospect, the symptoms were very
hangover-like. Perhaps I just got much drunker than I thought I did?
Hard to say.</p>

<h3>Thursday</h3>

<p>On Thursday I powered through the first third or so of <em>Real World
OCaml</em>. That was awesome. OCaml is a fascinating language, and even
though it has perhaps more than it&rsquo;s share of syntactic quirks it&rsquo;s
been fun learning it. On a slightly meta-level I was sort of
dissatisfied throughout the day because of my (mostly self-imposed)
isolation. Not using Zulip much - because of how distracting it is -
makes me feel a bit cut-off from some of the social aspects of HS. And
I still haven&rsquo;t really found the courage to seek out somebody to pair
with. Another thing I want to work on. Also, the fact that I was doing
something so ordinary and mundane as simply reading a book made me
feel bad. Reading a book on a new language and working through the
code examples is something that I can, have, and - most likely - will
do again at home. So why am I &ldquo;wasting&rdquo; my time at Hacker School,
precious, precious time that it is, doing it here? Particularly since
I&rsquo;m doing it alone!!</p>

<p>I don&rsquo;t really have answers to most of these dissatisfactions. Most of
them are probably just my social awkwardness manifesting, and the last
one sounds suspiciously like a strange form of Imposter Syndrome.</p>

<p>I stayed late in the evening though and started working on a neat
project that occurred to me when I suggested that another HS&#8217;er work
through Phil Nelson&rsquo;s minishell - implementing the minishell in
OCaml!! And even more importantly, I achieved a real-feeling amount of
success in the project! I was able, without any real documentation
(couldn&rsquo;t find accurate docs!) to utilize the OCaml Unix module well
enough to create the equivalent of the <code>minishell.c</code> that Nelson gives
out as the basis for the shell, and to complete the equivalent of
assignment 1.</p>

<h3>Friday</h3>

<p>I somehow gained the impression that showing up at the space was less
expected on Friday. Now I&rsquo;m really not sure where/how I got that
idea.  But I&rsquo;m also totally unsure if it&rsquo;s actually wrong&hellip; >:(</p>

<p>I did however use the day to catch up on some sleep, do some errands
(digital ones anyhow) and go hang out with a friend I haven&rsquo;t seen in
literally years. So, overall win even if I did totally miss out on a
HS day.  But again, it makes me feel sort of disconnected to be not at
the space when others are.</p>

<h2>Project Ideas</h2>

<p>Given some of my meta-dissatisfaction that I felt on Thursday
regarding what I&rsquo;ve been working on, I thought I might try to list
some other projects that seem more &ldquo;Hacker School worthy&rdquo;.</p>

<p>Looking to the <a href="https://www.hackerschool.com/manual#sec-principles">three traits of an awesome Hacker Schooler</a>,
I started thinking about what are some challenging (strive for
greatness) problems that I could approach with rigor.</p>

<ul>
<li>Dive into the bug in auto-fill in emacs, try to fix it</li>
<li>Pursue learning more graphics stuff (since I&rsquo;ve been sort of
intimidated by it for a while). Project-wise, it might be
interesting to try and discover what sort of work it would take to
update Emacs&#8217; rendering engine.</li>
<li>Try to dive into the Boomerang decompiler&rsquo;s source code and
understand it</li>
</ul>


<p>And some other random things I want to do (but might not be feasible):</p>

<ul>
<li>Implement a language that has lispy-prefix syntax but OCaml
semantics; in particular that has type-inferencing</li>
<li>To that end, implement the type inferencing engine that powers OCaml
type inferences</li>
<li>Port Boomerang to use the LLVM architecture</li>
</ul>


<h2>Final Thoughts</h2>

<p>It&rsquo;s frustrating how many of the things that I want to do still have
what seems like huge mounds of prerequisites in front of them. I want
to do all of these interesting language things, but I feel like I&rsquo;m
blocked from doing them because I want to do them in LLVM, but I don&rsquo;t
know anything about actually using the LLVM.</p>

<p>Also, when I was reflecting on what I need to do to become a better
programmer, one of the recurring thoughts I responded with is that I
need to write/work on a larger system/project. I feel like I have
quite a bit of experience taking an small projects. But not something
like YRAS&hellip; Which, I think, is one reason that I am absolutely
terrified of starting that project.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[... And This Is Why Master Should Be Stable]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/10/07/dot-dot-dot-and-this-is-why-master-should-be-stable/"/>
    <updated>2014-10-07T12:28:48-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/10/07/dot-dot-dot-and-this-is-why-master-should-be-stable</id>
    <content type="html"><![CDATA[<p>Second day at Hacker School.  I spent the morning doing two things:</p>

<ul>
<li>getting my blog setup to use <a href="http://octopress.org/">Octopress</a>.</li>
<li>helping another HS-er troubleshoot getting setup with <a href="http://flask.pocoo.org/">Flask</a> and <a href="http://flask.pocoo.org/docs/0.10/tutorial/introduction/">Flaskr</a>.</li>
</ul>


<!--more-->


<p>Yesterday, I was super frustrated by the difficulties I had in getting
Octopress going, and was reminded of the frustrations with setting up
Ruby environments that led me to wipe my computer and start from
scratch a few weeks ago.  You know, that and a certain amount of boredom.</p>

<p>Anyhow, I was able to make more headway today, largely because I
sorted out all of the really silly stuff yesterday.</p>

<p>But helping Sammy with setting up <a href="http://flask.pocoo.org/">Flask</a> was a nightmare!  TL;DR, we
figured it out, and it was incredibly simple.</p>

<p>First off, there were some minor SNAFU&rsquo;s with me showing her about
[virtualenv], and explaining briefly how it works and how why she
should use it.  But then, we were confronted with these instructions
on the <a href="https://github.com/mitsuhiko/flask/tree/master/examples/flaskr">Flaskr doc page</a> on Github, a natural place to
look when the <a href="http://flask.pocoo.org/docs/0.10/tutorial/introduction/">&ldquo;actual&rdquo; docs</a> don&rsquo;t mention anything about how
to install or setup the damn thing.</p>

<p>We spent nearly two and a half hours searching for the mythical
<code>flask</code> binary, to no avail.  Finally, after I inadvertently ran
aacross this <a href="https://github.com/mitsuhiko/flask/issues/1180">flask issue</a>, it dawned on me that we might be
having the same problem.  Well, that&rsquo;s not quite true.  In reality, I
got so frustrated that I decided to just try the simplest thing that I
could think of to get flaskr to run <code>python flaskr.py</code>.  Low and
behold, it worked!!  Then, in retrospect, having seen that issue
describing the disconnect between the docs for flaskr in the flask
<code>master</code> branch and what the latest stable version was, I went and
looked at the <a href="https://github.com/mitsuhiko/flask/tree/0.10.1/examples/flaskr">last stable release docs</a> for Flaskr, and
there it was. Simple instructions to do the simple, straightforward
thing.</p>

<p>[[virtualenv]: <a href="http://virtualenv.readthedocs.org/en/latest/virtualenv.html">http://virtualenv.readthedocs.org/en/latest/virtualenv.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Keybase Hacker News Q&A]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/06/11/keybase-hackernews-q-and-a/"/>
    <updated>2014-06-11T23:00:00-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/06/11/keybase-hackernews-q-and-a</id>
    <content type="html"><![CDATA[<p>I started using <a href="https://keybase.io">Keybase</a> sometime back in April. I&rsquo;ve been interested
in doing crypto stuff for a long time, starting with using an SSH
keypair instead of a password to access the WWU CS department&rsquo;s
computer labs remotely.</p>

<p>Learning more about GPG and actually figuring out how to send and
receive encrypted messages has been on my list of things to learn for
a while, but every time I had a couple spare minutes and tried to
approach it I was rebuffed by the impenetrability of the manuals for
gpg.</p>

<p>However, recently while thinking about who to give my remaining five
invites to, I decided to do some more research on what those more
security-savvy than I thought about Keybase.</p>

<!--more-->


<p>The results were somewhat of a mixed bag. In no particular order, I
read:</p>

<ul>
<li><a href="http://blog.lrdesign.com/2014/03/thoughts-on-keybase-io/">A thoughtful critique</a></li>
<li><a href="http://www.tbray.org/ongoing/When/201x/2014/03/19/Keybase">A nice first look</a></li>
<li><a href="https://filippo.io/on-keybase-dot-io-and-encrypted-private-key-sharing/">A response to the people decrying the upload private key feature</a></li>
<li><a href="http://blog.lizdenys.com/2014/03/31/refusing-to-verify-myself/">A brief look at the chain of trust in even getting Keybase</a></li>
</ul>


<p>I also came across the discussion that occurred on Hacker News shortly
after Keybase first appeared. As so often happens when I stumble on to
a HN comment page, I ended up reading the whole thing. What I noticed
was that there seems to be some information from Max and Chris (the
founders of Keybase) that I hadn&rsquo;t run across on the Keybase website
itself.</p>

<p>So I volunteered myself for a public service. I extracted the parts of
the discussion that were interesting and relevant into a text
document. I tried to focus on the questions that got interesting
responses. I left out many little asides, and tangential discussions.</p>

<p>The founders of Keybase are malgorithms and maxtaco. Most of the
answers are by them, though in some cases I&rsquo;ve preserved a chain of
replies, with only the first marked as a &ldquo;question&rdquo;. Without further
ado:</p>

<blockquote><h3>General Announcement</h3>

<p>malgorithms 118 days ago</p>

<p>There were multiple questions/comments below about this, so I felt I
should clarify one detail about the keybase client&rsquo;s trust of the
server. When the keybase client requests maria&rsquo;s key from the keybase
server, it does not simply trust the public key because it trusts the
server (or uses https - huh?).</p>

<p>Rather, the server replies with links to tweets, gists, etc. &ndash;
maria&rsquo;s public identity proofs. The keybase client does not trust that
these are honest, so it scrapes them directly and makes sure they were
signed by the same public key that the server provided. In other
words, the server could reply with a different maria, and simply lie,
but not with the real maria&rsquo;s github or twitter account.</p>

<p>The server could also lie by omission, leaving out an identity. But it
cannot invent ones that do not exist, without the client knowing.</p>

<p>Again, the premise here is that maria is the sum of her online
identities.</p>

<p>The website itself is of course a different story. When you look up
maria on keybase&rsquo;s website, you are trusting that keybase.io did not
lie about her github account. Fortunately you can confirm by following
the link to her gist, where she announced her keybase username and
posted her key fingerprint.</p>

<h3>Q:</h3>

<p>theboss 118 days ago</p>

<p>I don&rsquo;t see why you don&rsquo;t just get the key once, allow you to verify
it, and store it locally. It seems pointless to make all these extra
requests to you.</p>

<p>There&rsquo;s a reason that gpg does this&hellip;.. Maria&rsquo;s twitter being hacked,
Maria&rsquo;s github being hacked, Maria&rsquo;s Keystore being hacked&hellip;.a lot
can go wrong.</p>

<p>There are still weaknesses like, you lie about a github and link to
your own github, and lie about the public key. And&hellip;many others.</p>

<h3>A:</h3>

<p>malgorithms 118 days ago</p>

<p>yes, it does do this; once you&rsquo;re satisfied with maria&rsquo;s identity,
that she&rsquo;s the person you want, you sign a statement to that effect,
which you can store just locally or post back to the server. (or of
course you can just sign her key in GPG!) The latter - posting back to
the server - is for portability reasons. A keybase user will likely
use keybase on multiple machines.</p>

<h3>Q:</h3>

<p>riquito 117 days ago</p>

<p>The first thing I thought about is a man in the middle attack with
homoglyphs. I don&rsquo;t know if I&rsquo;m paranoid, but look at this</p>

<blockquote><p>keybase id maria</p></blockquote>

<p>   pgp: C4B3 15B4 7154 5281 5100 1C58 C2A5 977B 0022 github:
   mаria_leah ✓ <a href="https://gist.github.com/23423">https://gist.github.com/23423</a> twitter: mаria_h20 ✓
   <a href="https://t.co/m%D0%B0ria_h20/523554">https://t.co/m%D0%B0ria_h20/523554</a> site: mаriah20.com ✓
   <a href="https://m%D0%B0riah20.com/X904F...">https://m%D0%B0riah20.com/X904F&#8230;</a></p>

<p>I looked up for &lsquo;maria&rsquo;, all ascii. The answer, served by a malicious
server, contains the first &lsquo;a&rsquo; of maria in Cyrillic (check yourself,
you&rsquo;ll see that &lsquo;mаria_leah&rsquo; != &lsquo;maria_leah&rsquo;). This would fool the
user.</p>

<p>Maybe the client should apply some logic as browsers do for IDN
homograph attack to show characters not in your locale in a different
way, or at least warn you.</p>

<h3>A:</h3>

<p>malgorithms 117 days ago</p>

<p>Hi riquito - this is a very legitimate concern, and it has to be
reviewed individually for each type of proof keybase supports, in the
client. With twitter, keybase, and github, you can&rsquo;t have a username
containing any character other than an alphanumeric, dash, or
underscore. Which means this kind of attack is impossible.</p>

<p>But for future identity proofs (domains, for example, which we&rsquo;ve yet
to implement), this kind of attack is real. Our approach here will be
that anything outside of normal ascii will be highlighted and
addressed to the user, as a serious warning.</p>

<h3>Q:</h3>

<p>sweis 118 days ago</p>

<p>Even though there is a disclaimer, I think the &ldquo;encrypt in your
browser&rdquo; feature (<a href="https://keybase.io/encrypt">https://keybase.io/encrypt</a>) undermines Keybase&rsquo;s
security credibility.</p>

<p>This form has essentially the same level of security as
Hushmail. Anybody using it should consider the content exposed to
Keybase or anyone compromising Keybase.</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>I&rsquo;m not an authority on hushmail, but it seems like they do crypto on
the server, and the server is just trusted to throw away the keys and
plaintext?</p>

<p>In the keybase Web client, all crypto happens on the browser. The
server knows no keys or data in plaintext. Of course, you&rsquo;d have to
audit the front-end JS code to believe that claim.</p>

<p>But our intention is that the only way to compromise the Web-based
tools would be to insert malicious JavaScript into the client&rsquo;s
browser. A read-only compromise of the server yields only encrypted
data, and the server never has access to the decryption keys.</p>

<h3>Q:</h3>

<p>JustARandomGuy 118 days ago</p>

<p>Hi Chris, a few comments:</p>

<ol>
<li><p>I like the site design, the story flow on the front page does a
great job of explaining what keybase is.</p></li>
<li><p>I see (from the abovementioned story flow) that keys can be
verified by reviewing signed tweets/gists. Is this functionality
extendable to arbitrary links; i.e. verifying keys against personal
blogs, Tumblr, WordPress or does the third-party site need to
implement a recognized API?</p></li>
</ol>


<p>Again, thanks so much, and it looks like a terrific site so far.</p>

<h3>A:</h3>

<p>malgorithms 118 days ago</p>

<p>Good question! There will be no such thing as a general check, because
&ndash; for any identity &ndash; the client software has to perform a check that
a human would agree means something. For example, what does it mean
that you own a certain blog? How would a person confirm it? Well, at
first glance it might mean that you have the power to post a message
there. But someone else could do that it in a comment, and so that
wouldn&rsquo;t work with Keybase. So any given identity check has to match
some human definition of what it means to have that identity. And it
has to be publicly auditable.</p>

<p>With twitter, it&rsquo;s the ability to post a tweet under a certain
username. With owning a tumblr account, it might be something
similar. With your known StackExchange profile it might mean posting a
statement in a specific part of your profile. And so on.</p>

<p>The common thread in each case is (1) that you post in a place where
only your identity can, and (2) what you post is a signed statement
claiming a connection among three things: (a) your keybase username,
(b) your public key, and (3) the identity on that third party
service. (The third one is necessary so it can&rsquo;t be moved elsewhere.)
Note how twitter and github&rsquo;s are totally different, but achieving
these three things.</p>

<p>We will build out this list of identity checks, hopefully making all
kinds of them easy to do. Everything from proving you own a domain to
having a tumblr or reddit accoun. The definition of those checks will
all be publicly reviewable, both in the spec and in the client, which
is what checks them for you.</p>

<h3>Q:</h3>

<p>ghayes 118 days ago</p>

<p>Well, to follow up, could this be extended to ownership of a domain
(via DNS txt record)? Could we use this as a means of authentication
of a self-signed certificate for a domain?</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>Yes to DNS, though we have to be careful here since DNS can be spoofed
more easily than github or twitter proofs over https. I was thinking a
slightly better way to prove ownership of foo.com would be to post a
proof at <a href="https://foo.com/_keybase">https://foo.com/_keybase</a> (or something similar). To spoof
this, an attacker would have to spoof DNS and also the https
certificate.</p>

<p>Authenticating a self-signed domain certificate via keybase is a neat
idea, but would probably need some browser support, unless there&rsquo;s a
clever hack that I&rsquo;m not thinking of.</p>

<h3>Q:</h3>

<p>sneak 118 days ago</p>

<p>I really, really want crypto, specifically, safe and secure-by-default
crypto, to become much more usable.</p>

<p>Despite this hope, I can&rsquo;t seem to help the fact that the first thing
that popped into my head when I read their webpage is &ldquo;oh, they&rsquo;re
wrapping and abstracting important key authentication and critical key
trust configuration to make it more user-friendly, and implementing it
all in javascript. WHAT COULD POSSIBLY GO WRONG?&rdquo;</p>

<p>Even if I got whacked on the head one day and suddenly loved
javascript, I would not use it for certain projects when I wanted to
be taken seriously by, say, cryptographers.</p>

<p>Then again, look at all the success cryptocat has had!</p>

<h3>A:</h3>

<p>FiloSottile 118 days ago</p>

<p>As long as the trust model is that the server is untrusted, it can be
written in the language they prefer. As for the client, there can be
as many implementations in as many languages as needed to make
everyone happy IMHO (they call it reference client in the home).</p>

<h3>Q:</h3>

<p>sneak 118 days ago</p>

<p>If this talks to keybase&rsquo;s API over https and any large groups come to
rely on this, we&rsquo;ve then effectively replaced the decentralized safety
of the Web of Trust used for authenticating PGP keys with the PKI
that&rsquo;s used in browsers, which is completely and totally fucked.</p>

<p>I cannot support a project that doesn&rsquo;t build and strengthen the
underlying WoT. Getting https involved for authenticating unknown keys
is a huge step backwards. Madness.</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>We&rsquo;re not big fans of browser PKI either, but we&rsquo;re using it as
scaffolding that hopefully one day can be torn down.</p>

<p><code>keybase-installer</code> needs an initial install over https from npm. We
unfortunately saw no way around this.</p>

<p>Assuming that install succeeds with integrity, then all future
upgrades of the installer and client are verified with PGP keys stored
locally on the client.</p>

<p>Once the client is installed, it speaks HTTPS to the server, but we&rsquo;re
not trusting the root CA. Rather, we sign with our own CA that we ship
with the client.</p>

<p>The proofs themselves, on twitter and github, all can be verified in
the clear, as FiloSottile points out, but of course relying upon the
HTTPS certificates of twitter and github to make sure the proofs
weren&rsquo;t corrupted in transit between those services and the client.</p>

<h3>Q:</h3>

<p>bqe 118 days ago</p>

<p>I don&rsquo;t understand how using HTTPS for the API has any bearing
whatsoever on the WoT built via PGP.</p>

<p>You can still verify the keys with your client&rsquo;s cached copies, or
using another PGP client.</p>

<h3>A:</h3>

<p>FiloSottile 118 days ago</p>

<p>Exactly, and moreover. If there is no trust in the server, everything
can even go over unencrypted HTTP. CAs have no business here.</p>

<h3>Q:</h3>

<p>IgorPartola 118 days ago</p>

<p>OK, finally looking at it on a desktop&hellip;</p>

<p>So my first question is this: if I know &ldquo;maria&rdquo; and I want to look her
up to get her GPG key, how does keybase handle that? Does it just do
an email address lookup, as in goes to, say, GitHub, grabs her email
address, maria@example.com, then goes to a public key server and grabs
the key that corresponds to maria@example.com?</p>

<p>If that&rsquo;s the case, there is a security issue: what if Maria never
published a GPG key, but Chloe did using Maria&rsquo;s email address?
Moreover, what if Chloe has access to Maria&rsquo;s inbox and can read these
messages I believe to be only readable by Maria?</p>

<p>Edit: I see from responses below that various online presences of an
identity tied to &ldquo;maria&rdquo; are checked. Is this not then susceptible to
its own attack? For example, if Maria does not have a Twitter account
and I create one, or compromise hers and post a different key, will I
be able to at least introduce doubt into her identity, if not take it
over outright?</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>No, there are no proofs based on e-mail addresses, because such proofs
are not publicly-auditable. We could ask that maria prove to the
server that she controls a given gmail account, but there&rsquo;s no way for
the server to prove that to you.</p>

<p>We want the server to be untrusted, ideally just a dumb message
router.</p>

<p>If Chloe wants to impersonate maria, she&rsquo;ll need to get control of
maria&rsquo;s twitter and github accounts. Just claiming maria&rsquo;s email
address won&rsquo;t get her anywhere. (Note that GPG keyservers are
susceptible to exactly the attack you describe).</p>

<h3>A:</h3>

<p>IgorPartola 118 days ago</p>

<p>Hold on. First, GPG servers are susceptible to the same type of
attack, except they would never be used that way. You never look up a
person by email, the send them an encrypted message using the key you
get. Instead, you verify their key and email address out of band: you
meet them, check their credentials, then sign the key. Keybase is
trying to get rid of the in-person verification, an effort I applaud,
but in favor of a much weaker check: whether a few centralized
accounts had been compromised.</p>

<p>The other part, where you check Maria&rsquo;s Twitter and GitHub accounts,
means that a few things like Twitter, and GitHub are impervious to
Chloe: a tall order and a centralized one at that.</p>

<p>Once again, is the point here for me to get a tuple of (email address,
public GPG key) so I can email Maria securely? If so, then someone
somewhere has to prove that this tuple fetched from the public key
servers is valid.</p>

<p>If the point is to only communicate via keybase.io, then the service
is centralized, and useless once actual sensitive info is exchanged,
the US government takes notice and shuts it down at the DNS level.</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>Cool, I agree no one should use PGP servers the way I described, but
you never know what people are doing out there. To do things the
proper way, as you described, is difficult in practice for lots of
people.</p>

<p>To answer the question, the point isn&rsquo;t to get an (email address,
GPG-key) mapping. It&rsquo;s to get a (public-internet-identity, GPG-key)
mapping. People sometimes do this today in an adhoc manner
(e.g. tweeting your GPG fingerprint). We want it to be checkable by
user-friendly software.</p>

<h3>A:</h3>

<p>IgorPartola 118 days ago</p>

<p>I see. That MO makes a bit more sense then, though is it not then
limited to just Keybase.io and will no longer work if something
happens to this service? Or more importantly, is there a way to make
this distributed?</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>If the site went away tomorrow, you&rsquo;d still have keys in your GPG
keychain. You&rsquo;d also have a local cache of the server-side data
relevant to you.</p>

<p>All public server-side data is available as a dump
(<a href="https://keybase.io/__/api-docs/1.0#call-dump-all">https://keybase.io/__/api-docs/1.0#call-dump-all</a>). Private data like
encrypted public keys and password hashes we of course will keep under
wraps.</p>

<p>We don&rsquo;t have immediate plans to make the system distributed, but if
someone did it, we&rsquo;d find it very cool. It&rsquo;s just too much for us to
do right now.</p>

<h3>Q:</h3>

<p>theboss 118 days ago</p>

<p>Where are the security details published? I think that&rsquo;s what we all
want to see&hellip;</p>

<p>On top of this&hellip;.I think this is cool in theory but bad in practice.</p>

<p>The assumption that Root CA&rsquo;s are trustworthy is already hard enough
to make, how do I know that Maria is actually Maria? How will you
verify that &ldquo;Maria&rdquo; actually owns that twitter, github, gmail. Maybe
it is possible to devise some type of scheme for those sites, but how
about more obscure services?</p>

<p>One mistake in one single account causes the entire thing to fall
apart&hellip;</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>As Chris said, we would like to publish everything, just haven&rsquo;t found
the time yet. We have bits and pieces in wikis in our various github
repositories (almost all of which are open source and public).</p>

<p>The high bits are: all crypto is with GPG/RSA as per RFC4880. There
are of course problems here, but we wanted backwards-compatibility and
well-tested, well-used clients.</p>

<p>We encrypt server-stored GPG private keys (if you choose to use that
option) with TripleSec (see <a href="https://keybase.io/triplesec">https://keybase.io/triplesec</a>).</p>

<p>Users use GPG to sign a series of JSON objects, of the form &ldquo;I&rsquo;m
maxtaco on twitter&rdquo;, or &ldquo;I checked Chris&rsquo;s proofs as of 2014/2/14 and
they look good to me.&rdquo; All JSON objects that a user signs are chained
together with SHA-2 hashes. So a user can sign the whole group of JSON
statements by just signing the most recent one.</p>

<p>Here&rsquo;s an example (click on &ldquo;Show the Proof&rdquo;)
<a href="https://keybase.io/max/sigs/ZnBizHMA8RKSB598TaDtjlPlLKSEu1Wu...">https://keybase.io/max/sigs/ZnBizHMA8RKSB598TaDtjlPlLKSEu1Wu&#8230;</a></p>

<p>There&rsquo;s a fair amount of engineering that went into the software
distribution system. We rely first on npm to get the initial client
out there, but after that, exclusively GPG for code-signing. That&rsquo;s
documented here:</p>

<p><a href="https://github.com/keybase/node-installer/wiki/Update-Archit...">https://github.com/keybase/node-installer/wiki/Update-Archit&#8230;</a></p>

<p>We hope to have better documentation soon, and we value feedback, we
just haven&rsquo;t had the time to put it together yet.</p>

<h3>Q:</h3>

<p>caf 118 days ago</p>

<p>The idea here isn&rsquo;t that you use keybase to find out Maria&rsquo;s twitter,
github or gmail identities - it&rsquo;s the opposite. The idea is that you
already know who Maria is on one or more of those services, so the
fact that the account you know is Maria&rsquo;s at github has posted a
signed message from that public key is supposed to testify to you that
that is really your Maria&rsquo;s public key.</p>

<p>You could of course manually review and verify Maria&rsquo;s github post
that contains her public key - all that keybase is really doing here
is providing an easy way of discovering that github post (or tweet, or
whatever).</p>

<h3>A:</h3>

<p>andrewaylett 117 days ago</p>

<p>s/could/should/?</p>

<h3>A:</h3>

<p>caf 116 days ago</p>

<p>Only if you don&rsquo;t trust your copy of the keybase client (as opposed to
the server, which you should not need to trust).</p>

<h3>Q:</h3>

<p>theboss 118 days ago</p>

<p>When I get someone&rsquo;s GPG key I can call them on the telephone or go to
their house and make sure I got the right one.</p>

<p>I add it and use it. When you use this, I&rsquo;m assuming I get that key
every time from the server. I can get it and verify it once, or twice,
or three times, but what about the 1000th time? What happens when I am
important enough that they return a public key that is not Maria&rsquo;s,
and I am none the wiser.</p>

<h3>A:</h3>

<p>malgorithms 117 days ago</p>

<p>boss, I&rsquo;m glad you answered this question. Because it explains the
impetus for Keybase.</p>

<p>I think what Keybase is addressing in the status quo is twofold: (1)
sadly, almost no one does what you describe; in person meeting key
exchanges and webs of trust may sadly be as unpopular in 20 years as
they are now, and as they were 20 years ago. People who go to them are
often confused, even programmers. I wish it were different.</p>

<p>And (2) more important, in 2014, often the person you&rsquo;re dealing with
is someone whose digital public identity is what matters, not their
face in real life or phone number. If you know me online as
github/malgorithms and twitter/malgorithms, to get my key, meeting
someone in person or talking on the phone to someone who claims to be
me is actually less compelling than a signed statement by malgorithms
in all those places you know me.</p>

<p>And if you do know me in real life, then I can tell you my keybase
username and fingerprint, exactly as you&rsquo;re used to. So it&rsquo;s still as
powerful for meeting in person. With the added benefit you can confirm
my other identities, which you likely know to.</p>

<p>In answer to your scenario about verifying: you only need to review
the &ldquo;maria&rdquo; the server provides once, and then your private key signs
a full summary of maria &ndash; her key and proofs. Cases 2 through 1000 of
performing a crypto action on maria involve you only trusting your own
signature of what &ldquo;maria&rdquo; is. The client can query the server for
changes to her identity, and this will be configurable; if maria adds
a new proof, you might wish to know.</p>

<h3>A:</h3>

<p>jonesetc 117 days ago</p>

<p>This is what I assumed the answer would be, and at this point it just
becomes a difference in opinion. I personally do not believe that the
methods you describe are generally acceptable options in the modern
age. My phone number and address are much more important to me than
the off chance of someone capturing my https traffic, breaking it, and
inserting a fake public key. There is a point where the absolute
security of exchanging public keys written on pieces of paper in a
park are called for, but it&rsquo;s not for everyone or even most.</p>

<h3>Q:</h3>

<p>jonesetc 118 days ago</p>

<p>Is there a way to remove an associated account?</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>Yes, though it might be broken right now. Our plan is to allow this,
for sure.</p>

<h3>Q:</h3>

<p>diasp 117 days ago</p>

<p>Interesting. Another approach is <a href="https://encrypt.to/">https://encrypt.to/</a> which loads the
public key from key servers and encrypts client-side via JS.</p>

<h3>A:</h3>

<p>malgorithms 117 days ago</p>

<p>To clarify the difference, it seems encrypt.to is a service which does
PGP crypto in the browser, based on keys pulled from keyservers. In
contrast, Keybase is an identity-proving service, which proves key X
belongs to person with twitter account Y, github account Z, etc. As a
convenience, it also does encryption and other crypto actions for its
users.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Onward]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/06/07/s-and-e-part-seven:-onward/"/>
    <updated>2014-06-07T22:00:00-05:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/06/07/s-and-e-part-seven:-onward</id>
    <content type="html"><![CDATA[<p>The path to my graduation has been a long one. For almost a year now
different people have been asking me what I&rsquo;m going to do once I
graduate. For the most part my answer has been that I&rsquo;m focusing on
getting to graduation, and I&rsquo;ll handle the rest as it comes.</p>

<!--more-->


<p>While probably not the most satisfying answer, it seems to suffice.
The truth is, I&rsquo;ve made enough of a plan that I won&rsquo;t have to scramble
for a job once I do graduate. I have an offer from Sage Bionetworks -
the company that I did an internship with - to do some part-time
contract programming for them. The pay rate is low for my industry,
but it is a very livable wage. The plan is that I can relax and
decompress from the madness of my final weeks at Western while working
for Sage. It will be another Vacation. Then, when I&rsquo;m ready, I can
start to apply for a more long term position at a place of my
choosing.</p>

<p>I&rsquo;ve been ruminating on the different possibilities for where I&rsquo;d like
to work. By and large, I have set my sights high, and I have a
short-list of companies that I would like to work for. I was content
with this loose plan; that is, until a few days ago.</p>

<p>On Monday, April 14 I was killing time between classes by browsing the
internet, when I stumbled across something called Hacker School. Now,
the mainstream media may have given you an idea of what the word
hacker means.  Let me define how it is used in programming circles.</p>

<p>A hacker is not someone who breaks into computer systems for fun or
profit. Those people are known as crackers and are regarded among
programmers as the criminals that they usually are. To programmers,
&ldquo;Hacker&rdquo; signifies someone who is very good at coming up with clever
and interesting solutions to any sort of problem. Eric Raymond writes
about the definition of a hacker in his guide, &ldquo;How to Become a
Hacker&rdquo;:</p>

<blockquote><p>&ldquo;There is a community, a shared culture, of expert programmers and
networking wizards that traces its history back through decades to
the first time-sharing minicomputers and the earliest ARPAnet
experiments. The members of this culture originated the term
‘hacker’. Hackers built the Internet. Hackers made the Unix
operating system what it is today. Hackers make the World Wide Web
work.&rdquo;</p></blockquote>

<p>When I saw the name &ldquo;Hacker School,&rdquo; I was immediately intrigued and
needed to investigate. The Hacker School website self-describes the
program as &ldquo;like a writer&rsquo;s retreat for programmers.&rdquo; It is organized
into three &ldquo;batches&rdquo; per year, where each batch is made up of roughly
60 people. A batch consists of all the people coming together to work
in a shared space in New York City for a period of three months. The
primary purpose of Hacker School is to help participants grow
significantly as programmers. This is what they have to say about
their pedagogy:</p>

<blockquote><p>&ldquo;&hellip;Hacker School is largely unstructured, self-directed, and
project-based. That&rsquo;s because we value internal motivation over
external motivation, and self-direction over coercion. We believe
people learn best when they have the freedom to explore their
interests and passions, surrounded by friendly and intellectually
curious peers and mentors.&rdquo;</p></blockquote>

<p>I had two major emotional reactions as I read more of Hacker School&rsquo;s
website: elation, and frustration. Both emotions were highly familiar
to me. These feelings were almost identical to my first experience
with the <em>Teenage Liberation Handbook</em>.</p>

<p>This last year has been a trial for me academically. I have taken the
heaviest loads of my entire college career during these last three
quarters. I have sustained my motivation to do this by remembering how
near I am to completing this dreadful prerequisite to the rest of my
life. When I started to understand what Hacker School was, some
crucial part of this motivation broke.</p>

<p>Through my experiences during the time I took off after my junior year
I managed to convince myself that I needed to finish my Computer
Science degree in order to find work as a programmer. That conviction
is part of what I was looking for when I took that time off. I was
unsure how meaningful my degree would be, and that was preventing me
from being fully committed. The difficulty I had simply getting
responses to my resume, and what I learned talking to professional
programmers, managed to convince me of the utility of finishing my
degree.</p>

<p>Hacker School promises that there is a different path. Once again, I
find myself in the position of asking &ldquo;Why didn&rsquo;t I know about this?&rdquo;
The synchronicity of this is amazing: I dropped all my classes just
weeks after the second Hacker School batch began. If I had known about
it, I might have followed an entirely different path.</p>

<p>What is it about our society that these less travelled paths are so
invisible? In much of our literature and art we venerate those who
take these alternate paths. Daniel Quinn unintentionally proposes a
partial answer in his books <em>Ishmael</em>, <em>My Ishmael</em>, and <em>The Story of
B</em>. The basic idea that he writes about is that the dominant culture
in the world today is essentially formed around a single idea: that
there is one right way to live.</p>

<p>There is a great deal more to his analysis. One of the most important
pieces to me is that our cultural paradigm is such that we can be told
by others how we should live, but it is taboo to try and discover it
for ourselves. Why is that so? Does it have to be that way? Or can we
as a society learn to continually re-evaluate what we are doing and
how we are living?</p>

<p>These questions are a fundamental part of the way I am trying to live
my life. They are my companions. My guides.</p>

<p>There is a set of practices in the programming world today that have
become something of a fad. It is most generally identified by the name
&ldquo;Agile Development.&rdquo; One of the original co-authors of the <em>Manifesto
for Agile Software Development</em> recently wrote a blog post entitled
&ldquo;Agile Is Dead (Long Live Agility).&rdquo; In it he describes the genesis of
the Manifesto and how the word Agile has subsequently been subverted
to the point of losing all meaning. Several times throughout the
article he mentions the four values that brought about the original
Manifesto.</p>

<ul>
<li><em><strong>Individuals and Interactions</strong></em> over <em>Processes and Tools</em></li>
<li><em><strong>Working Software</strong></em> over <em>Comprehensive Documentation</em></li>
<li><em><strong>Customer Collaboration</strong></em> over <em>Contract Negotiation</em>, and</li>
<li><em><strong>Responding to Change</strong></em> over <em>Following a Plan</em></li>
</ul>


<p>Along with these four key values, the manifesto also contained a list
of practices that the founders associated with them. The second value
is the most directly tied to programming. Both the second and third
values are fairly tied to the world of business and programming. But I
think that the first and fourth values may actually be excellent
guides for living in a more universal sense.</p>

<p>The idea of living in a world were we value individuals and
interactions more than we value processes and tools is highly
appealing to me. I think it&rsquo;s telling to look at the people who
develop software and seeing them develop these ideas. Most of what we
do is to develop tools! I don&rsquo;t even know how to explain how important
I think the fourth value is.</p>

<p>Most importantly, with minor creative adaptation, the ideas that
surround these two values are applicable to the way that we inhabit
this planet we call home. I have many vague future plans for my
life. I know that something I feel strongly committed to is trying to
help change our modern culture from being so destructive towards the
planet. This sounds like a big job. But, as my friend Garrett likes to
keep saying &ldquo;You have to focus on the things that you can actually
begin to address.&rdquo; I whole-heartedly agree.</p>

<p>There are three problems that I&rsquo;ve been pondering during the last few
years. First, many people who are in the business of programming have
talked about how difficult it is to hire programmers. Particularly,
how it&rsquo;s really hard to hire good programmers. Second, I turned 18 and
entered the world of work just a year or two before the &ldquo;great
recession&rdquo; hit. One thing that I have noticed is that entry-level jobs
in pretty much every field out there have disappeared. What has
replaced them are internships; often unpaid. Third, during my time
working as a freelance programmer, I noticed that there was a certain
size of problem that is very awkward to try and solve. Large enough to
require experienced developers, but not quite large enough to justify
the resources required to hire the right caliber of professional.</p>

<p>These three problems have led me to the idea of creating a company
intended to address all three of these issues. I call it the Code
Academy. There are three core values that have guided my thoughts
about how the Academy would work.</p>

<p>First, everyone gets paid. In the society we live in today it simply
isn&rsquo;t feasible for most people to do work without being paid. It&rsquo;s
also incredibly unfair. The flip side to this is that everyone should
be paid commensurately to how much they are contributing.</p>

<p>Second, everyone will work on real projects. One of the most
detrimental things about the Computer Science program at Western - and
in universities in general - is that they invariably have students
work on &ldquo;toy projects.&rdquo; By this, I mean a couple of things. First, the
time students have to work on any one project is very limited. Worse,
it&rsquo;s limited in an artificial way, constricted by the bounds of a
single school &ldquo;unit,&rdquo; whether that is a quarter or a semester. Second,
because of the need for the university to rank students with grades,
most code is written by only one student. Collaboration, a key
component of all real-world programming, is actively disallowed under
the purview of academic dishonesty. Finally, somewhat corollary to the
first two, students get to write all of their code from scratch.</p>

<p>This is probably the worst of the &ldquo;toy code&rdquo; effects. In the
professional programming world, far less new code is written. In
general, there&rsquo;s a rule that &ldquo;code is read far more often than it is
written.&rdquo; A large part of any programmer&rsquo;s job is going to be dealing
with pre-existing code. Whether that will be in order to modify it to
do something new, or simply to fix minor imperfections or &ldquo;bugs&rdquo; in
it, most programmers spend a substantial portion of their time
attempting to read and understand code that other people have
written. This is simply not a skill that is taught or even given a
cursory mention in the typical Computer Science curriculum.</p>

<p>The final core value of my Code Academy is that the best way to learn
is to teach. I&rsquo;ve been a mentor for the CS department for nearly four
years now. During that time I have helped other students overcome a
wide range of issues. Many of the problems that they faced were issues
I never encountered in my own work. In addition, having to explain
complex programming topics to people with little background in it has
been a challenging task. I&rsquo;m reminded by a quote attributed to Albert
Einstein: &ldquo;If you can&rsquo;t explain it simply, you don&rsquo;t understand it
well enough.&rdquo; The efforts I have gone through to try and explain deep
and complex topics in Computer Science to novices and laymen alike has
deepened my own understanding of those topics immeasurably.</p>

<p>In the context of the Code Academy, teaching as learning will play an
extraordinarily important role. I see a system where as novices become
journeymen, they immediately become responsible for mentoring new
novices. This will help them solidify their own understanding.</p>

<p>This Code Academy is a long term dream. My conception of it is still
nascent. Also, I don&rsquo;t feel that I&rsquo;m currently qualified, or prepared
to undertake this particular journey. I still have a lot of growing to
do, both as a programmer. This is actually one of the reasons that I
am so looking forward to going to Hacker School. My Code Academy
springs from a desire to address similar problems that the Hacker School
founders are trying to ameliorate. But our approach is in some ways
fundamentally different. I hope to learn a lot from how Hacker School
is structured in addition to what I get out of being there as a student.</p>

<h3>Afterthought</h3>

<p>For the non-programmers in the audience, there is a small amount of
symbolism in the numbering of the sections. Since most programs grow
and change substantially throughout their life time, they are given
version numbers to help both the developers and their users
communicate about which iteration of the software is being used, or
has a problem. These version numbers typically have the form of two or
three integers separated by periods (i.e. &ldquo;1.0&rdquo; or &ldquo;1.0.0&rdquo;).</p>

<p>Each position has a specific meaning. The leftmost number indicates
the &ldquo;major version number.&rdquo; This is usually started at 1, and then
increases monotonically when major changes to the software are made. I
saw a picture on the internet recently that illustrates the level of
change I&rsquo;m talking about quite well. To explain what changes were made
for version 2.0.0 of some piece of software, the author said &ldquo;Rewrote
everything.&rdquo; It is usually expected that users will have to repurchase
the software in some fashion after major version increments.</p>

<p>The middle number is the minor version number. This is reserved for
significant updates to the product. Typically minor version updates
are the addition of minor new features or fixes. The final version
number, which is often omitted in software for &ldquo;end users&rdquo; - as
opposed to software that developers themselves use - is the patch
number. This is used for when very small fixes to minor flaws need to
be released.</p>

<p>The life-cycle of a piece of software starts out usually with either
no version number, or with a version of 0.1.0. The initial zero for
the major version means that this piece of software is still a work in
progress that is evolving too rapidly to justify updating the version
number every time changes are made.</p>

<p><sub>The original formatting of this paper (written in markdown,
compiled to LaTeX with pandoc and then into a pdf with pdflatex, all
orchestrated by a Makefile naturally :) had no major sections so every
section had a leading &ldquo;0.&rdquo;</sub></p>
]]></content>
  </entry>
  
</feed>
