<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Zephyrizing]]></title>
  <link href="http://www.zephyrizing.net/atom.xml" rel="self"/>
  <link href="http://www.zephyrizing.net/"/>
  <updated>2014-10-28T14:10:46-04:00</updated>
  <id>http://www.zephyrizing.net/</id>
  <author>
    <name><![CDATA[Geoff Shannon]]></name>
    <email><![CDATA[geoffpshannon@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Playing With Org-mode]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/10/27/playing-with-org-mode/"/>
    <updated>2014-10-27T18:30:05-04:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/10/27/playing-with-org-mode</id>
    <content type="html"><![CDATA[<p>So, as a way to procrastinate on actually starting to write/practice
my lightning talk for Thursday, I decided that I absolutely wanted to
make a slide show using the <a href="https://github.com/relevance/org-html-slideshow">org-html-slideshow</a>, a pretty neat piece
of Clojurescript written by those smart guys at
<del>Relevance</del> Cognitect.</p>

<p>Basically, it lets you take an outline/document written in <a href="http://orgmode.org/">Org-mode</a>
(another really cool piece of software!) and put some small
annotations in it to delimit your &ldquo;slides&rdquo; and then you have a
document that can be viewed as either a slideshow, or a web page. It&rsquo;s
harder to explain in words than it is to observe, so here&rsquo;s the
<a href="http://www.zephyrizing.net/demos/example.html">example page</a> from their github repo, and the
<a href="http://www.zephyrizing.net/demos/example.org">org-mode document</a> that produced that page.</p>

<!--more-->


<p>Now that is pretty neat. However, the workflow needed to create one of
these is sort of a pain. From the documentation on the project page,
you&rsquo;re expected to create a one-off web site that has the contents of
this production folder available and then manually generate the
html document from the org-mode source. Ick.</p>

<p>My blog is made with <a href="http://jekyllrb.com/">Jekyll</a>, which is a static site generator. None
of my posts are actually written in html, instead I write them in
<a href="http://daringfireball.net/projects/markdown/syntax">Markdown</a>, and then Jekyll handling converts the markdown into
html. When it does this I can also cause it to be inserted into a page
template (i.e. layout). The upshot is, I can create a static site but
not have to duplicate all of the code to have a common set of header
info, navigation toolbar, nifty sidebar etc. Because only the unique
things are specified in each document, and the general boilerplate is
automatically included for me by Jekyll.</p>

<p>So if I&rsquo;m generating html from markdown automatically with Jekyll it
feels sort of wrong to be generating html manually with an interactive
emacs command and then committing this generated html into my git
repo. It would be so much nicer if I could just get Jekyll to invoke
emacs as the translator for turning <code>.org</code> files into <code>.html</code> files.</p>

<p>Well, pursuing that line of thought today I worked with
<a href="https://github.com/wallyqs">Waldemar Quevedo</a>. He showed me his incredible org-based workflow for
everything (he also gave an awesome lightning talk on it the first
week of Hacker School!). While it looks really cool, it&rsquo;s sort
heavy-weight for what I want to do. Frankly, I&rsquo;m really comfortable
writing markdown, so I&rsquo;ll probably continue to write most of my posts
in it. But org-html-slideshow is exciting enough that I&rsquo;d be willing
to write my presentations in Org-mode so I can utilize it.</p>

<p>I won&rsquo;t attempt to explain Wally&rsquo;s setup, but he&rsquo;s got some
<a href="https://github.com/wallyqs/org-ruby">pretty</a> <a href="https://github.com/eggcaker/jekyll-org">cool</a> <a href="https://github.com/punchagan/org-hyde">stuff</a> going on. In essence
though, he uses a ruby gem to parse the org syntax and transform it
into markdown. As of this writing though, it doesn&rsquo;t support the tags
feature that org-html-slideshow depends on for it&rsquo;s functionality.</p>

<p>While showing Wally the slideshow thing got him excited to try and
integrate it into his workflow, I started poking around and looking at
how to integrate it into my site. The solution I decided on was to
make <code>.org</code> files a generic member of the Jekyll source files. This
means that they&rsquo;ll still use a YAML frontmatter to mark that they need
to be transformed. This means that I need some way to transform a body
of org text into just the html content that it represents. Normally
when you generate an html page from org-mode, you get a complete html
page, <code>html</code>, <code>body</code> tags and all. What I needed was a way to invoke
the org->html transformation using the Elisp code in org-mode from
Jekyll.</p>

<p>With Wally&rsquo;s help, I was able to get this far towards that goal. This
is the elisp that will continuously read from the minibuffer until an
error occurs, and then transform that text using the org->html backend,
and finally print out the generated html.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='common-lisp'><span class='line'><span class="p">(</span><span class="k">progn</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;org</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="k">progn</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">condition-case</span> <span class="no">nil</span>
</span><span class='line'>        <span class="p">(</span><span class="nv">while</span> <span class="no">t</span>
</span><span class='line'>          <span class="p">(</span><span class="nv">insert</span> <span class="p">(</span><span class="nv">read-string</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="s">&quot;\n&quot;</span><span class="p">))</span>
</span><span class='line'>      <span class="p">(</span><span class="nb">error</span> <span class="no">nil</span><span class="p">))</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">set-buffer</span>
</span><span class='line'>     <span class="p">(</span><span class="nv">org-export-to-buffer</span> <span class="ss">&#39;html</span> <span class="s">&quot;*Org HTML Export*&quot;</span>
</span><span class='line'>       <span class="no">nil</span> <span class="no">nil</span> <span class="no">nil</span> <span class="no">t</span> <span class="no">nil</span>
</span><span class='line'>       <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="no">t</span><span class="p">)))</span>
</span><span class='line'>       <span class="p">(</span><span class="nv">message</span> <span class="s">&quot;%s&quot;</span> <span class="p">(</span><span class="nv">buffer-string</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>And this is how you invoke the transformation of a file from org to
html. The <code>$emacs</code> is because I use <a href="http://emacsformacosx.com/">Emacs for Mac OSX</a> which means
that my emacs executable is buried inside of a mac <code>.app</code> file/folder
thing. Pipe a file into this script and if it&rsquo;s valid org syntax,
you&rsquo;ll get the corresponding html.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>tail -n+4 hello.org <span class="p">|</span> <span class="nv">$emacs</span> --batch --eval <span class="s2">&quot;(progn (require &#39;org) (progn (condition-case nil (while t (insert (read-string \&quot;\&quot;) \&quot;\\n\&quot;)) (error nil)) (set-buffer (org-export-to-buffer &#39;html \&quot;*Org HTML Export*\&quot; nil nil nil t nil (lambda () t))) (message \&quot;%s\&quot; (buffer-string))))&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now the only thing that&rsquo;s left is to write a Jekyll plugin to do this
invocation to produce the final output. <del>This is what I came up with
as a first attempt. Of course, it doesn&rsquo;t actually work for me,
because of the dumb location of my emacs executable&hellip; Oh well, that&rsquo;s
for tomorrow.</del></p>

<p><strong>Edit 10/28</strong>: So I spent the first half of today fixing this up.
Turned out to be more involved than I suspected. I had to evolve the
emacs lisp command enough that I actually made a separate git repo for
it. I fixed the problem of locating a proper emacs binary by deferring
to an appropriately named environment variable. I originally
implemented this shortcut by letting the user specify the location of
emacs in their <code>_config.yml</code>. But then I realized, this is not a
configuration that happens per-site, it&rsquo;s per machine so the site
config file is totally inappropriate. It&rsquo;s kind of annoying though
since if I forget to specify this environment variable then my site
generation won&rsquo;t work&hellip;</p>

<p>Anyhow, it works and as proof I made a version of the example
presentation that is <a href="http://www.zephyrizing.net/demos/example-plugin.html">generated by my plugin</a>, not by
hand. You don&rsquo;t have to take my word for it, but you will have to look
at the <a href="zephyrizing">git repository for this site</a>.</p>

<p>And here is the final code for my org-mode plugin generator:</p>

<figure class='code'><figcaption><span>&#8220;Org Converter&#8221;  (org_converter.rb)</span> <a href='//../plugins/org_converter.rb'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># A generator that uses a emacs invoked in batch mode to process</span>
</span><span class='line'><span class="c1"># org-mode files into html</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;open3&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">class</span> <span class="nc">OrgModeConverter</span> <span class="o">&lt;</span> <span class="no">Converter</span>
</span><span class='line'>    <span class="n">safe</span> <span class="kp">false</span>
</span><span class='line'>    <span class="n">priority</span> <span class="ss">:low</span>
</span><span class='line'>
</span><span class='line'>    <span class="vc">@@emacs_org_html_cmd</span> <span class="o">=</span> <span class="s2">&quot;(progn (require (quote org)) (setq org-html-head-include-default-style nil) (setq org-html-head-include-scripts nil) (condition-case nil (while t (insert (read-string </span><span class="se">\&quot;\&quot;</span><span class="s2">) </span><span class="se">\&quot;\n\&quot;</span><span class="s2">)) (error nil)) (set-buffer (org-export-to-buffer (quote html) </span><span class="se">\&quot;</span><span class="s2">*Org HTML Export*</span><span class="se">\&quot;</span><span class="s2"> nil nil nil t nil (lambda nil t))) (message </span><span class="se">\&quot;</span><span class="s2">%s</span><span class="se">\&quot;</span><span class="s2"> (buffer-string)))&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
</span><span class='line'>      <span class="n">ext</span> <span class="o">=~</span> <span class="sr">/^\.org$/i</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">output_ext</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
</span><span class='line'>      <span class="s2">&quot;.html&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>      <span class="n">emacs_path</span> <span class="o">=</span> <span class="k">if</span> <span class="no">ENV</span><span class="o">.</span><span class="n">has_key?</span><span class="p">(</span><span class="s2">&quot;EMACS&quot;</span><span class="p">)</span>
</span><span class='line'>                     <span class="no">ENV</span><span class="o">[</span><span class="s2">&quot;EMACS&quot;</span><span class="o">]</span>
</span><span class='line'>                   <span class="k">else</span>
</span><span class='line'>                     <span class="sb">`which emacs`</span>
</span><span class='line'>                   <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="n">emacs_path</span><span class="o">.</span><span class="n">empty?</span>
</span><span class='line'>        <span class="nb">puts</span> <span class="s2">&quot;Could not find an emacs executable.&quot;</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>        <span class="n">out</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="no">Open3</span><span class="o">.</span><span class="n">capture2e</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">emacs_path</span><span class="si">}</span><span class="s2"> --batch --eval &quot;</span> <span class="o">+</span>
</span><span class='line'>                                      <span class="s2">&quot;</span><span class="si">#{</span><span class="vc">@@emacs_org_html_cmd</span><span class="o">.</span><span class="n">inspect</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span class='line'>                                      <span class="ss">:stdin_data</span><span class="o">=&gt;</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>        <span class="n">out</span> <span class="k">unless</span> <span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[On the Importance of Distinguishing Between Stable and Development Documentation]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/10/26/on-the-importance-of-distinguishing-between-stable-and-development-documentation/"/>
    <updated>2014-10-26T23:10:04-04:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/10/26/on-the-importance-of-distinguishing-between-stable-and-development-documentation</id>
    <content type="html"><![CDATA[<p>A few weeks ago I wrote about <a href="http://www.zephyrizing.net/blog/2014/10/07/dot-dot-dot-and-this-is-why-master-should-be-stable/">Why Master Should Be Stable</a>. I
spent most of that post explaining what had actually happened to me,
but not really talking about the fundamental underlying difficulty.
Well, now that I&rsquo;ve encountered this issue again in a different
context, maybe it&rsquo;s time to dive in a bit and examine what I call the
Doc&rsquo;s Mismatch problem, and how it can be avoided.</p>

<!--more-->


<p>As the title hints, this issue is really more about being able to
match the documentation of a project to a particular version. The
problem with Flaskr was that when you went searching for the
documentation, you most easily found the documentation for the
currently in development branch. This isn&rsquo;t a problem when no major
changes have been made, but when there are major changes this becomes
an issue.</p>

<p>Part of the reason that I&rsquo;m writing this blog post is because last
week, while I was going through the <a href="http://llvm.org">LLVM</a> project&rsquo;s <a href="http://llvm.org/docs/tutorial/index.html">tutorial</a> I ran
into the exact same issue! But I didn&rsquo;t spot that this version
mismatch was the issue until after I had found another workaround.</p>

<p>Not to belabor the point, but basically the LLVM tutorial linked above
is actually the version of the tutorial written for the upcoming 3.6
release. Since there are several breaking changes to the API occurring
in this release, when you have installed LLVM 3.5 the tutorial appears
to be rather broken.</p>

<p>This problem is sort of ironic as the majority of open source software
out there (most definitely including all of my projects :) as
little-to-no documentation, and/or what there is, is hopelessly
out-of-date. In contrast, the issue that I had with both Flaskr and
LLVM was actually a case of the most easily available documentation
being TOO up-to-date.</p>

<h3>How can we do better?</h3>

<p>Let&rsquo;s contrast these experiences with a project that gets it right:
<a href="https://www.djangoproject.com/">Django</a>. First off, I just want to praise the Django project for
their excellent documentation in general. There is a lot of it, and it
is fairly well-written and clear. There is also a good mixture of the
<a href="http://jacobian.org/writing/great-documentation/what-to-write/">three types of documentation</a> that every project
needs.<code>&lt;/praise&gt;</code></p>

<p>Okay, now lets look at how Django avoids the Docs Mismatch
problem. First, look at the URL for the main
<a href="https://docs.djangoproject.com/en/1.7/">Django Documentation page</a>:
<code>https://docs.djangoproject.com/en/1.7/</code>.  Notice that <code>1.7</code> at the
end? That indicates what version of Django these docs are for. At the
time of this writing, 1.7 is the latest <strong>stable</strong> release of
Django. So, right away Django is doing well. By default the link on
the Django homepage takes you to this page.  And you can bet, that
when the next stable release of Django comes out, that homepage will
be updated to point at the 1.8 version.</p>

<p>However, there is still more that Django is getting fundamentally
right here. By embedding the version of the documentation in the URL,
they can host multiple different versions of the documentation. And
they do! This means that if you&rsquo;re forced to use an older version of
Django for whatever reason (legacy project, no install privileges
etc.) you can still go online to the Django website and find the
documentation for the version you&rsquo;re using. To make this even easier,
their documentation pages all have a permanent float in the bottom
right hand corner that shows the current version of the docs that
you&rsquo;re looking at, and has links to other recent versions of the
documentation.  How cool is that!</p>

<p>If you look at the links in that little floated element, you&rsquo;ll notice
a non-numbered version is available <code>dev</code>. This is the documentation
for the [current development head][djangodevdoc]. More importantly,
notice that this is the equivalent of the documentation that was
easiest for me to find when dealing with both LLVM and Flaskr. But
with Django I had to specifically go looking for it. Why? Because most
people don&rsquo;t want to read the docs for the development head.  And if
they do, they know it!</p>

<p>Django gets one more thing really right here. When you go to the dev
docs page, they automatically add a float at the top of the screen, in
an eye-catching color that effectively says: &ldquo;These are the dev
docs. Are you sure you want to be reading them? They&rsquo;re probably
different.&rdquo;</p>

<p>This last feature is really the key to avoiding the Docs Mismatch
problem. The development docs are fairly rarely what people want to be
reading when they first pick up a new project. So they shouldn&rsquo;t be
the easiest (or only!) documentation to find for your project.</p>

<h3>How do we fix it?</h3>

<p>The ideal situation is for your documentation to be structured like
Django&rsquo;s: multiple versions available, notifications when viewing the
dev version. The good news is that this is much easier to achieve
thany you might expect. <a href="https://readthedocs.org/">Read The Docs</a> makes it trivial to have this
kind of setup for your open source project. In fact, Django actually
uses Read The Docs for their own documentation. I highly recommend
checking out their page and seeing just how easy it is to set up for
your own projects. Of course, once you have this awesome system the
only issue is actually writing all the awesome documentation to
populate it&hellip;</p>

<h3>Other issues</h3>

<p>A primary problem with the Docs Mismatch issue is that the people who
notice it are typically people just wanting to use the project, not
the people developing it. This is especially problematic because these
people are also the most easily discouraged from using a project.</p>

<p>Another problem is that often - especially in older projects - fixing
the Docs Mismatch issue will require either access to a server, or
changes in a release deployment process or something similar. None of
these things are possible for a beginner in a project to do. This
means that the people the most motivated to fix the issue, are the
least able to do anything about it.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Adventures With Clojure Macros]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/10/14/adventures-with-clojure-macros/"/>
    <updated>2014-10-14T19:20:56-04:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/10/14/adventures-with-clojure-macros</id>
    <content type="html"><![CDATA[<p>So, this is the second day of my second week of <a href="https://www.hackerschool.com/">Hacker School</a>. I&rsquo;m
finally starting to feel like I&rsquo;m getting into the
groove. etc. etc. about stuff I&rsquo;ve been working on SICP, LLVM tut,
then on and off back to clojure stuff.  (aside about how good it is to
be able to move between different types of personal projects, gumption
etc.)</p>

<!--more-->


<p>So I tackled <a href="http://mitpress.mit.edu/books/design-concepts-programming-languages">DCPL</a> in Clojure once again. I found two sort of scary
things. One, although my code was in a git repo, it wasn&rsquo;t pushed to
Github. Two, there was a big hairy macro that had apparently replaced
the core of my postfix program, but it wasn&rsquo;t checked in!!! Bad past
Geoff, very bad, no good software practices&hellip;</p>

<p>Anyhow, so I cleaned things up, and pushed up to Github (it&rsquo;s
<a href="https://github.com/RadicalZephyr/postfix-clj">here</a> FYI), and then I started playing with that macro
again. Turns out it pretty much worked. After a bit of mucking around
I managed to get it going. This quick success buoyed my spirits and I
thought, why don&rsquo;t I write another&hellip; replacing repetitive code is
awesome etc.</p>

<p>Then there I wrote some tests, and it turns out that it didn&rsquo;t
actually work. Repeat for the better part of two hours with testing
getting slowly better and my implementation getting slowly more
correct. But, there were lots of little successes throughout, so I
didn&rsquo;t get discouraged, and the thrill of surmounting the difficulties
I encountered gave me a warm glow when I overcame them (macro writing
is hard! I know, because <a href="http://www.paulgraham.com/avg.html">Paul Graham told me so</a> ;).</p>

<p>Anyhow, my success at writing this one macro made me want to write
another.  And I immediately saw an opportunity!  All of the binary
math operations for postfix are going to have the exact same form,
even with the last macro I wrote. etc. etc. about that macro, goes
pretty smooth.</p>

<p>Anyhow, so that went alright and now there are a bunch of tests I want
to write, just to validate that my macro is producing reasonable code
and continues to do so.</p>

<p>But&hellip; these tests are going to be SOOOO similar!!!  Are you thinking
what I&rsquo;m thinking? Awww, yeah! Time for another macro.</p>

<p>So I start writing a macro to generate some simple tests for me.</p>

<p>All the tests have this general form:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="nf">deftest</span> <span class="nv">subcommand-test</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">testing</span> <span class="s">&quot;Sub command&quot;</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">sub-cmd</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'>           <span class="p">[</span><span class="mi">-1</span><span class="p">]))</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">sub-cmd</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'>           <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span><span class="p">]))</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="nf">thrown-with-msg?</span> <span class="nv">clojure.lang.ExceptionInfo</span>
</span><span class='line'>                          <span class="o">#</span><span class="s">&quot;sub: not enough values on the stack&quot;</span>
</span><span class='line'>                          <span class="p">(</span><span class="nf">sub-cmd</span> <span class="p">[</span><span class="mi">1</span><span class="p">])))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>So I start my macro working on that basic outline. Over the course of
another hour or so, I tweak and work it up to be this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defmacro </span><span class="nv">defbinary-op-test</span> <span class="p">[</span><span class="nv">cmd-name</span> <span class="nv">op</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">cmd-name</span> <span class="p">(</span><span class="nb">name </span><span class="nv">cmd-name</span><span class="p">)</span>
</span><span class='line'>        <span class="nv">fn-name</span>  <span class="p">(</span><span class="nb">symbol </span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span> <span class="s">&quot;-cmd&quot;</span><span class="p">))</span>
</span><span class='line'>        <span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>        <span class="nv">op-result</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="p">(</span><span class="nb">reverse </span><span class="nv">test-args</span><span class="p">)))]</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">prn </span><span class="s">&quot;test-args:&quot;</span> <span class="nv">test-args</span> <span class="s">&quot;\nop result:&quot;</span> <span class="nv">op-result</span><span class="p">)</span>
</span><span class='line'>    <span class="o">`</span><span class="p">(</span><span class="nf">testing</span> <span class="o">~</span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span> <span class="s">&quot; command&quot;</span><span class="p">)</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;=</span> <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="o">~</span><span class="nv">test-args</span><span class="p">)</span>
</span><span class='line'>              <span class="o">~</span><span class="nv">op-result</span><span class="p">))</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;=</span> <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="o">~</span><span class="p">(</span><span class="nb">into </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="nv">test-args</span><span class="p">))</span>
</span><span class='line'>              <span class="o">~</span><span class="p">(</span><span class="nb">into </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="nv">op-result</span><span class="p">)))</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;thrown-with-msg?</span> <span class="nv">clojure.lang.ExceptionInfo</span>
</span><span class='line'>                               <span class="p">(</span><span class="nb">re-pattern </span><span class="o">~</span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span>
</span><span class='line'>                                                 <span class="s">&quot;: not enough values on the stack&quot;</span><span class="p">))</span>
</span><span class='line'>                               <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="p">[</span><span class="mi">1</span><span class="p">]))))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Okay, it looks like a monster.  But it&rsquo;s pretty straightforward.
Since my binary ops are actually implemented by the core functions
they represent I&rsquo;m not concerned with the correctness or with testing
that they work per se. I&rsquo;m more concerned with the vectors going in
and coming out.  So I figure, I&rsquo;ll use the same numbers for all of
them, and have the macro generate the result of actually applying the
given binary operator to the data I&rsquo;ve hardcoded.</p>

<p>That&rsquo;s whats going inside the <code>let</code> with <code>test-args</code> and <code>op-result</code>.</p>

<p>There are a couple of other tricky things I found out. For instance,
the <code>is</code> testing macro is looking for exactly the symbol <code>=</code> not for
<code>clojure.core/=</code> or for <code>postfix.core-test/thrown-with-msg?</code>. I know,
because those are the things <code>defbinary-op-test</code> produced before I put
in the unquoted-quote <code>~'</code> to stop the automatic namespace resolution,
as described in the <a href="http://www.manning.com/fogus2/">Joy of Clojure</a>.</p>

<p>But then, after I debugged all of these little problems, I discovered
that, though my tests were being generated syntactically correctly,
they were failing!</p>

<p>Now, given the way that I constructed the macro, this didn&rsquo;t seem
possible.  I mean, I&rsquo;m literally testing that my command, which uses
the given operator, produces the same thing as that operator.</p>

<p>So I dig in to make sure my macro is doing the right stuff, and pull
out <code>(clojure.pprint/pprint (macroexpand-1 '(defbinary-op-test add
+)))</code></p>

<p>which produces this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="nf">clojure.test/testing</span>
</span><span class='line'> <span class="s">&quot;add command&quot;</span>
</span><span class='line'> <span class="p">(</span><span class="nf">clojure.test/is</span> <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">add-cmd</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span> <span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
</span><span class='line'> <span class="p">(</span><span class="nf">clojure.test/is</span> <span class="p">(</span><span class="nb">= </span><span class="p">(</span><span class="nf">add-cmd</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">3</span> <span class="mi">1</span><span class="p">])</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">3</span><span class="p">]))</span>
</span><span class='line'> <span class="p">(</span><span class="nf">clojure.test/is</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">thrown-with-msg?</span>
</span><span class='line'>   <span class="nv">clojure.lang.ExceptionInfo</span>
</span><span class='line'>   <span class="p">(</span><span class="nf">clojure.core/re-pattern</span> <span class="s">&quot;add: not enough values on the stack&quot;</span><span class="p">)</span>
</span><span class='line'>   <span class="p">(</span><span class="nf">add-cmd</span> <span class="p">[</span><span class="mi">1</span><span class="p">]))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Okay, okay everything looks good&hellip; Wait a second&hellip; Did the macro
produce the result that 3 + 1 is 3?  Okay, let&rsquo;s take a closer look at
that macro again. Specifically, the two relevant portions of the let:</p>

<pre><code>test-args [3 1]
op-result (vector (apply op (reverse test-args)))]
</code></pre>

<p>and the part where <code>op-result</code> is used:</p>

<pre><code>(is (~'= (~fn-name ~test-args)
       ~op-result))
</code></pre>

<p>Okay, everthing looks pretty kosher, but to be sure, let&rsquo;s try it out
in the repl, with the appropriate values filled in.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">op</span> <span class="nv">+</span>
</span><span class='line'>      <span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]]</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="p">(</span><span class="nb">reverse </span><span class="nv">test-args</span><span class="p">))))</span>
</span><span class='line'><span class="c1">;; =&gt; [4]</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s correct.  But that macroexpand clearly shows a <code>[3]</code> where that
<code>[4]</code> should be.</p>

<p>Okay, maybe I didn&rsquo;t reproduce something correctly in the REPL.  Let&rsquo;s
put some print statements in the macro before the expansion</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defmacro </span><span class="nv">defbinary-op-test</span> <span class="p">[</span><span class="nv">cmd-name</span> <span class="nv">op</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">cmd-name</span> <span class="p">(</span><span class="nb">name </span><span class="nv">cmd-name</span><span class="p">)</span>
</span><span class='line'>        <span class="nv">fn-name</span>  <span class="p">(</span><span class="nb">symbol </span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span> <span class="s">&quot;-cmd&quot;</span><span class="p">))</span>
</span><span class='line'>        <span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>        <span class="nv">op-result</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="p">(</span><span class="nb">reverse </span><span class="nv">test-args</span><span class="p">)))]</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">prn </span><span class="s">&quot;test-args:&quot;</span> <span class="nv">test-args</span> <span class="s">&quot;op result:&quot;</span> <span class="nv">op-result</span><span class="p">)</span>
</span><span class='line'>    <span class="o">`</span><span class="p">(</span><span class="nf">testing</span> <span class="o">~</span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span> <span class="s">&quot; command&quot;</span><span class="p">)</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;=</span> <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="o">~</span><span class="nv">test-args</span><span class="p">)</span>
</span><span class='line'>              <span class="o">~</span><span class="nv">op-result</span><span class="p">))</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;=</span> <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="o">~</span><span class="p">(</span><span class="nb">into </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="nv">test-args</span><span class="p">))</span>
</span><span class='line'>              <span class="o">~</span><span class="p">(</span><span class="nb">into </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="nv">op-result</span><span class="p">)))</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">is</span> <span class="p">(</span><span class="o">~</span><span class="ss">&#39;thrown-with-msg?</span> <span class="nv">clojure.lang.ExceptionInfo</span>
</span><span class='line'>                               <span class="p">(</span><span class="nb">re-pattern </span><span class="o">~</span><span class="p">(</span><span class="nb">str </span><span class="nv">cmd-name</span>
</span><span class='line'>                                                 <span class="s">&quot;: not enough values on the stack&quot;</span><span class="p">))</span>
</span><span class='line'>                               <span class="p">(</span><span class="o">~</span><span class="nv">fn-name</span> <span class="p">[</span><span class="mi">1</span><span class="p">]))))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>When I reload the namespace I get this:</p>

<pre><code>:reloading (postfix.core postfix.core-test)
"test-args:" [3 1] "op result:" [3]
"test-args:" [3 1] "op result:" [3]
"test-args:" [3 1] "op result:" [3]
"test-args:" [3 1] "op result:" [3]
</code></pre>

<p>Okay, that&rsquo;s clearly what&rsquo;s happening but it&rsquo;s still really strange
that the <code>[3]</code> is showing up at all. So how about a
<a href="https://en.wikipedia.org/wiki/Minimal_Working_Example">minimal working example</a> (or rather, not-working in this case)?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defmacro </span><span class="nv">deftestaddproblem</span> <span class="p">[</span><span class="nv">op</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>        <span class="nv">op-result</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="p">(</span><span class="nb">reverse </span><span class="nv">test-args</span><span class="p">)))]</span>
</span><span class='line'>    <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">test-args</span> <span class="o">~</span><span class="nv">op-result</span><span class="p">]))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then macroexpanding it:</p>

<pre><code>(clojure.pprint/pprint (macroexpand-1 '(deftestaddproblem +)))
[[3 1] [3]]
</code></pre>

<p>Just for sanity, lets make sure it&rsquo;s the right version of <code>+</code>:</p>

<pre><code>(clojure.pprint/pprint (macroexpand-1 '(deftestaddproblem clojure.core/+)))
[[3 1] [3]]
</code></pre>

<p>What is going on!?!?!?!?! Okay, back to the REPL. This time, a raw
REPL from <code>lein repl</code> in my home directory.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest</span> <span class="p">[</span><span class="nv">op</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">op-result</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="p">(</span><span class="nb">reverse </span><span class="nv">test-args</span><span class="p">)))]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>     <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">test-args</span> <span class="o">~</span><span class="nv">op-result</span><span class="p">]))</span>
</span><span class='line'><span class="o">#</span><span class="ss">&#39;user/dotest</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest</span> <span class="nv">+</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest</span> <span class="nv">-</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest</span> <span class="nv">*</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest</span> <span class="nv">/</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;;; And without using the macro preprocessing</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply + </span><span class="p">(</span><span class="nb">reverse </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])))</span>
</span><span class='line'><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply - </span><span class="p">(</span><span class="nb">reverse </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])))</span>
</span><span class='line'><span class="p">[</span><span class="mi">-2</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply * </span><span class="p">(</span><span class="nb">reverse </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])))</span>
</span><span class='line'><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">vector </span><span class="p">(</span><span class="nb">apply / </span><span class="p">(</span><span class="nb">reverse </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])))</span>
</span><span class='line'><span class="p">[</span><span class="mi">1</span><span class="nv">/3</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; Removing more complexity...</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest2</span> <span class="p">[</span><span class="nv">op</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">test-args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">op-result</span> <span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="nv">test-args</span><span class="p">)]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>    <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">test-args</span> <span class="o">~</span><span class="nv">op-result</span><span class="p">]))</span>
</span><span class='line'><span class="o">#</span><span class="ss">&#39;user/dotest2</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest2</span> <span class="nv">+</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest2</span> <span class="nv">-</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest2</span> <span class="nv">*</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest2</span> <span class="nv">/</span><span class="p">)</span>
</span><span class='line'><span class="p">[[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; And again outside of the macro</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply + </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'><span class="mi">4</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply - </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'><span class="mi">2</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply * </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'><span class="mi">3</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply / </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'><span class="mi">3</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; More experiments</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest3</span> <span class="p">[]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">+-res</span> <span class="p">(</span><span class="nb">apply + </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">--res</span> <span class="p">(</span><span class="nb">apply - </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">*-res</span> <span class="p">(</span><span class="nb">apply * </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">div-res</span> <span class="p">(</span><span class="nb">apply / </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">])]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>    <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">+-res</span> <span class="o">~</span><span class="nv">--res</span> <span class="o">~</span><span class="nv">*-res</span> <span class="o">~</span><span class="nv">div-res</span><span class="p">]))</span>
</span><span class='line'><span class="mi">3</span><span class="o">#</span><span class="ss">&#39;user/dotest3</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest3</span><span class="p">)</span>
</span><span class='line'><span class="p">[</span><span class="mi">4</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; And another</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest4</span> <span class="p">[]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">args</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">1</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">+-res</span> <span class="p">(</span><span class="nb">apply + </span><span class="nv">args</span><span class="p">)</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">--res</span> <span class="p">(</span><span class="nb">apply - </span><span class="nv">args</span><span class="p">)</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">*-res</span> <span class="p">(</span><span class="nb">apply * </span><span class="nv">args</span><span class="p">)</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>         <span class="nv">div-res</span> <span class="p">(</span><span class="nb">apply / </span><span class="nv">args</span><span class="p">)]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>    <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">+-res</span> <span class="o">~</span><span class="nv">--res</span> <span class="o">~</span><span class="nv">*-res</span> <span class="o">~</span><span class="nv">div-res</span><span class="p">]))</span>
</span><span class='line'><span class="o">#</span><span class="ss">&#39;user/dotest4</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest4</span><span class="p">)</span>
</span><span class='line'><span class="p">[</span><span class="mi">4</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">3</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; This might be important...</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest5</span> <span class="p">[</span><span class="nv">op</span> <span class="nv">args</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">res</span> <span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="nv">args</span><span class="p">)]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>    <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">op</span> <span class="o">~</span><span class="nv">args</span> <span class="o">~</span><span class="nv">res</span><span class="p">]))</span>
</span><span class='line'><span class="o">#</span><span class="ss">&#39;user/dotest5</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest5</span> <span class="nb">+ </span><span class="p">[</span><span class="mi">3</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'><span class="nv">ArityException</span> <span class="nv">Wrong</span> <span class="nv">number</span> <span class="nv">of</span> <span class="nv">args</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="nv">passed</span> <span class="nv">to</span><span class="err">:</span> <span class="nv">Symbol</span>  <span class="nv">clojure.lang.Compiler.macroexpand1</span> <span class="p">(</span><span class="nf">Compiler.java</span><span class="ss">:6557</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; Or not... may just be a problem</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="kd">defmacro </span><span class="nv">dotest5</span> <span class="p">[</span><span class="nv">op</span> <span class="nv">args</span><span class="p">]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>   <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">res</span> <span class="p">(</span><span class="nb">apply </span><span class="nv">op</span> <span class="nv">args</span><span class="p">)]</span>
</span><span class='line'>  <span class="o">#</span><span class="nv">_=&gt;</span>  <span class="o">`</span><span class="p">[</span><span class="o">~</span><span class="nv">args</span> <span class="o">~</span><span class="nv">res</span><span class="p">]))</span>
</span><span class='line'><span class="o">#</span><span class="ss">&#39;user/dotest5</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">dotest5</span> <span class="nb">+ </span><span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'><span class="p">[[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">]</span> <span class="mi">2</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; For sanity checking purposes, since apply can only be used with</span>
</span><span class='line'><span class="c1">;; functions</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">fn?</span> <span class="nv">+</span><span class="p">)</span>
</span><span class='line'><span class="nv">true</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">fn?</span> <span class="nv">-</span><span class="p">)</span>
</span><span class='line'><span class="nv">true</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">fn?</span> <span class="nv">*</span><span class="p">)</span>
</span><span class='line'><span class="nv">true</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">fn?</span> <span class="nv">/</span><span class="p">)</span>
</span><span class='line'><span class="nv">true</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; And as Kevin Lynagh helpfully pointed out to me, macros don&#39;t</span>
</span><span class='line'><span class="c1">;; evaluate their arguments...  Time to re-read the section on macros</span>
</span><span class='line'><span class="c1">;; in Joy of Clojure</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply </span><span class="ss">&#39;+</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'><span class="mi">2</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nb">apply </span><span class="p">(</span><span class="nb">eval </span><span class="ss">&#39;+</span><span class="p">)</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">])</span>
</span><span class='line'><span class="mi">3</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hacker School: Week 1 Review]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/10/11/hacker-school-week-1-review/"/>
    <updated>2014-10-11T04:48:52-04:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/10/11/hacker-school-week-1-review</id>
    <content type="html"><![CDATA[<p>So, I can&rsquo;t sleep, and it&rsquo;s the end of my first week at
<a href="https://www.hackerschool.com/">Hacker School</a>, so I thought I&rsquo;d do some reflecting on what I did,
why I&rsquo;m here and similar topics.</p>

<!--more-->


<h2>Week Review</h2>

<h3>Monday</h3>

<p>This week has been a blur in some ways and incredibly long in others.
I started out on Monday with an interesting but ultimately abortive
attempt to pair with Alyssa Carter on her observational type system
implementation in Idris. Given that I know pretty much nothing about
either type theory or Idris, this outcome was probably somewhat
inevitable.  In retrospect, while it was interesting to get some
exposure to the ideas and concepts that she talked about, I probably
should have admitted more freely when things she was saying were going
over my head. This is something that I&rsquo;ve always struggled with, and I
think that Hacker School is a great place to try and tackle getting
over it.</p>

<p>The rest of Monday I spent flailing. And not really with any code;
mostly with just getting familiarized with Zulip and the HS (physical)
environment, and turning off most notifications in Zulip.  I
discovered an interesting thing about myself that I hadn&rsquo;t been fully
aware of previously: when there are constant notifications happening
(like when you&rsquo;re highly subscribed to Zulip and desktop notifications
are turned on), I get really stressed out on a subconscious level.</p>

<p>It&rsquo;s sort of similar to how I start to feel inexplicably rushed when
my bladder is getting full, but before I actually notice the urge to
pee.</p>

<p>Anyhow, during my flailing I also poked a bit at my
<a href="https://github.com/RadicalZephyr/snake-puzzle-solver">snake-puzzle-solver</a> project, and discovered that I&rsquo;d left it in a
sort of broken-ish state.</p>

<h3>Tuesday</h3>

<p>On Tuesday I felt much calmer. I&rsquo;m having a hard time remembering now
what exactly I worked on. I believe it was working through
<em><a href="https://realworldocaml.org/">Real World OCaml</a></em> though.  I didn&rsquo;t get very far, but I also spent
a bit of time <a href="http://www.zephyrizing.net/blog/2014/10/07/dot-dot-dot-and-this-is-why-master-should-be-stable/">helping Sammy out</a>, and fixing up this
blog with Octopress.</p>

<h3>Wednesday</h3>

<p>Through some poor decision-making Tuesday evening (i.e. eating two
slices of pizza, and also drinking a not inconsiderable amount) I was
either very gluten-sick or very, very hungover on Wednesday. No good,
very bad feels were had all day. At the time I was fairly convinced
that it was the pizza. In retrospect, the symptoms were very
hangover-like. Perhaps I just got much drunker than I thought I did?
Hard to say.</p>

<h3>Thursday</h3>

<p>On Thursday I powered through the first third or so of <em>Real World
OCaml</em>. That was awesome. OCaml is a fascinating language, and even
though it has perhaps more than it&rsquo;s share of syntactic quirks it&rsquo;s
been fun learning it. On a slightly meta-level I was sort of
dissatisfied throughout the day because of my (mostly self-imposed)
isolation. Not using Zulip much - because of how distracting it is -
makes me feel a bit cut-off from some of the social aspects of HS. And
I still haven&rsquo;t really found the courage to seek out somebody to pair
with. Another thing I want to work on. Also, the fact that I was doing
something so ordinary and mundane as simply reading a book made me
feel bad. Reading a book on a new language and working through the
code examples is something that I can, have, and - most likely - will
do again at home. So why am I &ldquo;wasting&rdquo; my time at Hacker School,
precious, precious time that it is, doing it here? Particularly since
I&rsquo;m doing it alone!!</p>

<p>I don&rsquo;t really have answers to most of these dissatisfactions. Most of
them are probably just my social awkwardness manifesting, and the last
one sounds suspiciously like a strange form of Imposter Syndrome.</p>

<p>I stayed late in the evening though and started working on a neat
project that occurred to me when I suggested that another HS&#8217;er work
through Phil Nelson&rsquo;s minishell - implementing the minishell in
OCaml!! And even more importantly, I achieved a real-feeling amount of
success in the project! I was able, without any real documentation
(couldn&rsquo;t find accurate docs!) to utilize the OCaml Unix module well
enough to create the equivalent of the <code>minishell.c</code> that Nelson gives
out as the basis for the shell, and to complete the equivalent of
assignment 1.</p>

<h3>Friday</h3>

<p>I somehow gained the impression that showing up at the space was less
expected on Friday. Now I&rsquo;m really not sure where/how I got that
idea.  But I&rsquo;m also totally unsure if it&rsquo;s actually wrong&hellip; >:(</p>

<p>I did however use the day to catch up on some sleep, do some errands
(digital ones anyhow) and go hang out with a friend I haven&rsquo;t seen in
literally years. So, overall win even if I did totally miss out on a
HS day.  But again, it makes me feel sort of disconnected to be not at
the space when others are.</p>

<h2>Project Ideas</h2>

<p>Given some of my meta-dissatisfaction that I felt on Thursday
regarding what I&rsquo;ve been working on, I thought I might try to list
some other projects that seem more &ldquo;Hacker School worthy&rdquo;.</p>

<p>Looking to the <a href="https://www.hackerschool.com/manual#sec-principles">three traits of an awesome Hacker Schooler</a>,
I started thinking about what are some challenging (strive for
greatness) problems that I could approach with rigor.</p>

<ul>
<li>Dive into the bug in auto-fill in emacs, try to fix it</li>
<li>Pursue learning more graphics stuff (since I&rsquo;ve been sort of
intimidated by it for a while). Project-wise, it might be
interesting to try and discover what sort of work it would take to
update Emacs&#8217; rendering engine.</li>
<li>Try to dive into the Boomerang decompiler&rsquo;s source code and
understand it</li>
</ul>


<p>And some other random things I want to do (but might not be feasible):</p>

<ul>
<li>Implement a language that has lispy-prefix syntax but OCaml
semantics; in particular that has type-inferencing</li>
<li>To that end, implement the type inferencing engine that powers OCaml
type inferences</li>
<li>Port Boomerang to use the LLVM architecture</li>
</ul>


<h2>Final Thoughts</h2>

<p>It&rsquo;s frustrating how many of the things that I want to do still have
what seems like huge mounds of prerequisites in front of them. I want
to do all of these interesting language things, but I feel like I&rsquo;m
blocked from doing them because I want to do them in LLVM, but I don&rsquo;t
know anything about actually using the LLVM.</p>

<p>Also, when I was reflecting on what I need to do to become a better
programmer, one of the recurring thoughts I responded with is that I
need to write/work on a larger system/project. I feel like I have
quite a bit of experience taking an small projects. But not something
like YRAS&hellip; Which, I think, is one reason that I am absolutely
terrified of starting that project.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[... And This Is Why Master Should Be Stable]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/10/07/dot-dot-dot-and-this-is-why-master-should-be-stable/"/>
    <updated>2014-10-07T13:28:48-04:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/10/07/dot-dot-dot-and-this-is-why-master-should-be-stable</id>
    <content type="html"><![CDATA[<p>Second day at Hacker School.  I spent the morning doing two things:</p>

<ul>
<li>getting my blog setup to use <a href="http://octopress.org/">Octopress</a>.</li>
<li>helping another HS-er troubleshoot getting setup with <a href="http://flask.pocoo.org/">Flask</a> and <a href="http://flask.pocoo.org/docs/0.10/tutorial/introduction/">Flaskr</a>.</li>
</ul>


<!--more-->


<p>Yesterday, I was super frustrated by the difficulties I had in getting
Octopress going, and was reminded of the frustrations with setting up
Ruby environments that led me to wipe my computer and start from
scratch a few weeks ago.  You know, that and a certain amount of boredom.</p>

<p>Anyhow, I was able to make more headway today, largely because I
sorted out all of the really silly stuff yesterday.</p>

<p>But helping Sammy with setting up <a href="http://flask.pocoo.org/">Flask</a> was a nightmare!  TL;DR, we
figured it out, and it was incredibly simple.</p>

<p>First off, there were some minor SNAFU&rsquo;s with me showing her about
[virtualenv], and explaining briefly how it works and how why she
should use it.  But then, we were confronted with these instructions
on the <a href="https://github.com/mitsuhiko/flask/tree/master/examples/flaskr">Flaskr doc page</a> on Github, a natural place to
look when the <a href="http://flask.pocoo.org/docs/0.10/tutorial/introduction/">&ldquo;actual&rdquo; docs</a> don&rsquo;t mention anything about how
to install or setup the damn thing.</p>

<p>We spent nearly two and a half hours searching for the mythical
<code>flask</code> binary, to no avail.  Finally, after I inadvertently ran
aacross this <a href="https://github.com/mitsuhiko/flask/issues/1180">flask issue</a>, it dawned on me that we might be
having the same problem.  Well, that&rsquo;s not quite true.  In reality, I
got so frustrated that I decided to just try the simplest thing that I
could think of to get flaskr to run <code>python flaskr.py</code>.  Low and
behold, it worked!!  Then, in retrospect, having seen that issue
describing the disconnect between the docs for flaskr in the flask
<code>master</code> branch and what the latest stable version was, I went and
looked at the <a href="https://github.com/mitsuhiko/flask/tree/0.10.1/examples/flaskr">last stable release docs</a> for Flaskr, and
there it was. Simple instructions to do the simple, straightforward
thing.</p>

<p>[[virtualenv]: <a href="http://virtualenv.readthedocs.org/en/latest/virtualenv.html">http://virtualenv.readthedocs.org/en/latest/virtualenv.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Keybase Hacker News Q&A]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/06/12/keybase-hackernews-q-and-a/"/>
    <updated>2014-06-12T00:00:00-04:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/06/12/keybase-hackernews-q-and-a</id>
    <content type="html"><![CDATA[<p>I started using <a href="https://keybase.io">Keybase</a> sometime back in April. I&rsquo;ve been interested
in doing crypto stuff for a long time, starting with using an SSH
keypair instead of a password to access the WWU CS department&rsquo;s
computer labs remotely.</p>

<p>Learning more about GPG and actually figuring out how to send and
receive encrypted messages has been on my list of things to learn for
a while, but every time I had a couple spare minutes and tried to
approach it I was rebuffed by the impenetrability of the manuals for
gpg.</p>

<p>However, recently while thinking about who to give my remaining five
invites to, I decided to do some more research on what those more
security-savvy than I thought about Keybase.</p>

<!--more-->


<p>The results were somewhat of a mixed bag. In no particular order, I
read:</p>

<ul>
<li><a href="http://blog.lrdesign.com/2014/03/thoughts-on-keybase-io/">A thoughtful critique</a></li>
<li><a href="http://www.tbray.org/ongoing/When/201x/2014/03/19/Keybase">A nice first look</a></li>
<li><a href="https://filippo.io/on-keybase-dot-io-and-encrypted-private-key-sharing/">A response to the people decrying the upload private key feature</a></li>
<li><a href="http://blog.lizdenys.com/2014/03/31/refusing-to-verify-myself/">A brief look at the chain of trust in even getting Keybase</a></li>
</ul>


<p>I also came across the discussion that occurred on Hacker News shortly
after Keybase first appeared. As so often happens when I stumble on to
a HN comment page, I ended up reading the whole thing. What I noticed
was that there seems to be some information from Max and Chris (the
founders of Keybase) that I hadn&rsquo;t run across on the Keybase website
itself.</p>

<p>So I volunteered myself for a public service. I extracted the parts of
the discussion that were interesting and relevant into a text
document. I tried to focus on the questions that got interesting
responses. I left out many little asides, and tangential discussions.</p>

<p>The founders of Keybase are malgorithms and maxtaco. Most of the
answers are by them, though in some cases I&rsquo;ve preserved a chain of
replies, with only the first marked as a &ldquo;question&rdquo;. Without further
ado:</p>

<blockquote><h3>General Announcement</h3>

<p>malgorithms 118 days ago</p>

<p>There were multiple questions/comments below about this, so I felt I
should clarify one detail about the keybase client&rsquo;s trust of the
server. When the keybase client requests maria&rsquo;s key from the keybase
server, it does not simply trust the public key because it trusts the
server (or uses https - huh?).</p>

<p>Rather, the server replies with links to tweets, gists, etc. &ndash;
maria&rsquo;s public identity proofs. The keybase client does not trust that
these are honest, so it scrapes them directly and makes sure they were
signed by the same public key that the server provided. In other
words, the server could reply with a different maria, and simply lie,
but not with the real maria&rsquo;s github or twitter account.</p>

<p>The server could also lie by omission, leaving out an identity. But it
cannot invent ones that do not exist, without the client knowing.</p>

<p>Again, the premise here is that maria is the sum of her online
identities.</p>

<p>The website itself is of course a different story. When you look up
maria on keybase&rsquo;s website, you are trusting that keybase.io did not
lie about her github account. Fortunately you can confirm by following
the link to her gist, where she announced her keybase username and
posted her key fingerprint.</p>

<h3>Q:</h3>

<p>theboss 118 days ago</p>

<p>I don&rsquo;t see why you don&rsquo;t just get the key once, allow you to verify
it, and store it locally. It seems pointless to make all these extra
requests to you.</p>

<p>There&rsquo;s a reason that gpg does this&hellip;.. Maria&rsquo;s twitter being hacked,
Maria&rsquo;s github being hacked, Maria&rsquo;s Keystore being hacked&hellip;.a lot
can go wrong.</p>

<p>There are still weaknesses like, you lie about a github and link to
your own github, and lie about the public key. And&hellip;many others.</p>

<h3>A:</h3>

<p>malgorithms 118 days ago</p>

<p>yes, it does do this; once you&rsquo;re satisfied with maria&rsquo;s identity,
that she&rsquo;s the person you want, you sign a statement to that effect,
which you can store just locally or post back to the server. (or of
course you can just sign her key in GPG!) The latter - posting back to
the server - is for portability reasons. A keybase user will likely
use keybase on multiple machines.</p>

<h3>Q:</h3>

<p>riquito 117 days ago</p>

<p>The first thing I thought about is a man in the middle attack with
homoglyphs. I don&rsquo;t know if I&rsquo;m paranoid, but look at this</p>

<blockquote><p>keybase id maria</p></blockquote>

<p>   pgp: C4B3 15B4 7154 5281 5100 1C58 C2A5 977B 0022 github:
   mаria_leah ✓ <a href="https://gist.github.com/23423">https://gist.github.com/23423</a> twitter: mаria_h20 ✓
   <a href="https://t.co/m%D0%B0ria_h20/523554">https://t.co/m%D0%B0ria_h20/523554</a> site: mаriah20.com ✓
   <a href="https://m%D0%B0riah20.com/X904F...">https://m%D0%B0riah20.com/X904F&#8230;</a></p>

<p>I looked up for &lsquo;maria&rsquo;, all ascii. The answer, served by a malicious
server, contains the first &lsquo;a&rsquo; of maria in Cyrillic (check yourself,
you&rsquo;ll see that &lsquo;mаria_leah&rsquo; != &lsquo;maria_leah&rsquo;). This would fool the
user.</p>

<p>Maybe the client should apply some logic as browsers do for IDN
homograph attack to show characters not in your locale in a different
way, or at least warn you.</p>

<h3>A:</h3>

<p>malgorithms 117 days ago</p>

<p>Hi riquito - this is a very legitimate concern, and it has to be
reviewed individually for each type of proof keybase supports, in the
client. With twitter, keybase, and github, you can&rsquo;t have a username
containing any character other than an alphanumeric, dash, or
underscore. Which means this kind of attack is impossible.</p>

<p>But for future identity proofs (domains, for example, which we&rsquo;ve yet
to implement), this kind of attack is real. Our approach here will be
that anything outside of normal ascii will be highlighted and
addressed to the user, as a serious warning.</p>

<h3>Q:</h3>

<p>sweis 118 days ago</p>

<p>Even though there is a disclaimer, I think the &ldquo;encrypt in your
browser&rdquo; feature (<a href="https://keybase.io/encrypt">https://keybase.io/encrypt</a>) undermines Keybase&rsquo;s
security credibility.</p>

<p>This form has essentially the same level of security as
Hushmail. Anybody using it should consider the content exposed to
Keybase or anyone compromising Keybase.</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>I&rsquo;m not an authority on hushmail, but it seems like they do crypto on
the server, and the server is just trusted to throw away the keys and
plaintext?</p>

<p>In the keybase Web client, all crypto happens on the browser. The
server knows no keys or data in plaintext. Of course, you&rsquo;d have to
audit the front-end JS code to believe that claim.</p>

<p>But our intention is that the only way to compromise the Web-based
tools would be to insert malicious JavaScript into the client&rsquo;s
browser. A read-only compromise of the server yields only encrypted
data, and the server never has access to the decryption keys.</p>

<h3>Q:</h3>

<p>JustARandomGuy 118 days ago</p>

<p>Hi Chris, a few comments:</p>

<ol>
<li><p>I like the site design, the story flow on the front page does a
great job of explaining what keybase is.</p></li>
<li><p>I see (from the abovementioned story flow) that keys can be
verified by reviewing signed tweets/gists. Is this functionality
extendable to arbitrary links; i.e. verifying keys against personal
blogs, Tumblr, WordPress or does the third-party site need to
implement a recognized API?</p></li>
</ol>


<p>Again, thanks so much, and it looks like a terrific site so far.</p>

<h3>A:</h3>

<p>malgorithms 118 days ago</p>

<p>Good question! There will be no such thing as a general check, because
&ndash; for any identity &ndash; the client software has to perform a check that
a human would agree means something. For example, what does it mean
that you own a certain blog? How would a person confirm it? Well, at
first glance it might mean that you have the power to post a message
there. But someone else could do that it in a comment, and so that
wouldn&rsquo;t work with Keybase. So any given identity check has to match
some human definition of what it means to have that identity. And it
has to be publicly auditable.</p>

<p>With twitter, it&rsquo;s the ability to post a tweet under a certain
username. With owning a tumblr account, it might be something
similar. With your known StackExchange profile it might mean posting a
statement in a specific part of your profile. And so on.</p>

<p>The common thread in each case is (1) that you post in a place where
only your identity can, and (2) what you post is a signed statement
claiming a connection among three things: (a) your keybase username,
(b) your public key, and (3) the identity on that third party
service. (The third one is necessary so it can&rsquo;t be moved elsewhere.)
Note how twitter and github&rsquo;s are totally different, but achieving
these three things.</p>

<p>We will build out this list of identity checks, hopefully making all
kinds of them easy to do. Everything from proving you own a domain to
having a tumblr or reddit accoun. The definition of those checks will
all be publicly reviewable, both in the spec and in the client, which
is what checks them for you.</p>

<h3>Q:</h3>

<p>ghayes 118 days ago</p>

<p>Well, to follow up, could this be extended to ownership of a domain
(via DNS txt record)? Could we use this as a means of authentication
of a self-signed certificate for a domain?</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>Yes to DNS, though we have to be careful here since DNS can be spoofed
more easily than github or twitter proofs over https. I was thinking a
slightly better way to prove ownership of foo.com would be to post a
proof at <a href="https://foo.com/_keybase">https://foo.com/_keybase</a> (or something similar). To spoof
this, an attacker would have to spoof DNS and also the https
certificate.</p>

<p>Authenticating a self-signed domain certificate via keybase is a neat
idea, but would probably need some browser support, unless there&rsquo;s a
clever hack that I&rsquo;m not thinking of.</p>

<h3>Q:</h3>

<p>sneak 118 days ago</p>

<p>I really, really want crypto, specifically, safe and secure-by-default
crypto, to become much more usable.</p>

<p>Despite this hope, I can&rsquo;t seem to help the fact that the first thing
that popped into my head when I read their webpage is &ldquo;oh, they&rsquo;re
wrapping and abstracting important key authentication and critical key
trust configuration to make it more user-friendly, and implementing it
all in javascript. WHAT COULD POSSIBLY GO WRONG?&rdquo;</p>

<p>Even if I got whacked on the head one day and suddenly loved
javascript, I would not use it for certain projects when I wanted to
be taken seriously by, say, cryptographers.</p>

<p>Then again, look at all the success cryptocat has had!</p>

<h3>A:</h3>

<p>FiloSottile 118 days ago</p>

<p>As long as the trust model is that the server is untrusted, it can be
written in the language they prefer. As for the client, there can be
as many implementations in as many languages as needed to make
everyone happy IMHO (they call it reference client in the home).</p>

<h3>Q:</h3>

<p>sneak 118 days ago</p>

<p>If this talks to keybase&rsquo;s API over https and any large groups come to
rely on this, we&rsquo;ve then effectively replaced the decentralized safety
of the Web of Trust used for authenticating PGP keys with the PKI
that&rsquo;s used in browsers, which is completely and totally fucked.</p>

<p>I cannot support a project that doesn&rsquo;t build and strengthen the
underlying WoT. Getting https involved for authenticating unknown keys
is a huge step backwards. Madness.</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>We&rsquo;re not big fans of browser PKI either, but we&rsquo;re using it as
scaffolding that hopefully one day can be torn down.</p>

<p><code>keybase-installer</code> needs an initial install over https from npm. We
unfortunately saw no way around this.</p>

<p>Assuming that install succeeds with integrity, then all future
upgrades of the installer and client are verified with PGP keys stored
locally on the client.</p>

<p>Once the client is installed, it speaks HTTPS to the server, but we&rsquo;re
not trusting the root CA. Rather, we sign with our own CA that we ship
with the client.</p>

<p>The proofs themselves, on twitter and github, all can be verified in
the clear, as FiloSottile points out, but of course relying upon the
HTTPS certificates of twitter and github to make sure the proofs
weren&rsquo;t corrupted in transit between those services and the client.</p>

<h3>Q:</h3>

<p>bqe 118 days ago</p>

<p>I don&rsquo;t understand how using HTTPS for the API has any bearing
whatsoever on the WoT built via PGP.</p>

<p>You can still verify the keys with your client&rsquo;s cached copies, or
using another PGP client.</p>

<h3>A:</h3>

<p>FiloSottile 118 days ago</p>

<p>Exactly, and moreover. If there is no trust in the server, everything
can even go over unencrypted HTTP. CAs have no business here.</p>

<h3>Q:</h3>

<p>IgorPartola 118 days ago</p>

<p>OK, finally looking at it on a desktop&hellip;</p>

<p>So my first question is this: if I know &ldquo;maria&rdquo; and I want to look her
up to get her GPG key, how does keybase handle that? Does it just do
an email address lookup, as in goes to, say, GitHub, grabs her email
address, maria@example.com, then goes to a public key server and grabs
the key that corresponds to maria@example.com?</p>

<p>If that&rsquo;s the case, there is a security issue: what if Maria never
published a GPG key, but Chloe did using Maria&rsquo;s email address?
Moreover, what if Chloe has access to Maria&rsquo;s inbox and can read these
messages I believe to be only readable by Maria?</p>

<p>Edit: I see from responses below that various online presences of an
identity tied to &ldquo;maria&rdquo; are checked. Is this not then susceptible to
its own attack? For example, if Maria does not have a Twitter account
and I create one, or compromise hers and post a different key, will I
be able to at least introduce doubt into her identity, if not take it
over outright?</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>No, there are no proofs based on e-mail addresses, because such proofs
are not publicly-auditable. We could ask that maria prove to the
server that she controls a given gmail account, but there&rsquo;s no way for
the server to prove that to you.</p>

<p>We want the server to be untrusted, ideally just a dumb message
router.</p>

<p>If Chloe wants to impersonate maria, she&rsquo;ll need to get control of
maria&rsquo;s twitter and github accounts. Just claiming maria&rsquo;s email
address won&rsquo;t get her anywhere. (Note that GPG keyservers are
susceptible to exactly the attack you describe).</p>

<h3>A:</h3>

<p>IgorPartola 118 days ago</p>

<p>Hold on. First, GPG servers are susceptible to the same type of
attack, except they would never be used that way. You never look up a
person by email, the send them an encrypted message using the key you
get. Instead, you verify their key and email address out of band: you
meet them, check their credentials, then sign the key. Keybase is
trying to get rid of the in-person verification, an effort I applaud,
but in favor of a much weaker check: whether a few centralized
accounts had been compromised.</p>

<p>The other part, where you check Maria&rsquo;s Twitter and GitHub accounts,
means that a few things like Twitter, and GitHub are impervious to
Chloe: a tall order and a centralized one at that.</p>

<p>Once again, is the point here for me to get a tuple of (email address,
public GPG key) so I can email Maria securely? If so, then someone
somewhere has to prove that this tuple fetched from the public key
servers is valid.</p>

<p>If the point is to only communicate via keybase.io, then the service
is centralized, and useless once actual sensitive info is exchanged,
the US government takes notice and shuts it down at the DNS level.</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>Cool, I agree no one should use PGP servers the way I described, but
you never know what people are doing out there. To do things the
proper way, as you described, is difficult in practice for lots of
people.</p>

<p>To answer the question, the point isn&rsquo;t to get an (email address,
GPG-key) mapping. It&rsquo;s to get a (public-internet-identity, GPG-key)
mapping. People sometimes do this today in an adhoc manner
(e.g. tweeting your GPG fingerprint). We want it to be checkable by
user-friendly software.</p>

<h3>A:</h3>

<p>IgorPartola 118 days ago</p>

<p>I see. That MO makes a bit more sense then, though is it not then
limited to just Keybase.io and will no longer work if something
happens to this service? Or more importantly, is there a way to make
this distributed?</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>If the site went away tomorrow, you&rsquo;d still have keys in your GPG
keychain. You&rsquo;d also have a local cache of the server-side data
relevant to you.</p>

<p>All public server-side data is available as a dump
(<a href="https://keybase.io/__/api-docs/1.0#call-dump-all">https://keybase.io/__/api-docs/1.0#call-dump-all</a>). Private data like
encrypted public keys and password hashes we of course will keep under
wraps.</p>

<p>We don&rsquo;t have immediate plans to make the system distributed, but if
someone did it, we&rsquo;d find it very cool. It&rsquo;s just too much for us to
do right now.</p>

<h3>Q:</h3>

<p>theboss 118 days ago</p>

<p>Where are the security details published? I think that&rsquo;s what we all
want to see&hellip;</p>

<p>On top of this&hellip;.I think this is cool in theory but bad in practice.</p>

<p>The assumption that Root CA&rsquo;s are trustworthy is already hard enough
to make, how do I know that Maria is actually Maria? How will you
verify that &ldquo;Maria&rdquo; actually owns that twitter, github, gmail. Maybe
it is possible to devise some type of scheme for those sites, but how
about more obscure services?</p>

<p>One mistake in one single account causes the entire thing to fall
apart&hellip;</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>As Chris said, we would like to publish everything, just haven&rsquo;t found
the time yet. We have bits and pieces in wikis in our various github
repositories (almost all of which are open source and public).</p>

<p>The high bits are: all crypto is with GPG/RSA as per RFC4880. There
are of course problems here, but we wanted backwards-compatibility and
well-tested, well-used clients.</p>

<p>We encrypt server-stored GPG private keys (if you choose to use that
option) with TripleSec (see <a href="https://keybase.io/triplesec">https://keybase.io/triplesec</a>).</p>

<p>Users use GPG to sign a series of JSON objects, of the form &ldquo;I&rsquo;m
maxtaco on twitter&rdquo;, or &ldquo;I checked Chris&rsquo;s proofs as of 2014/2/14 and
they look good to me.&rdquo; All JSON objects that a user signs are chained
together with SHA-2 hashes. So a user can sign the whole group of JSON
statements by just signing the most recent one.</p>

<p>Here&rsquo;s an example (click on &ldquo;Show the Proof&rdquo;)
<a href="https://keybase.io/max/sigs/ZnBizHMA8RKSB598TaDtjlPlLKSEu1Wu...">https://keybase.io/max/sigs/ZnBizHMA8RKSB598TaDtjlPlLKSEu1Wu&#8230;</a></p>

<p>There&rsquo;s a fair amount of engineering that went into the software
distribution system. We rely first on npm to get the initial client
out there, but after that, exclusively GPG for code-signing. That&rsquo;s
documented here:</p>

<p><a href="https://github.com/keybase/node-installer/wiki/Update-Archit...">https://github.com/keybase/node-installer/wiki/Update-Archit&#8230;</a></p>

<p>We hope to have better documentation soon, and we value feedback, we
just haven&rsquo;t had the time to put it together yet.</p>

<h3>Q:</h3>

<p>caf 118 days ago</p>

<p>The idea here isn&rsquo;t that you use keybase to find out Maria&rsquo;s twitter,
github or gmail identities - it&rsquo;s the opposite. The idea is that you
already know who Maria is on one or more of those services, so the
fact that the account you know is Maria&rsquo;s at github has posted a
signed message from that public key is supposed to testify to you that
that is really your Maria&rsquo;s public key.</p>

<p>You could of course manually review and verify Maria&rsquo;s github post
that contains her public key - all that keybase is really doing here
is providing an easy way of discovering that github post (or tweet, or
whatever).</p>

<h3>A:</h3>

<p>andrewaylett 117 days ago</p>

<p>s/could/should/?</p>

<h3>A:</h3>

<p>caf 116 days ago</p>

<p>Only if you don&rsquo;t trust your copy of the keybase client (as opposed to
the server, which you should not need to trust).</p>

<h3>Q:</h3>

<p>theboss 118 days ago</p>

<p>When I get someone&rsquo;s GPG key I can call them on the telephone or go to
their house and make sure I got the right one.</p>

<p>I add it and use it. When you use this, I&rsquo;m assuming I get that key
every time from the server. I can get it and verify it once, or twice,
or three times, but what about the 1000th time? What happens when I am
important enough that they return a public key that is not Maria&rsquo;s,
and I am none the wiser.</p>

<h3>A:</h3>

<p>malgorithms 117 days ago</p>

<p>boss, I&rsquo;m glad you answered this question. Because it explains the
impetus for Keybase.</p>

<p>I think what Keybase is addressing in the status quo is twofold: (1)
sadly, almost no one does what you describe; in person meeting key
exchanges and webs of trust may sadly be as unpopular in 20 years as
they are now, and as they were 20 years ago. People who go to them are
often confused, even programmers. I wish it were different.</p>

<p>And (2) more important, in 2014, often the person you&rsquo;re dealing with
is someone whose digital public identity is what matters, not their
face in real life or phone number. If you know me online as
github/malgorithms and twitter/malgorithms, to get my key, meeting
someone in person or talking on the phone to someone who claims to be
me is actually less compelling than a signed statement by malgorithms
in all those places you know me.</p>

<p>And if you do know me in real life, then I can tell you my keybase
username and fingerprint, exactly as you&rsquo;re used to. So it&rsquo;s still as
powerful for meeting in person. With the added benefit you can confirm
my other identities, which you likely know to.</p>

<p>In answer to your scenario about verifying: you only need to review
the &ldquo;maria&rdquo; the server provides once, and then your private key signs
a full summary of maria &ndash; her key and proofs. Cases 2 through 1000 of
performing a crypto action on maria involve you only trusting your own
signature of what &ldquo;maria&rdquo; is. The client can query the server for
changes to her identity, and this will be configurable; if maria adds
a new proof, you might wish to know.</p>

<h3>A:</h3>

<p>jonesetc 117 days ago</p>

<p>This is what I assumed the answer would be, and at this point it just
becomes a difference in opinion. I personally do not believe that the
methods you describe are generally acceptable options in the modern
age. My phone number and address are much more important to me than
the off chance of someone capturing my https traffic, breaking it, and
inserting a fake public key. There is a point where the absolute
security of exchanging public keys written on pieces of paper in a
park are called for, but it&rsquo;s not for everyone or even most.</p>

<h3>Q:</h3>

<p>jonesetc 118 days ago</p>

<p>Is there a way to remove an associated account?</p>

<h3>A:</h3>

<p>maxtaco 118 days ago</p>

<p>Yes, though it might be broken right now. Our plan is to allow this,
for sure.</p>

<h3>Q:</h3>

<p>diasp 117 days ago</p>

<p>Interesting. Another approach is <a href="https://encrypt.to/">https://encrypt.to/</a> which loads the
public key from key servers and encrypts client-side via JS.</p>

<h3>A:</h3>

<p>malgorithms 117 days ago</p>

<p>To clarify the difference, it seems encrypt.to is a service which does
PGP crypto in the browser, based on keys pulled from keyservers. In
contrast, Keybase is an identity-proving service, which proves key X
belongs to person with twitter account Y, github account Z, etc. As a
convenience, it also does encryption and other crypto actions for its
users.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[S & E Part One: The Single Story]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/05/22/s-and-e-part-one:-the-single-story/"/>
    <updated>2014-05-22T23:00:00-04:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/05/22/s-and-e-part-one:-the-single-story</id>
    <content type="html"><![CDATA[<h2>Beginnings</h2>

<p>I have a story about myself and education.  That story goes like this.
I hate school.  No, I mean I HATE it.  I always have.  The proof is
that one time when I was in preschool, I noticed that every morning I
put clothes on right before I was taken to school.  So, I reasoned, if
I didn&rsquo;t put clothes on, I couldn&rsquo;t go to school!  This clever plan
backfired unfortunately when my mother in frustration packed me into
the car buck naked and drove me anyways.</p>

<!--more-->


<p>This is my standard story about my relationship with school.  It
exemplifies the deep antipathy that I hold towards it, as well as
revealing a somewhat embarrassing story about myself that is quite
amusing. Most of all it is a story that I enjoy telling, both to
myself and to others.</p>

<p>But really, my relationship with school is much more complicated than
that. I love learning.  Here&rsquo;s another story about my relationship
with school.  In 7th grade I almost failed math. I went to a small
private school, so when my teacher noticed me struggling, instead of
putting me in the low track immediately, she talked to my mom and they
made a deal.  If I could complete a packet of homework over the summer
I could be placed in the &ldquo;intermediate&rdquo; track.</p>

<p>So over the summer, my mother hired a neighborhood college student to
tutor me in math and ultimate frisbee.  Under his kind and encouraging
supervision, I learned lots of little shortcuts and managed to fill in
most of the holes in my math knowledge. I also developed a wicked
Frisbee forehand.  The next year, I aced the intermediate math class.
I loved it.  My math teacher was a kooky old Irish man with eyebrows
that covered half of his forehead.  He took a special interest in me,
and managed to cement my love of math.</p>

<p>Yet a third story.  In my 11th grade pre-calculus course, we studied
proofs.  It was my first introduction to them and I immediately fell
in love.  I did reasonably well in the class, but at the end of the
year my teacher gave out some awards.  I got the award for &ldquo;highest
learning to grade ratio.&rdquo;</p>

<p>In the end, these stories are only snapshots of my experience as a
student. Broader themes have emerged though. Throughout my entire
educational career I have struggled with the disconnect between what
schools claim to be doing - helping students learn - and what I was
actually experiencing.  When the dissonance was mild, I enjoyed school
and invariably excelled.  When it was great, I struggled.  I struggled
to meet both my need to learn, and grow and the schools need to
document and have me prove that learning.</p>

<p>This documenting process - embodied in the assignment of grades, and
the giving of tests - was one of the hardest things for me to deal
with. My single-story casts me in the role of a daring protagonist
pitted against the brutal institution of school.  At least that&rsquo;s how
it plays out in my mind.  But as my other stories show, that&rsquo;s not the
whole truth of how my educational journey has gone.  My dislike for
school has varied in intensity and in expression.  When I was in
elementary and high-school it manifested most through extreme
procrastination on homework.  This had other negative consequences.
My perfectionist nature led to lots of late nights spent furiously
working on projects at the last minute. I&rsquo;m sure this caused my mother
more than a few grey hairs.</p>

<p>In addition, this pattern turned into a self-fulfilling prophecy about
why I hated schools. The things that I hate most about schools are the
bookkeeping and bureaucracy.  Turning in late work, or turning in
half-finished assignments is a good way to experience the worst of
both those aspects.  I think in some ways too, I wanted to blame my
procrastination on the school.  I knew that I could do better than
what I presented in much of my schoolwork and I was angry with myself
for not taking the steps needed to make sure that I did better.  In
the end, it was much easier for me to blame it on the school and keep
repeating the pattern. This cycle dominated my educational experience
from kindergarten all the way through until I graduated high school.</p>

<h2>Vacation</h2>

<p>By the time I was a senior in high-school, I was thoroughly sick of
educational institutions.  I had learned fairly well how to game the
system.  I was able to utilize the Running Start program to complete
my last couple of credits in half the time.  So my senior year I had a
light load the first semester and only one class the second.  As all
my classmates were furiously applying to colleges and visiting
campuses, I calmly decided that I was going to take a year off.</p>

<p>At the time I also felt strongly that there was only one school that I
had any desire to attend, St. John&rsquo;s College.  I applied to St. John&rsquo;s
during my senior year, and against my father&rsquo;s strong wishes to the
contrary, I informed them that I had no intention of actually
enrolling for the following academic year.  I requested that they
still consider my application as though I was applying for the current
year. I was accepted, and immediately exercised my option to defer
admission until 2007.</p>

<p>The adults in my life had many and varied reactions to my decision to
take a year off.  Thankfully, my mother was my staunchest supporter.
I lost a lot of respect for one of my favorite high-school teachers
when he strongly counseled me to &ldquo;just go to college&rdquo; because &ldquo;it will
open doors for you.&rdquo;  All of the advice was well meant I&rsquo;m sure, but I
didn&rsquo;t really hear the words that most people were using.</p>

<p>Instead, whenever I heard someone tell me that I should &ldquo;just get it
out of the way&rdquo; or something similar, what I heard head was &ldquo;you won&rsquo;t
go back.&rdquo;  Some people said this explicitly, or cited examples of
young hoodlums that they knew who had started out with just one year
off, and now, ten years later were still working a dead-end job and
living in their mother&rsquo;s basement.  This last may have struck home
more than I wanted to admit; at the time I <em>did</em> live in my mother&rsquo;s
basement.  This stunning lack of faith incensed me.  I know it wasn&rsquo;t
specific to me.  It seemed to simply be the prevailing wisdom about
college at the time.  But I knew from the inside that if I later
decided that I wanted to go back to school, I could and would do so.</p>

<p>This personal faith in myself is deeply rooted in my family
culture. My mother recently picked up a saying that exemplifies her
faith in my sister and I quite well: &ldquo;You can do hard things.&rdquo; My own
email signature for a long time has been &ldquo;Nothing is ever easy.&rdquo;  This
comes from a book where the expanded phrase is &ldquo;Nothing <em>worth doing</em>
is ever easy.&rdquo;  I think there is something powerful for me in the
union of these two aphorisms.  My phrase is a reminder that things in
life will be difficult; this is a critical reminder for someone with a
tendency towards perfectionism.  My mother&rsquo;s phrase completes this by
heading off the <em>reductio ad absurdum</em> that since everything is so
difficult, you might as well give up now.  In my journey towards
becoming a better student and a better learner, the personal power
that comes from accomplishment has been key.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Summary and Evaluation - How I Figured Out Why I Went to College]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/04/21/the-summary-and-evaluation-how-i-figured-out-why-i-went-to-college/"/>
    <updated>2014-04-21T21:00:00-04:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/04/21/the-summary-and-evaluation-how-i-figured-out-why-i-went-to-college</id>
    <content type="html"><![CDATA[<p>So. I am a Fairhaven student. I&rsquo;m also a Computer Science major. These
are two discrete descriptions of my academic life. Both are integral
parts of the story that I have been creating my whole life. But in
isolation, they imply very disparate things about me.</p>

<!--more-->


<p>For most of my time at Western I have tried to keep these parts of
myself separate. Compartmentalized. This final year, and particularly
these last two quarters that has not been an option. Because of my
somewhat lackadaisical approach to planning my first few years my
schedule has been practically dictated to me. One of the consequences
of this has been having to intermix my main campus self, with my
Fairhaven self. This has been rewarding but difficult.</p>

<p>As a Fairhaven student, I <em>must</em> take the Advanced Seminar during my
final quarter. And in the Advanced Seminar everyone writes what is
known as their <em>Summary and Evaluation</em>. I had heard of this document -
I&rsquo;ve had quite a few friends graduate from Fairhaven while I knew
them - but I really knew nothing about it.</p>

<p>What I&rsquo;m discovering is that it really is almost anything that we want
it to be. The loose sort of overall prompt is to tell whatever story
we want to about our life and education to this point. To help us on
begin that journey, we&rsquo;ve been writing a series of short reflections
on a variety of suggested topics. But like so much at Fairhaven it
really is ultimately left to us to choose our direction.</p>

<p>I knew I had strong feelings about education.  Particularly about my
own. What I didn&rsquo;t quite realize was how much I had to say about both
my own education, and how it relates to Education in general. Perhaps
most surprising of all is that not only do I have a lot to say. I
actually have a story to tell. I still don&rsquo;t quite know the whole of
that story.  But bit by bit, I&rsquo;m figuring it out. Excavating
it. You&rsquo;re welcome to tag along.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LeJOS and Clojure]]></title>
    <link href="http://www.zephyrizing.net/blog/2014/04/17/lejos-and-clojure/"/>
    <updated>2014-04-17T19:00:00-04:00</updated>
    <id>http://www.zephyrizing.net/blog/2014/04/17/lejos-and-clojure</id>
    <content type="html"><![CDATA[<p>This is a short followup to my first post about
<a href="http://www.zephyrizing.net/blog/2013/09/03/why-am-i-doing-this/">experimenting with the Lego EV3&rsquo;s</a> and <a href="http://lejos.org">leJOS</a>. Shortly
after I wrote that post, I went on the Clojure IRC channel and talked
to <a href="http://technomancy.us/">Phil Hagelberg</a> and some other helpful folks about my
issues. They steered me away from attempting to install <a href="http://leiningen.org/">Leiningen</a> on
the EV3 itself, which was a relief since I think that way lay
madness. Instead, they suggested that I have a small launcher program
that would just setup a REPL. Then I could run my robot-controlling
Clojure code from there.</p>

<!--more-->


<p>This advice led to the creation of <a href="https://github.com/RadicalZephyr/ev3-nrepl">ev3-nrepl</a>. It&rsquo;s basically a small
skeleton Clojure project to provide the basis for running Clojure code
on the EV3. It&rsquo;s a minimalist setup, so it should provide a good
starting point for other people to continue experimenting. I tried to
explain how to use it fairly clearly, as well as add all the links to
the necessary documentation to get leJOS running on the EV3.</p>

<p>Unfortunately, despite this seemingly great start, I never ended up
actually doing anything interesting with Clojure on the EV3. There are
two related reasons for this. First, the robotics class I was in
started having actual coding assignments (thanks to the fact that we
could now run leJOS). Second, it turns out that leJOS is designed from
an incredibly stateful and imperative point of view. This makes it
very hard to develop clean Clojure code that makes use of their
API. Specifically, leJOS makes the assumption that any code making use
of it is going to start-up, do robot stuff, and then die. A Clojure
REPL obviously breaks this assumption rather badly. As it turned out,
this was the most painful when I was trying to figure out how to
program and build my robot at the same time.</p>

<p>What I wanted to do was be able to open a Clojure REPL connect to it,
and then leave it running for a long time. This is my normal modus
operandi, but the EV3 makes it even more critical that this
work. Because of the limited hardware, it takes several minutes for
nrepl to actually boot up.</p>

<p>I think that using Clojure as a prototyping tool for building robots
with the EV3 could be incredibly powerful. All of the
<a href="http://www.infoq.com/presentations/Clojure-Java-Interop">arguments</a>
for why Clojure is a great language for exploring Java API&rsquo;s are
applicable to working with the EV3 API&rsquo;s. Possibly even more so, since
there is something really, really cool about typing some commands at
the REPL and having your robot start moving around and doing
stuff. Unfortunately, because of the current architecture of leJOS and
the limited processing power of the EV3&rsquo;s it&rsquo;s not quite there yet.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Clojure, LeJOS and EV3]]></title>
    <link href="http://www.zephyrizing.net/blog/2013/10/31/leJOS-and-EV3/"/>
    <updated>2013-10-31T22:00:00-04:00</updated>
    <id>http://www.zephyrizing.net/blog/2013/10/31/leJOS-and-EV3</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve had the opportunity in the last couple weeks to start playing
with a Lego Mindstorms EV3.  Since this hardware is such a new release
though, most of the normal contenders in the robot programming scene
(namely, RobotC) haven&rsquo;t had time to update their offerings to work
with it.</p>

<p>Enter <a href="http://lejos.org">LeJOS</a>.  Apparently the maintainer of the LeJOS project
got early access to the developer documentation and other necessary
infos, so he&rsquo;s been able to develop a setup for allowing people to
program their EV3 using Java.</p>

<!--more-->


<p>It&rsquo;s a really elegant solution actually.  Since the EV3 already runs a
full linux kernel, he just modified the base Legos linux image.  You
then partition a microSD card and write this image to it.  Now you can
boot the EV3 from the microSD card and ssh into it over either WiFi
(if you have an external USB wifi adapter that&rsquo;s compatible), or over
USB (a more recent feature).</p>

<p>My next goal is to get a clojure projet running on the ev3.  There are
two approaches that I could take.  First, I could try AOT compiling my
clojure source and then shipping just the uberjar to the EV3.  This
seems the most straightforward.  However, following this plan I almost
immediately ran into a stumbling block.  The LeJOS java library cannot
be compiled using Leiningen when not on the EV3.</p>

<p>Apparently this is because something about the clojure compilation
process actually loads the EV3 classes into the JVM.  This causes the
static initializers to be run.  And the static initializers look for
specific files in the /dev directory to try and do their thing.</p>

<p>Obviously, when you&rsquo;re not on an EV3 these files don&rsquo;t exist.</p>

<p>So the second way of doing things would be to attempt to install
leiningen on the EV3 itself.  I see a lot of potential problems with
this, first and foremost being how do I do it without a direct
connection to the internet?  Secondly, the linux installation is very
minimal, and might not actually contain all the necessary tools to
install and use leiningen.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Why Am I Doing This?]]></title>
    <link href="http://www.zephyrizing.net/blog/2013/09/03/why-am-i-doing-this/"/>
    <updated>2013-09-03T04:00:00-04:00</updated>
    <id>http://www.zephyrizing.net/blog/2013/09/03/why-am-i-doing-this</id>
    <content type="html"><![CDATA[<p>It&rsquo;s weird, but I feel like I&rsquo;ve been peer pressured into starting
this blog.  Not that anyone has ever said &ldquo;Geoff, you really need to
start a blog.&rdquo;  It just seems like the thing to do.  More importantly,
it seems like you&rsquo;re less legitimate as a programmer if you DON&rsquo;T have
a blog.  Particularly a blog where you write about cool
programming/tech things that you&rsquo;ve discovered or figured out.</p>

<p>But here&rsquo;s the thing.  I&rsquo;m still learning much more than I&rsquo;m figuring
out on my own.  So I decided I would write about the one subject that
I am actually exploring on my own - seasoning cast iron cookware.</p>

<!--more-->


<p>A couple years ago when I was living in my first apartment with my
best friend Garrett, we bought some cast iron skillets.  We got them
from Lodge, because it seemed like the only company that really sold
cast iron anymore.  When we got them though, the factory seasoning was
somewhat disappointing, as was the quality of the metal itself.  In
particular, we noticed that the grain of the metal was quite large and
that this led to a very rough and almost pitted looking surface to the
metal.  Not exactly ideal.</p>

<p>I had used cast iron pans for years.  They were my favorite pans that
my mother owned.  I learned a bit about how to care for cast iron from
my mother.  Mainly, not to put them away wet.  Typically we would
towel dry, and then we would put them on the stove-top for a couple
minutes until they were completely dry.  When I got my own cast iron
however, I decided that I wanted to know more about how to really
properly care for cast-iron.  But I was sorely disappointed by the
collective knowledge that I found on the internet.  Most of it was
only half complete, or simply vague.  Some pages sounded more like
urban legend than actual advice.  I was recently told with great
conviction that the one thing you absolutely cannot do is submerge a
cast-iron pan in soapy water; as though this would cause it to shatter
instantly.</p>

<p>This has started to change.  In about ten seconds of googling today
(September 2013), I found one <a href="http://sherylcanter.com/wordpress/2010/01/a-science-based-technique-for-seasoning-cast-iron/">blog post by Sheryl Canter</a>
that talks specifically about the chemistry of cast iron seasoning.
But at the time, the situation was exactly as Sheryl Canter describes,
lots of mutually conflicting information with very few common threads.</p>

<p>So Garrett and I extracted what wisdom we could from it, and basically
started experimenting.  Not terribly scientifically, but we both
anecdotally noted what we thought was effective about our various
endeavors, and ended up diverging in our methodology.  I became
partial to the coating with oil and then baking in the oven at high
heat, while Garrett went in the direction of stove-top seasoning.</p>

<p>More recently, I&rsquo;ve come around to the stove-top seasoning method,
mostly because it&rsquo;s super convenient - after you&rsquo;re done cooking, just
put some oil in the pan, and turn the heat up a bit.</p>

<p>The biggest innovation so far has been using a flat-bladed metal
spatula to actively push the oil around while heating it on the
stove-top.  This has a couple of effects, but the biggest one is that
it actively enforces the surface of the pan to be fairly even as
seasoning builds up because the spatula mechanically removes seasoning
that is remarkably higher than other points.</p>

<p>The other big boon that I stumbled on by accident was using sunflower
seed oil.  I say by accident because it just happened that Trader
Joe&rsquo;s carries a very cheap bottle of sunflower seed oil that we bought
to try out.  It turns out to be really nice and easy to cook with, and
also very good at seasoning my cast-iron.  After reading Sheryl&rsquo;s blog
post, it&rsquo;s clear that there&rsquo;s a reason why when you look at this
<a href="http://www.journeytoforever.org/biodiesel_yield.html#highiodine">table of oil iodine values</a>.  Sunflower seed oil is right up
there in the category of &ldquo;semi-drying&rdquo; oils.</p>

<p>The other interesting point about my adventures in cast-iron seasoning
has been my unfortunate tendency to periodically simply burn the
seasoning right out of my pan.  This usually happens when I get
distracted in the middle of seasoning my pan and end up leaving it in
the oven at 500 degrees for four hours.  Most recently my girlfriend
and I left for the entire day (9+ hours) after I had turned on the
electric stove-top to medium in preparation for frying up some eggs
for breakfast (which didn&rsquo;t happen).  So the pan slowly cooked it&rsquo;s
way through the seasoning, and when I got back the bottom of the
skillet was nice and grey, and covered in a fine black dust.</p>

<p>I used to get really upset every time this happened. Now, I&rsquo;ve come to
be much more Zen about it, and accept the impermanence of the
seasoning on my pan. Now, I sort of regard almost as an opportunity to
try to re-season it again.</p>
]]></content>
  </entry>
  
</feed>
